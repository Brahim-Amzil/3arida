"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/petitions.ts":
/*!******************************!*\
  !*** ./src/lib/petitions.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   archivePetition: function() { return /* binding */ archivePetition; },\n/* harmony export */   createPetition: function() { return /* binding */ createPetition; },\n/* harmony export */   deletePetition: function() { return /* binding */ deletePetition; },\n/* harmony export */   deletePetitionByCreator: function() { return /* binding */ deletePetitionByCreator; },\n/* harmony export */   getCategories: function() { return /* binding */ getCategories; },\n/* harmony export */   getPetition: function() { return /* binding */ getPetition; },\n/* harmony export */   getPetitionAnalytics: function() { return /* binding */ getPetitionAnalytics; },\n/* harmony export */   getPetitionById: function() { return /* binding */ getPetitionById; },\n/* harmony export */   getPetitions: function() { return /* binding */ getPetitions; },\n/* harmony export */   getRelatedPetitions: function() { return /* binding */ getRelatedPetitions; },\n/* harmony export */   getUserById: function() { return /* binding */ getUserById; },\n/* harmony export */   getUserPetitions: function() { return /* binding */ getUserPetitions; },\n/* harmony export */   incrementPetitionShares: function() { return /* binding */ incrementPetitionShares; },\n/* harmony export */   incrementPetitionViews: function() { return /* binding */ incrementPetitionViews; },\n/* harmony export */   initializeCategories: function() { return /* binding */ initializeCategories; },\n/* harmony export */   requestPetitionDeletion: function() { return /* binding */ requestPetitionDeletion; },\n/* harmony export */   signPetition: function() { return /* binding */ signPetition; },\n/* harmony export */   updatePetition: function() { return /* binding */ updatePetition; },\n/* harmony export */   updatePetitionStatus: function() { return /* binding */ updatePetitionStatus; }\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./notifications */ \"(app-pages-browser)/./src/lib/notifications.ts\");\n/* harmony import */ var _security_tracking__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./security-tracking */ \"(app-pages-browser)/./src/lib/security-tracking.ts\");\n/* harmony import */ var _content_moderation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./content-moderation */ \"(app-pages-browser)/./src/lib/content-moderation.ts\");\n/* harmony import */ var _audit_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./audit-log */ \"(app-pages-browser)/./src/lib/audit-log.ts\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/storage */ \"(app-pages-browser)/./node_modules/firebase/storage/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* harmony import */ var _petition_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./petition-utils */ \"(app-pages-browser)/./src/lib/petition-utils.ts\");\n\n\n\n\n\n\n\n\n// Collection references\nconst PETITIONS_COLLECTION = \"petitions\";\nconst SIGNATURES_COLLECTION = \"signatures\";\n// Reference Code Generation\nfunction generateReferenceCode() {\n    const letters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    const numbers = \"0123456789\";\n    let code = \"\";\n    // 2 random letters\n    code += letters.charAt(Math.floor(Math.random() * letters.length));\n    code += letters.charAt(Math.floor(Math.random() * letters.length));\n    // 4 random numbers\n    for(let i = 0; i < 4; i++){\n        code += numbers.charAt(Math.floor(Math.random() * numbers.length));\n    }\n    return code;\n}\nasync function isReferenceCodeUnique(code) {\n    try {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"referenceCode\", \"==\", code), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(1));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.empty;\n    } catch (error) {\n        console.error(\"Error checking reference code uniqueness:\", error);\n        return false;\n    }\n}\nasync function generateUniqueReferenceCode() {\n    let attempts = 0;\n    const maxAttempts = 10;\n    while(attempts < maxAttempts){\n        const code = generateReferenceCode();\n        const isUnique = await isReferenceCodeUnique(code);\n        if (isUnique) {\n            return code;\n        }\n        attempts++;\n    }\n    // Fallback: add timestamp digits if all attempts fail\n    const timestamp = Date.now().toString().slice(-4);\n    return \"ZZ\".concat(timestamp);\n}\nconst CATEGORIES_COLLECTION = \"categories\";\nconst USERS_COLLECTION = \"users\";\n// Petition CRUD Operations\n/**\n * Create a new petition\n */ const createPetition = async (petitionData, creatorId, creatorName)=>{\n    // Validate petition data\n    const validationErrors = (0,_petition_utils__WEBPACK_IMPORTED_MODULE_7__.validatePetitionData)(petitionData);\n    if (validationErrors.length > 0) {\n        throw new Error(\"Validation failed: \".concat(validationErrors.map((e)=>e.message).join(\", \")));\n    }\n    try {\n        const now = new Date();\n        const pricingTier = (0,_petition_utils__WEBPACK_IMPORTED_MODULE_7__.calculatePricingTier)(petitionData.targetSignatures);\n        const amountRequired = (0,_petition_utils__WEBPACK_IMPORTED_MODULE_7__.calculatePetitionPrice)(petitionData.targetSignatures);\n        // Generate unique reference code\n        const referenceCode = await generateUniqueReferenceCode();\n        const petitionDoc = {\n            title: petitionData.title.trim(),\n            description: petitionData.description.trim(),\n            category: petitionData.category,\n            subcategory: petitionData.subcategory,\n            targetSignatures: petitionData.targetSignatures,\n            currentSignatures: 0,\n            status: amountRequired > 0 ? \"draft\" : \"pending\",\n            creatorId,\n            creatorName,\n            mediaUrls: petitionData.mediaUrls || [],\n            qrCodeUrl: \"\",\n            hasQrCode: false,\n            pricingTier,\n            amountPaid: 0,\n            paymentStatus: amountRequired > 0 ? \"unpaid\" : \"paid\",\n            // Publisher information (from creation form)\n            publisherType: petitionData.publisherType,\n            publisherName: petitionData.publisherName,\n            // Petition details (from creation form)\n            petitionType: petitionData.petitionType,\n            addressedToType: petitionData.addressedToType,\n            addressedToSpecific: petitionData.addressedToSpecific,\n            referenceCode,\n            // Additional content\n            youtubeVideoUrl: petitionData.youtubeVideoUrl,\n            tags: petitionData.tags,\n            // Location targeting\n            location: petitionData.location,\n            // Metadata\n            createdAt: now,\n            updatedAt: now,\n            // Analytics\n            viewCount: 0,\n            shareCount: 0,\n            // Public visibility\n            isPublic: true,\n            isActive: true\n        };\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION), {\n            ...petitionDoc,\n            createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(petitionDoc.createdAt),\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(petitionDoc.updatedAt)\n        });\n        const createdPetition = {\n            ...petitionDoc,\n            id: docRef.id\n        };\n        console.log(\"✅ Petition created successfully with ID:\", docRef.id);\n        console.log(\"\\uD83D\\uDCC4 Created petition data:\", createdPetition);\n        // Verify the document was actually created by trying to read it immediately\n        try {\n            const verifyDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n            if (verifyDoc.exists()) {\n                console.log(\"✅ Verification: Document exists in Firestore\");\n                console.log(\"\\uD83D\\uDCC4 Verification data:\", verifyDoc.data());\n            } else {\n                console.log(\"❌ Verification: Document does not exist immediately after creation\");\n            }\n        } catch (verifyError) {\n            console.log(\"❌ Verification error:\", verifyError);\n        }\n        return createdPetition;\n    } catch (error) {\n        console.error(\"Error creating petition:\", error);\n        throw new Error(\"Failed to create petition. Please try again.\");\n    }\n};\n/**\n * Get a petition by ID\n */ const getPetitionById = async (id)=>{\n    return getPetition(id);\n};\nconst getPetition = async function(petitionIdOrSlug) {\n    let retryCount = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;\n    try {\n        var _data_createdAt, _data_updatedAt, _data_approvedAt, _data_pausedAt, _data_deletedAt;\n        console.log(\"\\uD83D\\uDD0D Getting petition with ID/Slug:\", petitionIdOrSlug, retryCount > 0 ? \"(retry \".concat(retryCount, \")\") : \"\");\n        // First, try direct lookup (in case it's a full document ID)\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionIdOrSlug);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        if (docSnap.exists()) {\n            console.log(\"✅ Petition found by direct ID lookup\");\n        } else {\n            // If direct lookup fails, try to find by ID suffix (for slug-based lookups)\n            console.log(\"\\uD83D\\uDD0D Direct lookup failed, trying to find by ID suffix...\");\n            // Extract potential ID suffix from slug\n            const parts = petitionIdOrSlug.split(\"-\");\n            const idSuffix = parts[parts.length - 1];\n            if (idSuffix && idSuffix.length >= 8) {\n                // Query all petitions and find one with matching ID suffix\n                const petitionsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(100) // Limit to avoid large queries\n                );\n                const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(petitionsQuery);\n                let foundDoc = null;\n                querySnapshot.forEach((doc)=>{\n                    if (doc.id.endsWith(idSuffix)) {\n                        foundDoc = doc;\n                    }\n                });\n                if (foundDoc) {\n                    var _data_createdAt1, _data_updatedAt1;\n                    console.log(\"✅ Petition found by ID suffix:\", foundDoc.id);\n                    const data = foundDoc.data();\n                    const petition = {\n                        id: foundDoc.id,\n                        title: data.title,\n                        description: data.description,\n                        category: data.category,\n                        subcategory: data.subcategory,\n                        targetSignatures: data.targetSignatures,\n                        currentSignatures: data.currentSignatures || 0,\n                        status: data.status,\n                        creatorId: data.creatorId,\n                        creatorPageId: data.creatorPageId,\n                        mediaUrls: data.mediaUrls || [],\n                        qrCodeUrl: data.qrCodeUrl,\n                        hasQrCode: data.hasQrCode || false,\n                        pricingTier: data.pricingTier,\n                        amountPaid: data.amountPaid || 0,\n                        paymentStatus: data.paymentStatus || \"unpaid\",\n                        location: data.location,\n                        createdAt: ((_data_createdAt1 = data.createdAt) === null || _data_createdAt1 === void 0 ? void 0 : _data_createdAt1.toDate()) || new Date(),\n                        updatedAt: ((_data_updatedAt1 = data.updatedAt) === null || _data_updatedAt1 === void 0 ? void 0 : _data_updatedAt1.toDate()) || new Date(),\n                        viewCount: data.viewCount || 0,\n                        shareCount: data.shareCount || 0,\n                        isPublic: data.isPublic !== false,\n                        isActive: data.isActive !== false,\n                        // Publisher information\n                        publisherType: data.publisherType,\n                        publisherName: data.publisherName,\n                        // Petition details\n                        petitionType: data.petitionType,\n                        addressedToType: data.addressedToType,\n                        addressedToSpecific: data.addressedToSpecific,\n                        referenceCode: data.referenceCode,\n                        // Additional content\n                        youtubeVideoUrl: data.youtubeVideoUrl,\n                        tags: data.tags,\n                        // Moderation fields\n                        moderatedBy: data.moderatedBy,\n                        moderationNotes: data.moderationNotes,\n                        resubmissionCount: data.resubmissionCount || 0,\n                        resubmissionHistory: data.resubmissionHistory || []\n                    };\n                    return petition;\n                }\n            }\n            // If not found and this is the first attempt, retry after a longer delay\n            if (retryCount === 0) {\n                console.log(\"❌ Petition not found, retrying in 3 seconds...\");\n                await new Promise((resolve)=>setTimeout(resolve, 3000));\n                return getPetition(petitionIdOrSlug, 1);\n            }\n            // If still not found, try one more time with an even longer delay\n            if (retryCount === 1) {\n                console.log(\"❌ Petition still not found, final retry in 5 seconds...\");\n                await new Promise((resolve)=>setTimeout(resolve, 5000));\n                return getPetition(petitionIdOrSlug, 2);\n            }\n            console.log(\"❌ Petition not found in database after all retries\");\n            return null;\n        }\n        console.log(\"✅ Petition found, processing data...\");\n        const data = docSnap.data();\n        // Lazy generation: If petition doesn't have a reference code, generate one\n        let referenceCode = data.referenceCode;\n        if (!referenceCode) {\n            console.log(\"\\uD83D\\uDD04 Generating reference code for petition:\", docSnap.id);\n            try {\n                referenceCode = await generateUniqueReferenceCode();\n                // Update the petition with the new code\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n                    referenceCode,\n                    updatedAt: new Date()\n                });\n                console.log(\"✅ Reference code generated and saved:\", referenceCode);\n            } catch (error) {\n                console.error(\"❌ Failed to generate reference code:\", error);\n            // Continue without code - not critical\n            }\n        }\n        const petition = {\n            id: docSnap.id,\n            title: data.title,\n            description: data.description,\n            category: data.category,\n            subcategory: data.subcategory,\n            targetSignatures: data.targetSignatures,\n            currentSignatures: data.currentSignatures || 0,\n            status: data.status,\n            creatorId: data.creatorId,\n            creatorPageId: data.creatorPageId,\n            mediaUrls: data.mediaUrls || [],\n            qrCodeUrl: data.qrCodeUrl,\n            hasQrCode: data.hasQrCode || false,\n            pricingTier: data.pricingTier,\n            amountPaid: data.amountPaid || 0,\n            paymentStatus: data.paymentStatus || \"unpaid\",\n            // Location\n            location: data.location,\n            // Metadata\n            createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate) ? data.createdAt.toDate() : data.createdAt || new Date(),\n            updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate) ? data.updatedAt.toDate() : data.updatedAt || new Date(),\n            approvedAt: ((_data_approvedAt = data.approvedAt) === null || _data_approvedAt === void 0 ? void 0 : _data_approvedAt.toDate) ? data.approvedAt.toDate() : data.approvedAt,\n            pausedAt: ((_data_pausedAt = data.pausedAt) === null || _data_pausedAt === void 0 ? void 0 : _data_pausedAt.toDate) ? data.pausedAt.toDate() : data.pausedAt,\n            deletedAt: ((_data_deletedAt = data.deletedAt) === null || _data_deletedAt === void 0 ? void 0 : _data_deletedAt.toDate) ? data.deletedAt.toDate() : data.deletedAt,\n            // Analytics\n            viewCount: data.viewCount || 0,\n            shareCount: data.shareCount || 0,\n            // Moderation\n            moderatedBy: data.moderatedBy,\n            moderationNotes: data.moderationNotes,\n            resubmissionCount: data.resubmissionCount || 0,\n            resubmissionHistory: data.resubmissionHistory || [],\n            // Public visibility\n            isPublic: data.isPublic !== false,\n            isActive: data.isActive !== false,\n            // Publisher information\n            publisherType: data.publisherType,\n            publisherName: data.publisherName,\n            // Petition details\n            petitionType: data.petitionType,\n            addressedToType: data.addressedToType,\n            addressedToSpecific: data.addressedToSpecific,\n            referenceCode,\n            // Additional content\n            youtubeVideoUrl: data.youtubeVideoUrl,\n            tags: data.tags\n        };\n        console.log(\"✅ Petition processed successfully:\", petition.id);\n        return petition;\n    } catch (error) {\n        console.error(\"❌ Error getting petition:\", error);\n        console.error(\"❌ Error details:\", {\n            petitionIdOrSlug,\n            error: error instanceof Error ? error.message : error\n        });\n        return null; // Return null instead of throwing to avoid breaking the UI\n    }\n};\n/**\n * Update a petition\n */ const updatePetition = async (petitionId, updates, userId)=>{\n    try {\n        // First, verify the user owns this petition\n        const petition = await getPetition(petitionId);\n        if (!petition) {\n            throw new Error(\"Petition not found\");\n        }\n        if (petition.creatorId !== userId) {\n            throw new Error(\"You do not have permission to update this petition\");\n        }\n        // Only allow updates to petitions that can be edited\n        if (petition.status !== \"draft\" && petition.status !== \"pending\") {\n            throw new Error(\"Cannot update petition in current status\");\n        }\n        // Validate updates if provided\n        if (Object.keys(updates).length > 0) {\n            const updatedData = {\n                ...petition,\n                ...updates\n            };\n            const validationErrors = (0,_petition_utils__WEBPACK_IMPORTED_MODULE_7__.validatePetitionData)(updatedData);\n            if (validationErrors.length > 0) {\n                throw new Error(\"Validation failed: \".concat(validationErrors.map((e)=>e.message).join(\", \")));\n            }\n        }\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        const updateData = {\n            ...updates,\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date())\n        };\n        // Recalculate pricing if target signatures changed\n        if (updates.targetSignatures) {\n            const newPricingTier = (0,_petition_utils__WEBPACK_IMPORTED_MODULE_7__.calculatePricingTier)(updates.targetSignatures);\n            const newAmount = (0,_petition_utils__WEBPACK_IMPORTED_MODULE_7__.calculatePetitionPrice)(updates.targetSignatures);\n            updateData.pricingTier = newPricingTier;\n            // If amount changed and not yet paid, update payment status\n            if (newAmount !== petition.amountPaid && petition.paymentStatus === \"unpaid\") {\n                updateData.paymentStatus = newAmount > 0 ? \"unpaid\" : \"paid\";\n                updateData.status = newAmount > 0 ? \"draft\" : \"pending\";\n            }\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, updateData);\n    } catch (error) {\n        console.error(\"Error updating petition:\", error);\n        throw new Error(\"Failed to update petition. Please try again.\");\n    }\n};\n/**\n * Delete a petition\n */ const deletePetition = async (petitionId, userId)=>{\n    try {\n        // First, verify the user owns this petition\n        const petition = await getPetition(petitionId);\n        if (!petition) {\n            throw new Error(\"Petition not found\");\n        }\n        if (petition.creatorId !== userId) {\n            throw new Error(\"You do not have permission to delete this petition\");\n        }\n        // Only allow deletion of draft or pending petitions\n        if (petition.status !== \"draft\" && petition.status !== \"pending\") {\n            throw new Error(\"Cannot delete petition in current status\");\n        }\n        // Delete associated files if they exist\n        if (petition.mediaUrls && petition.mediaUrls.length > 0) {\n            try {\n                const deletePromises = petition.mediaUrls.map((url)=>{\n                    const mediaRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_6__.storage, url);\n                    return (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(mediaRef);\n                });\n                await Promise.all(deletePromises);\n            } catch (error) {\n                console.warn(\"Failed to delete petition media:\", error);\n            }\n        }\n        if (petition.qrCodeUrl) {\n            try {\n                const qrRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_6__.storage, petition.qrCodeUrl);\n                await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(qrRef);\n            } catch (error) {\n                console.warn(\"Failed to delete petition QR code:\", error);\n            }\n        }\n        // Delete the petition document\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(docRef);\n    } catch (error) {\n        console.error(\"Error deleting petition:\", error);\n        throw new Error(\"Failed to delete petition. Please try again.\");\n    }\n};\n/**\n * Sign a petition\n */ const signPetition = async function(petitionId, signerData, userId) {\n    let ipAddress = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : \"\", userAgent = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : \"\";\n    const now = new Date();\n    try {\n        // Get petition to verify it can be signed\n        const petition = await getPetition(petitionId);\n        if (!petition) {\n            await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n                petitionId,\n                ipAddress,\n                userAgent,\n                phoneNumber: signerData.phone,\n                userId,\n                success: false,\n                reason: \"Petition not found\"\n            });\n            throw new Error(\"Petition not found\");\n        }\n        if (petition.status !== \"approved\") {\n            await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n                petitionId,\n                ipAddress,\n                userAgent,\n                phoneNumber: signerData.phone,\n                userId,\n                success: false,\n                reason: \"Petition not approved\"\n            });\n            throw new Error(\"This petition is not available for signing\");\n        }\n        if (petition.currentSignatures >= petition.targetSignatures) {\n            await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n                petitionId,\n                ipAddress,\n                userAgent,\n                phoneNumber: signerData.phone,\n                userId,\n                success: false,\n                reason: \"Target reached\"\n            });\n            throw new Error(\"This petition has reached its signature goal\");\n        }\n        // Validate signature authenticity and security\n        const securityCheck = await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.validateSignatureAuthenticity)(petitionId, signerData.phone, ipAddress, userAgent);\n        if (!securityCheck.valid) {\n            await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n                petitionId,\n                ipAddress,\n                userAgent,\n                phoneNumber: signerData.phone,\n                userId,\n                success: false,\n                reason: securityCheck.reason\n            });\n            throw new Error(securityCheck.reason || \"Security validation failed\");\n        }\n        // Moderate comment if provided\n        if (signerData.comment) {\n            const moderationResult = (0,_content_moderation__WEBPACK_IMPORTED_MODULE_3__.moderateComment)(signerData.comment);\n            if (!moderationResult.approved) {\n                await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n                    petitionId,\n                    ipAddress,\n                    userAgent,\n                    phoneNumber: signerData.phone,\n                    userId,\n                    success: false,\n                    reason: \"Comment moderation failed: \".concat(moderationResult.reasons.join(\", \"))\n                });\n                throw new Error(\"Your comment contains inappropriate content. Please revise and try again.\");\n            }\n        }\n        // Check if user already signed (if userId provided)\n        if (userId) {\n            const existingSignature = await checkExistingSignature(petitionId, userId);\n            if (existingSignature) {\n                throw new Error(\"You have already signed this petition\");\n            }\n        }\n        // Check for duplicate phone number\n        const phoneSignature = await checkPhoneSignature(petitionId, signerData.phone);\n        if (phoneSignature) {\n            throw new Error(\"This phone number has already been used to sign this petition\");\n        }\n        // Create signature with security fingerprint\n        const signatureFingerprint = (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.generateSignatureFingerprint)(signerData.phone, ipAddress, userAgent, now);\n        const signatureData = {\n            petitionId,\n            signerName: signerData.isAnonymous ? \"Anonymous\" : signerData.name,\n            signerPhone: signerData.phone,\n            signerLocation: signerData.location,\n            verificationMethod: \"phone_otp\",\n            verifiedAt: now,\n            ipAddress,\n            userAgent,\n            fingerprint: signatureFingerprint,\n            isAnonymous: signerData.isAnonymous || false,\n            comment: signerData.comment,\n            createdAt: now\n        };\n        // Add userId if provided\n        if (userId) {\n            signatureData.userId = userId;\n        }\n        // Add signature to collection\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, SIGNATURES_COLLECTION), {\n            ...signatureData,\n            verifiedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(signatureData.verifiedAt),\n            createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(signatureData.createdAt)\n        });\n        // Increment petition signature count\n        const petitionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(petitionRef, {\n            currentSignatures: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(1),\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date())\n        });\n        // Check for milestone notifications\n        const newSignatureCount = petition.currentSignatures + 1;\n        const progress = newSignatureCount / petition.targetSignatures * 100;\n        const milestones = [\n            25,\n            50,\n            75,\n            100\n        ];\n        for (const milestone of milestones){\n            const previousProgress = petition.currentSignatures / petition.targetSignatures * 100;\n            if (progress >= milestone && previousProgress < milestone) {\n                try {\n                    await (0,_notifications__WEBPACK_IMPORTED_MODULE_1__.notifySignatureMilestone)(petitionId, petition.creatorId, petition.title, newSignatureCount, milestone);\n                } catch (notificationError) {\n                    console.error(\"Error sending milestone notification:\", notificationError);\n                // Don't fail the signature process if notification fails\n                }\n                break; // Only send one milestone notification per signature\n            }\n        }\n        // Track successful signature attempt\n        await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n            petitionId,\n            ipAddress,\n            userAgent,\n            phoneNumber: signerData.phone,\n            userId,\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error signing petition:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n        // Track failed attempt if not already tracked\n        if (!errorMessage.includes(\"already been used\") && !errorMessage.includes(\"Too many signatures\") && !errorMessage.includes(\"inappropriate content\")) {\n            await (0,_security_tracking__WEBPACK_IMPORTED_MODULE_2__.trackSignatureAttempt)({\n                petitionId,\n                ipAddress,\n                userAgent,\n                phoneNumber: signerData.phone,\n                userId,\n                success: false,\n                reason: errorMessage\n            });\n        }\n        throw new Error(\"Failed to sign petition. Please try again.\");\n    }\n};\n/**\n * Check if user already signed petition\n */ const checkExistingSignature = async (petitionId, userId)=>{\n    try {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, SIGNATURES_COLLECTION), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"petitionId\", \"==\", petitionId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(1));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return !querySnapshot.empty;\n    } catch (error) {\n        console.error(\"Error checking existing signature:\", error);\n        return false;\n    }\n};\n/**\n * Check if phone number already used for petition\n */ const checkPhoneSignature = async (petitionId, phone)=>{\n    try {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, SIGNATURES_COLLECTION), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"petitionId\", \"==\", petitionId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"signerPhone\", \"==\", phone), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(1));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return !querySnapshot.empty;\n    } catch (error) {\n        console.error(\"Error checking phone signature:\", error);\n        return false;\n    }\n};\n/**\n * Get petitions with filtering and pagination\n */ const getPetitions = async function() {\n    let filters = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, pagination = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {\n        page: 1,\n        limit: 12,\n        total: 0,\n        hasMore: false\n    };\n    try {\n        let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION));\n        // Apply filters\n        if (filters.status) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", filters.status));\n        } else {\n            // Default to approved petitions for public viewing\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"approved\"));\n        }\n        if (filters.category) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"category\", \"==\", filters.category));\n        }\n        // Apply sorting\n        const sortField = filters.sortBy === \"popular\" ? \"currentSignatures\" : filters.sortBy === \"signatures\" ? \"currentSignatures\" : \"createdAt\";\n        const sortDirection = filters.sortOrder || \"desc\";\n        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(sortField, sortDirection));\n        // Apply pagination\n        if (pagination.limit) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pagination.limit + 1)); // Get one extra to check if there are more\n        }\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        const petitions = [];\n        const docs = querySnapshot.docs;\n        docs.forEach((doc, index)=>{\n            var _data_createdAt, _data_updatedAt, _data_approvedAt, _data_pausedAt, _data_deletedAt;\n            // Skip the extra document used for pagination check\n            if (pagination.limit && index >= pagination.limit) {\n                return;\n            }\n            const data = doc.data();\n            petitions.push({\n                id: doc.id,\n                title: data.title,\n                description: data.description,\n                category: data.category,\n                subcategory: data.subcategory,\n                targetSignatures: data.targetSignatures,\n                currentSignatures: data.currentSignatures || 0,\n                status: data.status,\n                creatorId: data.creatorId,\n                creatorPageId: data.creatorPageId,\n                mediaUrls: data.mediaUrls || [],\n                qrCodeUrl: data.qrCodeUrl,\n                hasQrCode: data.hasQrCode || false,\n                pricingTier: data.pricingTier,\n                amountPaid: data.amountPaid || 0,\n                paymentStatus: data.paymentStatus || \"unpaid\",\n                // Location\n                location: data.location,\n                // Metadata\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                approvedAt: (_data_approvedAt = data.approvedAt) === null || _data_approvedAt === void 0 ? void 0 : _data_approvedAt.toDate(),\n                pausedAt: (_data_pausedAt = data.pausedAt) === null || _data_pausedAt === void 0 ? void 0 : _data_pausedAt.toDate(),\n                deletedAt: (_data_deletedAt = data.deletedAt) === null || _data_deletedAt === void 0 ? void 0 : _data_deletedAt.toDate(),\n                // Analytics\n                viewCount: data.viewCount || 0,\n                shareCount: data.shareCount || 0,\n                // Moderation\n                moderatedBy: data.moderatedBy,\n                moderationNotes: data.moderationNotes,\n                // Public visibility\n                isPublic: data.isPublic !== false,\n                isActive: data.isActive !== false\n            });\n        });\n        // Apply client-side filters for complex queries\n        let filteredPetitions = petitions;\n        if (filters.search) {\n            const searchTerm = filters.search.toLowerCase();\n            filteredPetitions = petitions.filter((petition)=>petition.title.toLowerCase().includes(searchTerm) || petition.description.toLowerCase().includes(searchTerm));\n        }\n        if (filters.location) {\n            filteredPetitions = filteredPetitions.filter((petition)=>{\n                var _petition_location, _petition_location1;\n                return ((_petition_location = petition.location) === null || _petition_location === void 0 ? void 0 : _petition_location.country) === filters.location || ((_petition_location1 = petition.location) === null || _petition_location1 === void 0 ? void 0 : _petition_location1.city) === filters.location;\n            });\n        }\n        const paginationInfo = {\n            page: pagination.page || 1,\n            limit: pagination.limit || 12,\n            total: filteredPetitions.length,\n            hasMore: filteredPetitions.length === pagination.limit\n        };\n        return {\n            petitions: filteredPetitions,\n            pagination: paginationInfo\n        };\n    } catch (error) {\n        console.error(\"Error getting petitions:\", error);\n        throw new Error(\"Failed to load petitions. Please try again.\");\n    }\n};\n/**\n * Get petitions by user ID\n */ const getUserPetitions = async (userId)=>{\n    try {\n        let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"creatorId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        const petitions = [];\n        querySnapshot.forEach((doc)=>{\n            var _data_createdAt, _data_updatedAt, _data_approvedAt, _data_pausedAt, _data_deletedAt;\n            const data = doc.data();\n            petitions.push({\n                id: doc.id,\n                title: data.title,\n                description: data.description,\n                category: data.category,\n                subcategory: data.subcategory,\n                targetSignatures: data.targetSignatures,\n                currentSignatures: data.currentSignatures || 0,\n                status: data.status,\n                creatorId: data.creatorId,\n                creatorPageId: data.creatorPageId,\n                mediaUrls: data.mediaUrls || [],\n                qrCodeUrl: data.qrCodeUrl,\n                hasQrCode: data.hasQrCode || false,\n                pricingTier: data.pricingTier,\n                amountPaid: data.amountPaid || 0,\n                paymentStatus: data.paymentStatus || \"unpaid\",\n                // Location\n                location: data.location,\n                // Metadata\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                approvedAt: (_data_approvedAt = data.approvedAt) === null || _data_approvedAt === void 0 ? void 0 : _data_approvedAt.toDate(),\n                pausedAt: (_data_pausedAt = data.pausedAt) === null || _data_pausedAt === void 0 ? void 0 : _data_pausedAt.toDate(),\n                deletedAt: (_data_deletedAt = data.deletedAt) === null || _data_deletedAt === void 0 ? void 0 : _data_deletedAt.toDate(),\n                // Analytics\n                viewCount: data.viewCount || 0,\n                shareCount: data.shareCount || 0,\n                // Moderation\n                moderatedBy: data.moderatedBy,\n                moderationNotes: data.moderationNotes,\n                // Public visibility\n                isPublic: data.isPublic !== false,\n                isActive: data.isActive !== false\n            });\n        });\n        return petitions;\n    } catch (error) {\n        console.error(\"Error getting user petitions:\", error);\n        throw new Error(\"Failed to load your petitions. Please try again.\");\n    }\n};\n/**\n * Update petition status (admin/moderator only)\n */ const updatePetitionStatus = async (petitionId, status, moderatorId, notes)=>{\n    try {\n        // Get petition details for audit log\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        const petitionSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        const petition = petitionSnap.data();\n        const oldStatus = petition === null || petition === void 0 ? void 0 : petition.status;\n        const updateData = {\n            status,\n            moderatedBy: moderatorId,\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date())\n        };\n        if (notes) {\n            updateData.moderationNotes = notes;\n        }\n        if (status === \"approved\") {\n            updateData.approvedAt = firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date());\n        } else if (status === \"paused\") {\n            updateData.pausedAt = firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date());\n        } else if (status === \"deleted\") {\n            updateData.deletedAt = firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date());\n            updateData.isActive = false;\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, updateData);\n        // Log the action (async, won't block)\n        const moderator = await getUserById(moderatorId);\n        const actionMap = {\n            approved: \"petition.approved\",\n            rejected: \"petition.rejected\",\n            paused: \"petition.paused\",\n            deleted: \"petition.deleted\",\n            archived: \"petition.archived\"\n        };\n        if (actionMap[status]) {\n            (0,_audit_log__WEBPACK_IMPORTED_MODULE_4__.logAuditAction)({\n                actorId: moderatorId,\n                actorName: (moderator === null || moderator === void 0 ? void 0 : moderator.name) || \"Unknown\",\n                actorEmail: (moderator === null || moderator === void 0 ? void 0 : moderator.email) || \"\",\n                actorRole: (moderator === null || moderator === void 0 ? void 0 : moderator.role) || \"moderator\",\n                action: actionMap[status],\n                targetType: \"petition\",\n                targetId: petitionId,\n                targetName: petition === null || petition === void 0 ? void 0 : petition.title,\n                details: {\n                    oldValue: oldStatus,\n                    newValue: status,\n                    reason: notes\n                }\n            });\n        }\n    } catch (error) {\n        console.error(\"Error updating petition status:\", error);\n        throw new Error(\"Failed to update petition status. Please try again.\");\n    }\n};\n/**\n * Increment petition view count\n */ const incrementPetitionViews = async (petitionId)=>{\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            viewCount: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(1),\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date())\n        });\n    } catch (error) {\n        console.error(\"Error incrementing petition views:\", error);\n    // Don't throw error for analytics - it's not critical\n    }\n};\n/**\n * Increment petition share count\n */ const incrementPetitionShares = async (petitionId)=>{\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            shareCount: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(1),\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(new Date())\n        });\n    } catch (error) {\n        console.error(\"Error incrementing petition shares:\", error);\n    // Don't throw error for analytics - it's not critical\n    }\n};\n/**\n * Initialize default categories\n */ const initializeCategories = async ()=>{\n    try {\n        const categoriesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, CATEGORIES_COLLECTION);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(categoriesRef);\n        // Only initialize if no categories exist\n        if (snapshot.empty) {\n            const now = new Date();\n            const promises = _petition_utils__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_CATEGORIES.map((category)=>(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(categoriesRef, {\n                    ...category,\n                    petitionCount: 0,\n                    createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(now),\n                    updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.fromDate(now)\n                }));\n            await Promise.all(promises);\n            console.log(\"Default categories initialized\");\n        }\n    } catch (error) {\n        console.error(\"Error initializing categories:\", error);\n    }\n};\n/**\n * Get all categories\n */ const getCategories = async ()=>{\n    try {\n        const categoriesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, CATEGORIES_COLLECTION);\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(categoriesRef);\n        const categories = [];\n        querySnapshot.forEach((doc)=>{\n            const data = doc.data();\n            if (data.isActive !== false) {\n                var _data_createdAt, _data_updatedAt;\n                categories.push({\n                    id: doc.id,\n                    name: data.name,\n                    description: data.description,\n                    icon: data.icon,\n                    color: data.color,\n                    isActive: data.isActive !== false,\n                    petitionCount: data.petitionCount || 0,\n                    createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                    updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date()\n                });\n            }\n        });\n        // If no categories found in database, return default categories\n        if (categories.length === 0) {\n            console.log(\"No categories found in database, using defaults\");\n            return _petition_utils__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_CATEGORIES.map((cat, index)=>({\n                    id: \"default-\".concat(index),\n                    ...cat,\n                    petitionCount: 0,\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                }));\n        }\n        // Calculate actual petition counts for each category\n        const petitionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION);\n        const petitionsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(petitionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"approved\"));\n        const petitionsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(petitionsQuery);\n        // Count petitions by category\n        const categoryCounts = {};\n        petitionsSnapshot.forEach((doc)=>{\n            const category = doc.data().category;\n            if (category) {\n                categoryCounts[category] = (categoryCounts[category] || 0) + 1;\n            }\n        });\n        // Update petition counts\n        categories.forEach((cat)=>{\n            cat.petitionCount = categoryCounts[cat.name] || 0;\n        });\n        // Sort by name\n        categories.sort((a, b)=>a.name.localeCompare(b.name));\n        return categories;\n    } catch (error) {\n        console.error(\"Error getting categories:\", error);\n        // Return default categories as fallback\n        return _petition_utils__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_CATEGORIES.map((cat, index)=>({\n                id: \"default-\".concat(index),\n                ...cat,\n                petitionCount: 0,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            }));\n    }\n};\n// Auto-initialize categories when module loads\ninitializeCategories();\n/**\n * Get petition analytics\n */ const getPetitionAnalytics = async (petitionId)=>{\n    try {\n        // Mock implementation for now\n        // In production, this would aggregate signature data\n        return {\n            totalSignatures: 0,\n            dailySignatures: [],\n            topLocations: [],\n            signatureGrowth: 0\n        };\n    } catch (error) {\n        console.error(\"Error getting petition analytics:\", error);\n        throw new Error(\"Failed to load analytics. Please try again.\");\n    }\n};\n/**\n * Get related petitions by category\n */ const getRelatedPetitions = async (category, excludeId)=>{\n    try {\n        // Mock implementation for now\n        // In production, this would find similar petitions\n        return [];\n    } catch (error) {\n        console.error(\"Error getting related petitions:\", error);\n        return [];\n    }\n};\n/**\n * Get user by ID\n */ const getUserById = async (userId)=>{\n    try {\n        var _userData_createdAt, _userData_updatedAt;\n        const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, USERS_COLLECTION, userId);\n        const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(userRef);\n        if (!userSnap.exists()) {\n            return null;\n        }\n        const userData = userSnap.data();\n        return {\n            id: userSnap.id,\n            email: userData.email || \"\",\n            name: userData.name || \"\",\n            role: userData.role || \"user\",\n            phone: userData.phone || \"\",\n            verifiedEmail: userData.emailVerified || false,\n            verifiedPhone: userData.phoneVerified || false,\n            createdAt: ((_userData_createdAt = userData.createdAt) === null || _userData_createdAt === void 0 ? void 0 : _userData_createdAt.toDate()) || new Date(),\n            updatedAt: ((_userData_updatedAt = userData.updatedAt) === null || _userData_updatedAt === void 0 ? void 0 : _userData_updatedAt.toDate()) || new Date(),\n            isActive: userData.isActive !== false,\n            ...userData.bio && {\n                bio: userData.bio\n            },\n            ...userData.photoURL && {\n                photoURL: userData.photoURL\n            }\n        };\n    } catch (error) {\n        console.error(\"Error getting user:\", error);\n        return null;\n    }\n};\n/**\n * Delete petition by creator (soft delete)\n */ const deletePetitionByCreator = async (petitionId, userId)=>{\n    try {\n        const petitionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        const petitionSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(petitionRef);\n        if (!petitionSnap.exists()) {\n            throw new Error(\"Petition not found\");\n        }\n        const petition = petitionSnap.data();\n        // Verify the user is the creator\n        if (petition.creatorId !== userId) {\n            throw new Error(\"Only the petition creator can delete this petition\");\n        }\n        // Soft delete by marking as deleted\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(petitionRef, {\n            status: \"deleted\",\n            deletedAt: new Date(),\n            updatedAt: new Date()\n        });\n    } catch (error) {\n        console.error(\"Error deleting petition:\", error);\n        throw error;\n    }\n};\n/**\n * Archive a petition\n */ const archivePetition = async (petitionId, userId)=>{\n    try {\n        const petitionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, PETITIONS_COLLECTION, petitionId);\n        const petitionSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(petitionRef);\n        if (!petitionSnap.exists()) {\n            throw new Error(\"Petition not found\");\n        }\n        const petition = petitionSnap.data();\n        // Verify the user is the creator\n        if (petition.creatorId !== userId) {\n            throw new Error(\"Only the petition creator can archive this petition\");\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(petitionRef, {\n            status: \"archived\",\n            archivedAt: new Date(),\n            updatedAt: new Date()\n        });\n    } catch (error) {\n        console.error(\"Error archiving petition:\", error);\n        throw error;\n    }\n};\n/**\n * Request petition deletion (for non-creators)\n */ const requestPetitionDeletion = async (petitionId, userId, reason)=>{\n    try {\n        // In a real implementation, this would create a deletion request\n        // that admins/moderators can review\n        const requestRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_6__.db, \"deletion_requests\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(requestRef, {\n            petitionId,\n            requestedBy: userId,\n            reason,\n            status: \"pending\",\n            createdAt: new Date()\n        });\n    } catch (error) {\n        console.error(\"Error requesting petition deletion:\", error);\n        throw error;\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvcGV0aXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdCNEI7QUFDK0I7QUFLOUI7QUFDMEI7QUFDRztBQU1oQztBQUNlO0FBZWY7QUFFMUIsd0JBQXdCO0FBQ3hCLE1BQU0yQix1QkFBdUI7QUFDN0IsTUFBTUMsd0JBQXdCO0FBRTlCLDRCQUE0QjtBQUM1QixTQUFTQztJQUNQLE1BQU1DLFVBQVU7SUFDaEIsTUFBTUMsVUFBVTtJQUVoQixJQUFJQyxPQUFPO0lBQ1gsbUJBQW1CO0lBQ25CQSxRQUFRRixRQUFRRyxNQUFNLENBQUNDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLTixRQUFRTyxNQUFNO0lBQ2hFTCxRQUFRRixRQUFRRyxNQUFNLENBQUNDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLTixRQUFRTyxNQUFNO0lBQ2hFLG1CQUFtQjtJQUNuQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSSxHQUFHQSxJQUFLO1FBQzFCTixRQUFRRCxRQUFRRSxNQUFNLENBQUNDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLTCxRQUFRTSxNQUFNO0lBQ2xFO0lBRUEsT0FBT0w7QUFDVDtBQUVBLGVBQWVPLHNCQUFzQlAsSUFBWTtJQUMvQyxJQUFJO1FBQ0YsTUFBTVEsSUFBSWpDLHlEQUFLQSxDQUNiUCw4REFBVUEsQ0FBQ3FCLHlDQUFFQSxFQUFFTSx1QkFDZm5CLHlEQUFLQSxDQUFDLGlCQUFpQixNQUFNd0IsT0FDN0J0Qix5REFBS0EsQ0FBQztRQUVSLE1BQU0rQixXQUFXLE1BQU1yQywyREFBT0EsQ0FBQ29DO1FBQy9CLE9BQU9DLFNBQVNDLEtBQUs7SUFDdkIsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzNELE9BQU87SUFDVDtBQUNGO0FBRUEsZUFBZUU7SUFDYixJQUFJQyxX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QU9QLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsTUFBTUE7SUFDUjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9wZXRpdGlvbnMudHM/YTlkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjb2xsZWN0aW9uLFxuICBkb2MsXG4gIGFkZERvYyxcbiAgZ2V0RG9jLFxuICBnZXREb2NzLFxuICB1cGRhdGVEb2MsXG4gIGRlbGV0ZURvYyxcbiAgcXVlcnksXG4gIHdoZXJlLFxuICBvcmRlckJ5LFxuICBsaW1pdCxcbiAgc3RhcnRBZnRlcixcbiAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxuICBUaW1lc3RhbXAsXG4gIGluY3JlbWVudCxcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IG5vdGlmeVNpZ25hdHVyZU1pbGVzdG9uZSB9IGZyb20gJy4vbm90aWZpY2F0aW9ucyc7XG5pbXBvcnQge1xuICB2YWxpZGF0ZVNpZ25hdHVyZUF1dGhlbnRpY2l0eSxcbiAgdHJhY2tTaWduYXR1cmVBdHRlbXB0LFxuICBnZW5lcmF0ZVNpZ25hdHVyZUZpbmdlcnByaW50LFxufSBmcm9tICcuL3NlY3VyaXR5LXRyYWNraW5nJztcbmltcG9ydCB7IG1vZGVyYXRlQ29tbWVudCB9IGZyb20gJy4vY29udGVudC1tb2RlcmF0aW9uJztcbmltcG9ydCB7IGxvZ0F1ZGl0QWN0aW9uLCBBdWRpdEFjdGlvbiB9IGZyb20gJy4vYXVkaXQtbG9nJztcbmltcG9ydCB7XG4gIHJlZixcbiAgdXBsb2FkQnl0ZXMsXG4gIGdldERvd25sb2FkVVJMLFxuICBkZWxldGVPYmplY3QsXG59IGZyb20gJ2ZpcmViYXNlL3N0b3JhZ2UnO1xuaW1wb3J0IHsgZGIsIHN0b3JhZ2UgfSBmcm9tICcuL2ZpcmViYXNlJztcbmltcG9ydCB7XG4gIFBldGl0aW9uLFxuICBQZXRpdGlvbkZvcm1EYXRhLFxuICBQZXRpdGlvbkZpbHRlcnMsXG4gIFBhZ2luYXRpb25JbmZvLFxuICBDYXRlZ29yeSxcbiAgU2lnbmF0dXJlLFxuICBVc2VyLFxufSBmcm9tICcuLi90eXBlcy9wZXRpdGlvbic7XG5pbXBvcnQge1xuICB2YWxpZGF0ZVBldGl0aW9uRGF0YSxcbiAgREVGQVVMVF9DQVRFR09SSUVTLFxuICBjYWxjdWxhdGVQcmljaW5nVGllcixcbiAgY2FsY3VsYXRlUGV0aXRpb25QcmljZSxcbn0gZnJvbSAnLi9wZXRpdGlvbi11dGlscyc7XG5cbi8vIENvbGxlY3Rpb24gcmVmZXJlbmNlc1xuY29uc3QgUEVUSVRJT05TX0NPTExFQ1RJT04gPSAncGV0aXRpb25zJztcbmNvbnN0IFNJR05BVFVSRVNfQ09MTEVDVElPTiA9ICdzaWduYXR1cmVzJztcblxuLy8gUmVmZXJlbmNlIENvZGUgR2VuZXJhdGlvblxuZnVuY3Rpb24gZ2VuZXJhdGVSZWZlcmVuY2VDb2RlKCk6IHN0cmluZyB7XG4gIGNvbnN0IGxldHRlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuICBjb25zdCBudW1iZXJzID0gJzAxMjM0NTY3ODknO1xuXG4gIGxldCBjb2RlID0gJyc7XG4gIC8vIDIgcmFuZG9tIGxldHRlcnNcbiAgY29kZSArPSBsZXR0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZXR0ZXJzLmxlbmd0aCkpO1xuICBjb2RlICs9IGxldHRlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxldHRlcnMubGVuZ3RoKSk7XG4gIC8vIDQgcmFuZG9tIG51bWJlcnNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICBjb2RlICs9IG51bWJlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bWJlcnMubGVuZ3RoKSk7XG4gIH1cblxuICByZXR1cm4gY29kZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaXNSZWZlcmVuY2VDb2RlVW5pcXVlKGNvZGU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZGIsIFBFVElUSU9OU19DT0xMRUNUSU9OKSxcbiAgICAgIHdoZXJlKCdyZWZlcmVuY2VDb2RlJywgJz09JywgY29kZSksXG4gICAgICBsaW1pdCgxKVxuICAgICk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIHJldHVybiBzbmFwc2hvdC5lbXB0eTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyByZWZlcmVuY2UgY29kZSB1bmlxdWVuZXNzOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVSZWZlcmVuY2VDb2RlKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGxldCBhdHRlbXB0cyA9IDA7XG4gIGNvbnN0IG1heEF0dGVtcHRzID0gMTA7XG5cbiAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcbiAgICBjb25zdCBjb2RlID0gZ2VuZXJhdGVSZWZlcmVuY2VDb2RlKCk7XG4gICAgY29uc3QgaXNVbmlxdWUgPSBhd2FpdCBpc1JlZmVyZW5jZUNvZGVVbmlxdWUoY29kZSk7XG5cbiAgICBpZiAoaXNVbmlxdWUpIHtcbiAgICAgIHJldHVybiBjb2RlO1xuICAgIH1cblxuICAgIGF0dGVtcHRzKys7XG4gIH1cblxuICAvLyBGYWxsYmFjazogYWRkIHRpbWVzdGFtcCBkaWdpdHMgaWYgYWxsIGF0dGVtcHRzIGZhaWxcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKS50b1N0cmluZygpLnNsaWNlKC00KTtcbiAgcmV0dXJuIGBaWiR7dGltZXN0YW1wfWA7XG59XG5jb25zdCBDQVRFR09SSUVTX0NPTExFQ1RJT04gPSAnY2F0ZWdvcmllcyc7XG5jb25zdCBVU0VSU19DT0xMRUNUSU9OID0gJ3VzZXJzJztcblxuLy8gUGV0aXRpb24gQ1JVRCBPcGVyYXRpb25zXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHBldGl0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVQZXRpdGlvbiA9IGFzeW5jIChcbiAgcGV0aXRpb25EYXRhOiBQZXRpdGlvbkZvcm1EYXRhLFxuICBjcmVhdG9ySWQ6IHN0cmluZyxcbiAgY3JlYXRvck5hbWU6IHN0cmluZ1xuKTogUHJvbWlzZTxQZXRpdGlvbj4gPT4ge1xuICAvLyBWYWxpZGF0ZSBwZXRpdGlvbiBkYXRhXG4gIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSB2YWxpZGF0ZVBldGl0aW9uRGF0YShwZXRpdGlvbkRhdGEpO1xuICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFZhbGlkYXRpb24gZmFpbGVkOiAke3ZhbGlkYXRpb25FcnJvcnMubWFwKChlKSA9PiBlLm1lc3NhZ2UpLmpvaW4oJywgJyl9YFxuICAgICk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgcHJpY2luZ1RpZXIgPSBjYWxjdWxhdGVQcmljaW5nVGllcihwZXRpdGlvbkRhdGEudGFyZ2V0U2lnbmF0dXJlcyk7XG4gICAgY29uc3QgYW1vdW50UmVxdWlyZWQgPSBjYWxjdWxhdGVQZXRpdGlvblByaWNlKFxuICAgICAgcGV0aXRpb25EYXRhLnRhcmdldFNpZ25hdHVyZXNcbiAgICApO1xuXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIHJlZmVyZW5jZSBjb2RlXG4gICAgY29uc3QgcmVmZXJlbmNlQ29kZSA9IGF3YWl0IGdlbmVyYXRlVW5pcXVlUmVmZXJlbmNlQ29kZSgpO1xuXG4gICAgY29uc3QgcGV0aXRpb25Eb2M6IE9taXQ8UGV0aXRpb24sICdpZCc+ID0ge1xuICAgICAgdGl0bGU6IHBldGl0aW9uRGF0YS50aXRsZS50cmltKCksXG4gICAgICBkZXNjcmlwdGlvbjogcGV0aXRpb25EYXRhLmRlc2NyaXB0aW9uLnRyaW0oKSxcbiAgICAgIGNhdGVnb3J5OiBwZXRpdGlvbkRhdGEuY2F0ZWdvcnksXG4gICAgICBzdWJjYXRlZ29yeTogcGV0aXRpb25EYXRhLnN1YmNhdGVnb3J5LFxuICAgICAgdGFyZ2V0U2lnbmF0dXJlczogcGV0aXRpb25EYXRhLnRhcmdldFNpZ25hdHVyZXMsXG4gICAgICBjdXJyZW50U2lnbmF0dXJlczogMCxcbiAgICAgIHN0YXR1czogYW1vdW50UmVxdWlyZWQgPiAwID8gJ2RyYWZ0JyA6ICdwZW5kaW5nJywgLy8gRnJlZSBwZXRpdGlvbnMgZ28gdG8gcGVuZGluZywgcGFpZCBvbmVzIHN0YXkgZHJhZnQgdW50aWwgcGF5bWVudFxuICAgICAgY3JlYXRvcklkLFxuICAgICAgY3JlYXRvck5hbWUsXG4gICAgICBtZWRpYVVybHM6IHBldGl0aW9uRGF0YS5tZWRpYVVybHMgfHwgW10sXG4gICAgICBxckNvZGVVcmw6ICcnLFxuICAgICAgaGFzUXJDb2RlOiBmYWxzZSxcbiAgICAgIHByaWNpbmdUaWVyLFxuICAgICAgYW1vdW50UGFpZDogMCxcbiAgICAgIHBheW1lbnRTdGF0dXM6IGFtb3VudFJlcXVpcmVkID4gMCA/ICd1bnBhaWQnIDogJ3BhaWQnLFxuXG4gICAgICAvLyBQdWJsaXNoZXIgaW5mb3JtYXRpb24gKGZyb20gY3JlYXRpb24gZm9ybSlcbiAgICAgIHB1Ymxpc2hlclR5cGU6IHBldGl0aW9uRGF0YS5wdWJsaXNoZXJUeXBlLFxuICAgICAgcHVibGlzaGVyTmFtZTogcGV0aXRpb25EYXRhLnB1Ymxpc2hlck5hbWUsXG5cbiAgICAgIC8vIFBldGl0aW9uIGRldGFpbHMgKGZyb20gY3JlYXRpb24gZm9ybSlcbiAgICAgIHBldGl0aW9uVHlwZTogcGV0aXRpb25EYXRhLnBldGl0aW9uVHlwZSxcbiAgICAgIGFkZHJlc3NlZFRvVHlwZTogcGV0aXRpb25EYXRhLmFkZHJlc3NlZFRvVHlwZSxcbiAgICAgIGFkZHJlc3NlZFRvU3BlY2lmaWM6IHBldGl0aW9uRGF0YS5hZGRyZXNzZWRUb1NwZWNpZmljLFxuICAgICAgcmVmZXJlbmNlQ29kZSxcblxuICAgICAgLy8gQWRkaXRpb25hbCBjb250ZW50XG4gICAgICB5b3V0dWJlVmlkZW9Vcmw6IHBldGl0aW9uRGF0YS55b3V0dWJlVmlkZW9VcmwsXG4gICAgICB0YWdzOiBwZXRpdGlvbkRhdGEudGFncyxcblxuICAgICAgLy8gTG9jYXRpb24gdGFyZ2V0aW5nXG4gICAgICBsb2NhdGlvbjogcGV0aXRpb25EYXRhLmxvY2F0aW9uIGFzIGFueSxcblxuICAgICAgLy8gTWV0YWRhdGFcbiAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgdXBkYXRlZEF0OiBub3csXG5cbiAgICAgIC8vIEFuYWx5dGljc1xuICAgICAgdmlld0NvdW50OiAwLFxuICAgICAgc2hhcmVDb3VudDogMCxcblxuICAgICAgLy8gUHVibGljIHZpc2liaWxpdHlcbiAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgfTtcblxuICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCBQRVRJVElPTlNfQ09MTEVDVElPTiksIHtcbiAgICAgIC4uLnBldGl0aW9uRG9jLFxuICAgICAgY3JlYXRlZEF0OiBUaW1lc3RhbXAuZnJvbURhdGUocGV0aXRpb25Eb2MuY3JlYXRlZEF0KSxcbiAgICAgIHVwZGF0ZWRBdDogVGltZXN0YW1wLmZyb21EYXRlKHBldGl0aW9uRG9jLnVwZGF0ZWRBdCksXG4gICAgfSk7XG5cbiAgICBjb25zdCBjcmVhdGVkUGV0aXRpb246IFBldGl0aW9uID0ge1xuICAgICAgLi4ucGV0aXRpb25Eb2MsXG4gICAgICBpZDogZG9jUmVmLmlkLFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFBldGl0aW9uIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IHdpdGggSUQ6JywgZG9jUmVmLmlkKTtcbiAgICBjb25zb2xlLmxvZygn8J+ThCBDcmVhdGVkIHBldGl0aW9uIGRhdGE6JywgY3JlYXRlZFBldGl0aW9uKTtcblxuICAgIC8vIFZlcmlmeSB0aGUgZG9jdW1lbnQgd2FzIGFjdHVhbGx5IGNyZWF0ZWQgYnkgdHJ5aW5nIHRvIHJlYWQgaXQgaW1tZWRpYXRlbHlcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmVyaWZ5RG9jID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICBpZiAodmVyaWZ5RG9jLmV4aXN0cygpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgVmVyaWZpY2F0aW9uOiBEb2N1bWVudCBleGlzdHMgaW4gRmlyZXN0b3JlJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OEIFZlcmlmaWNhdGlvbiBkYXRhOicsIHZlcmlmeURvYy5kYXRhKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJ+KdjCBWZXJpZmljYXRpb246IERvY3VtZW50IGRvZXMgbm90IGV4aXN0IGltbWVkaWF0ZWx5IGFmdGVyIGNyZWF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKHZlcmlmeUVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFZlcmlmaWNhdGlvbiBlcnJvcjonLCB2ZXJpZnlFcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZWRQZXRpdGlvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwZXRpdGlvbjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHBldGl0aW9uLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhIHBldGl0aW9uIGJ5IElEXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRQZXRpdGlvbkJ5SWQgPSBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8UGV0aXRpb24gfCBudWxsPiA9PiB7XG4gIHJldHVybiBnZXRQZXRpdGlvbihpZCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UGV0aXRpb24gPSBhc3luYyAoXG4gIHBldGl0aW9uSWRPclNsdWc6IHN0cmluZyxcbiAgcmV0cnlDb3VudDogbnVtYmVyID0gMFxuKTogUHJvbWlzZTxQZXRpdGlvbiB8IG51bGw+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgICfwn5SNIEdldHRpbmcgcGV0aXRpb24gd2l0aCBJRC9TbHVnOicsXG4gICAgICBwZXRpdGlvbklkT3JTbHVnLFxuICAgICAgcmV0cnlDb3VudCA+IDAgPyBgKHJldHJ5ICR7cmV0cnlDb3VudH0pYCA6ICcnXG4gICAgKTtcblxuICAgIC8vIEZpcnN0LCB0cnkgZGlyZWN0IGxvb2t1cCAoaW4gY2FzZSBpdCdzIGEgZnVsbCBkb2N1bWVudCBJRClcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFBFVElUSU9OU19DT0xMRUNUSU9OLCBwZXRpdGlvbklkT3JTbHVnKTtcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG5cbiAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBQZXRpdGlvbiBmb3VuZCBieSBkaXJlY3QgSUQgbG9va3VwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGRpcmVjdCBsb29rdXAgZmFpbHMsIHRyeSB0byBmaW5kIGJ5IElEIHN1ZmZpeCAoZm9yIHNsdWctYmFzZWQgbG9va3VwcylcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIERpcmVjdCBsb29rdXAgZmFpbGVkLCB0cnlpbmcgdG8gZmluZCBieSBJRCBzdWZmaXguLi4nKTtcblxuICAgICAgLy8gRXh0cmFjdCBwb3RlbnRpYWwgSUQgc3VmZml4IGZyb20gc2x1Z1xuICAgICAgY29uc3QgcGFydHMgPSBwZXRpdGlvbklkT3JTbHVnLnNwbGl0KCctJyk7XG4gICAgICBjb25zdCBpZFN1ZmZpeCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICBpZiAoaWRTdWZmaXggJiYgaWRTdWZmaXgubGVuZ3RoID49IDgpIHtcbiAgICAgICAgLy8gUXVlcnkgYWxsIHBldGl0aW9ucyBhbmQgZmluZCBvbmUgd2l0aCBtYXRjaGluZyBJRCBzdWZmaXhcbiAgICAgICAgY29uc3QgcGV0aXRpb25zUXVlcnkgPSBxdWVyeShcbiAgICAgICAgICBjb2xsZWN0aW9uKGRiLCBQRVRJVElPTlNfQ09MTEVDVElPTiksXG4gICAgICAgICAgbGltaXQoMTAwKSAvLyBMaW1pdCB0byBhdm9pZCBsYXJnZSBxdWVyaWVzXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocGV0aXRpb25zUXVlcnkpO1xuICAgICAgICBsZXQgZm91bmREb2M6IGFueSA9IG51bGw7XG5cbiAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgICBpZiAoZG9jLmlkLmVuZHNXaXRoKGlkU3VmZml4KSkge1xuICAgICAgICAgICAgZm91bmREb2MgPSBkb2M7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZm91bmREb2MpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFBldGl0aW9uIGZvdW5kIGJ5IElEIHN1ZmZpeDonLCBmb3VuZERvYy5pZCk7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGZvdW5kRG9jLmRhdGEoKTtcbiAgICAgICAgICBjb25zdCBwZXRpdGlvbjogUGV0aXRpb24gPSB7XG4gICAgICAgICAgICBpZDogZm91bmREb2MuaWQsXG4gICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnksXG4gICAgICAgICAgICBzdWJjYXRlZ29yeTogZGF0YS5zdWJjYXRlZ29yeSxcbiAgICAgICAgICAgIHRhcmdldFNpZ25hdHVyZXM6IGRhdGEudGFyZ2V0U2lnbmF0dXJlcyxcbiAgICAgICAgICAgIGN1cnJlbnRTaWduYXR1cmVzOiBkYXRhLmN1cnJlbnRTaWduYXR1cmVzIHx8IDAsXG4gICAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICAgICAgY3JlYXRvcklkOiBkYXRhLmNyZWF0b3JJZCxcbiAgICAgICAgICAgIGNyZWF0b3JQYWdlSWQ6IGRhdGEuY3JlYXRvclBhZ2VJZCxcbiAgICAgICAgICAgIG1lZGlhVXJsczogZGF0YS5tZWRpYVVybHMgfHwgW10sXG4gICAgICAgICAgICBxckNvZGVVcmw6IGRhdGEucXJDb2RlVXJsLFxuICAgICAgICAgICAgaGFzUXJDb2RlOiBkYXRhLmhhc1FyQ29kZSB8fCBmYWxzZSxcbiAgICAgICAgICAgIHByaWNpbmdUaWVyOiBkYXRhLnByaWNpbmdUaWVyLFxuICAgICAgICAgICAgYW1vdW50UGFpZDogZGF0YS5hbW91bnRQYWlkIHx8IDAsXG4gICAgICAgICAgICBwYXltZW50U3RhdHVzOiBkYXRhLnBheW1lbnRTdGF0dXMgfHwgJ3VucGFpZCcsXG4gICAgICAgICAgICBsb2NhdGlvbjogZGF0YS5sb2NhdGlvbixcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdmlld0NvdW50OiBkYXRhLnZpZXdDb3VudCB8fCAwLFxuICAgICAgICAgICAgc2hhcmVDb3VudDogZGF0YS5zaGFyZUNvdW50IHx8IDAsXG4gICAgICAgICAgICBpc1B1YmxpYzogZGF0YS5pc1B1YmxpYyAhPT0gZmFsc2UsXG4gICAgICAgICAgICBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSAhPT0gZmFsc2UsXG5cbiAgICAgICAgICAgIC8vIFB1Ymxpc2hlciBpbmZvcm1hdGlvblxuICAgICAgICAgICAgcHVibGlzaGVyVHlwZTogZGF0YS5wdWJsaXNoZXJUeXBlLFxuICAgICAgICAgICAgcHVibGlzaGVyTmFtZTogZGF0YS5wdWJsaXNoZXJOYW1lLFxuXG4gICAgICAgICAgICAvLyBQZXRpdGlvbiBkZXRhaWxzXG4gICAgICAgICAgICBwZXRpdGlvblR5cGU6IGRhdGEucGV0aXRpb25UeXBlLFxuICAgICAgICAgICAgYWRkcmVzc2VkVG9UeXBlOiBkYXRhLmFkZHJlc3NlZFRvVHlwZSxcbiAgICAgICAgICAgIGFkZHJlc3NlZFRvU3BlY2lmaWM6IGRhdGEuYWRkcmVzc2VkVG9TcGVjaWZpYyxcbiAgICAgICAgICAgIHJlZmVyZW5jZUNvZGU6IGRhdGEucmVmZXJlbmNlQ29kZSxcblxuICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBjb250ZW50XG4gICAgICAgICAgICB5b3V0dWJlVmlkZW9Vcmw6IGRhdGEueW91dHViZVZpZGVvVXJsLFxuICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxuXG4gICAgICAgICAgICAvLyBNb2RlcmF0aW9uIGZpZWxkc1xuICAgICAgICAgICAgbW9kZXJhdGVkQnk6IGRhdGEubW9kZXJhdGVkQnksXG4gICAgICAgICAgICBtb2RlcmF0aW9uTm90ZXM6IGRhdGEubW9kZXJhdGlvbk5vdGVzLFxuICAgICAgICAgICAgcmVzdWJtaXNzaW9uQ291bnQ6IGRhdGEucmVzdWJtaXNzaW9uQ291bnQgfHwgMCxcbiAgICAgICAgICAgIHJlc3VibWlzc2lvbkhpc3Rvcnk6IGRhdGEucmVzdWJtaXNzaW9uSGlzdG9yeSB8fCBbXSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBwZXRpdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBub3QgZm91bmQgYW5kIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIHJldHJ5IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XG4gICAgICBpZiAocmV0cnlDb3VudCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFBldGl0aW9uIG5vdCBmb3VuZCwgcmV0cnlpbmcgaW4gMyBzZWNvbmRzLi4uJyk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApKTtcbiAgICAgICAgcmV0dXJuIGdldFBldGl0aW9uKHBldGl0aW9uSWRPclNsdWcsIDEpO1xuICAgICAgfVxuICAgICAgLy8gSWYgc3RpbGwgbm90IGZvdW5kLCB0cnkgb25lIG1vcmUgdGltZSB3aXRoIGFuIGV2ZW4gbG9uZ2VyIGRlbGF5XG4gICAgICBpZiAocmV0cnlDb3VudCA9PT0gMSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFBldGl0aW9uIHN0aWxsIG5vdCBmb3VuZCwgZmluYWwgcmV0cnkgaW4gNSBzZWNvbmRzLi4uJyk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMDApKTtcbiAgICAgICAgcmV0dXJuIGdldFBldGl0aW9uKHBldGl0aW9uSWRPclNsdWcsIDIpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ+KdjCBQZXRpdGlvbiBub3QgZm91bmQgaW4gZGF0YWJhc2UgYWZ0ZXIgYWxsIHJldHJpZXMnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfinIUgUGV0aXRpb24gZm91bmQsIHByb2Nlc3NpbmcgZGF0YS4uLicpO1xuXG4gICAgY29uc3QgZGF0YSA9IGRvY1NuYXAuZGF0YSgpO1xuXG4gICAgLy8gTGF6eSBnZW5lcmF0aW9uOiBJZiBwZXRpdGlvbiBkb2Vzbid0IGhhdmUgYSByZWZlcmVuY2UgY29kZSwgZ2VuZXJhdGUgb25lXG4gICAgbGV0IHJlZmVyZW5jZUNvZGUgPSBkYXRhLnJlZmVyZW5jZUNvZGU7XG4gICAgaWYgKCFyZWZlcmVuY2VDb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBHZW5lcmF0aW5nIHJlZmVyZW5jZSBjb2RlIGZvciBwZXRpdGlvbjonLCBkb2NTbmFwLmlkKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlZmVyZW5jZUNvZGUgPSBhd2FpdCBnZW5lcmF0ZVVuaXF1ZVJlZmVyZW5jZUNvZGUoKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwZXRpdGlvbiB3aXRoIHRoZSBuZXcgY29kZVxuICAgICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICAgICAgcmVmZXJlbmNlQ29kZSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFJlZmVyZW5jZSBjb2RlIGdlbmVyYXRlZCBhbmQgc2F2ZWQ6JywgcmVmZXJlbmNlQ29kZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGdlbmVyYXRlIHJlZmVyZW5jZSBjb2RlOicsIGVycm9yKTtcbiAgICAgICAgLy8gQ29udGludWUgd2l0aG91dCBjb2RlIC0gbm90IGNyaXRpY2FsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGV0aXRpb246IFBldGl0aW9uID0ge1xuICAgICAgaWQ6IGRvY1NuYXAuaWQsXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnksXG4gICAgICBzdWJjYXRlZ29yeTogZGF0YS5zdWJjYXRlZ29yeSxcbiAgICAgIHRhcmdldFNpZ25hdHVyZXM6IGRhdGEudGFyZ2V0U2lnbmF0dXJlcyxcbiAgICAgIGN1cnJlbnRTaWduYXR1cmVzOiBkYXRhLmN1cnJlbnRTaWduYXR1cmVzIHx8IDAsXG4gICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgY3JlYXRvcklkOiBkYXRhLmNyZWF0b3JJZCxcbiAgICAgIGNyZWF0b3JQYWdlSWQ6IGRhdGEuY3JlYXRvclBhZ2VJZCxcbiAgICAgIG1lZGlhVXJsczogZGF0YS5tZWRpYVVybHMgfHwgW10sXG4gICAgICBxckNvZGVVcmw6IGRhdGEucXJDb2RlVXJsLFxuICAgICAgaGFzUXJDb2RlOiBkYXRhLmhhc1FyQ29kZSB8fCBmYWxzZSxcbiAgICAgIHByaWNpbmdUaWVyOiBkYXRhLnByaWNpbmdUaWVyLFxuICAgICAgYW1vdW50UGFpZDogZGF0YS5hbW91bnRQYWlkIHx8IDAsXG4gICAgICBwYXltZW50U3RhdHVzOiBkYXRhLnBheW1lbnRTdGF0dXMgfHwgJ3VucGFpZCcsXG5cbiAgICAgIC8vIExvY2F0aW9uXG4gICAgICBsb2NhdGlvbjogZGF0YS5sb2NhdGlvbixcblxuICAgICAgLy8gTWV0YWRhdGFcbiAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZVxuICAgICAgICA/IGRhdGEuY3JlYXRlZEF0LnRvRGF0ZSgpXG4gICAgICAgIDogZGF0YS5jcmVhdGVkQXQgfHwgbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZVxuICAgICAgICA/IGRhdGEudXBkYXRlZEF0LnRvRGF0ZSgpXG4gICAgICAgIDogZGF0YS51cGRhdGVkQXQgfHwgbmV3IERhdGUoKSxcbiAgICAgIGFwcHJvdmVkQXQ6IGRhdGEuYXBwcm92ZWRBdD8udG9EYXRlXG4gICAgICAgID8gZGF0YS5hcHByb3ZlZEF0LnRvRGF0ZSgpXG4gICAgICAgIDogZGF0YS5hcHByb3ZlZEF0LFxuICAgICAgcGF1c2VkQXQ6IGRhdGEucGF1c2VkQXQ/LnRvRGF0ZSA/IGRhdGEucGF1c2VkQXQudG9EYXRlKCkgOiBkYXRhLnBhdXNlZEF0LFxuICAgICAgZGVsZXRlZEF0OiBkYXRhLmRlbGV0ZWRBdD8udG9EYXRlXG4gICAgICAgID8gZGF0YS5kZWxldGVkQXQudG9EYXRlKClcbiAgICAgICAgOiBkYXRhLmRlbGV0ZWRBdCxcblxuICAgICAgLy8gQW5hbHl0aWNzXG4gICAgICB2aWV3Q291bnQ6IGRhdGEudmlld0NvdW50IHx8IDAsXG4gICAgICBzaGFyZUNvdW50OiBkYXRhLnNoYXJlQ291bnQgfHwgMCxcblxuICAgICAgLy8gTW9kZXJhdGlvblxuICAgICAgbW9kZXJhdGVkQnk6IGRhdGEubW9kZXJhdGVkQnksXG4gICAgICBtb2RlcmF0aW9uTm90ZXM6IGRhdGEubW9kZXJhdGlvbk5vdGVzLFxuICAgICAgcmVzdWJtaXNzaW9uQ291bnQ6IGRhdGEucmVzdWJtaXNzaW9uQ291bnQgfHwgMCxcbiAgICAgIHJlc3VibWlzc2lvbkhpc3Rvcnk6IGRhdGEucmVzdWJtaXNzaW9uSGlzdG9yeSB8fCBbXSxcblxuICAgICAgLy8gUHVibGljIHZpc2liaWxpdHlcbiAgICAgIGlzUHVibGljOiBkYXRhLmlzUHVibGljICE9PSBmYWxzZSxcbiAgICAgIGlzQWN0aXZlOiBkYXRhLmlzQWN0aXZlICE9PSBmYWxzZSxcblxuICAgICAgLy8gUHVibGlzaGVyIGluZm9ybWF0aW9uXG4gICAgICBwdWJsaXNoZXJUeXBlOiBkYXRhLnB1Ymxpc2hlclR5cGUsXG4gICAgICBwdWJsaXNoZXJOYW1lOiBkYXRhLnB1Ymxpc2hlck5hbWUsXG5cbiAgICAgIC8vIFBldGl0aW9uIGRldGFpbHNcbiAgICAgIHBldGl0aW9uVHlwZTogZGF0YS5wZXRpdGlvblR5cGUsXG4gICAgICBhZGRyZXNzZWRUb1R5cGU6IGRhdGEuYWRkcmVzc2VkVG9UeXBlLFxuICAgICAgYWRkcmVzc2VkVG9TcGVjaWZpYzogZGF0YS5hZGRyZXNzZWRUb1NwZWNpZmljLFxuICAgICAgcmVmZXJlbmNlQ29kZSwgLy8gVXNlIHRoZSBnZW5lcmF0ZWQgb3IgZXhpc3RpbmcgY29kZVxuXG4gICAgICAvLyBBZGRpdGlvbmFsIGNvbnRlbnRcbiAgICAgIHlvdXR1YmVWaWRlb1VybDogZGF0YS55b3V0dWJlVmlkZW9VcmwsXG4gICAgICB0YWdzOiBkYXRhLnRhZ3MsXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCfinIUgUGV0aXRpb24gcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseTonLCBwZXRpdGlvbi5pZCk7XG4gICAgcmV0dXJuIHBldGl0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBnZXR0aW5nIHBldGl0aW9uOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICBwZXRpdGlvbklkT3JTbHVnLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IsXG4gICAgfSk7XG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGluc3RlYWQgb2YgdGhyb3dpbmcgdG8gYXZvaWQgYnJlYWtpbmcgdGhlIFVJXG4gIH1cbn07XG5cbi8qKlxuICogVXBkYXRlIGEgcGV0aXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVBldGl0aW9uID0gYXN5bmMgKFxuICBwZXRpdGlvbklkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8UGV0aXRpb25Gb3JtRGF0YT4sXG4gIHVzZXJJZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCwgdmVyaWZ5IHRoZSB1c2VyIG93bnMgdGhpcyBwZXRpdGlvblxuICAgIGNvbnN0IHBldGl0aW9uID0gYXdhaXQgZ2V0UGV0aXRpb24ocGV0aXRpb25JZCk7XG4gICAgaWYgKCFwZXRpdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQZXRpdGlvbiBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBpZiAocGV0aXRpb24uY3JlYXRvcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gdXBkYXRlIHRoaXMgcGV0aXRpb24nKTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGFsbG93IHVwZGF0ZXMgdG8gcGV0aXRpb25zIHRoYXQgY2FuIGJlIGVkaXRlZFxuICAgIGlmIChwZXRpdGlvbi5zdGF0dXMgIT09ICdkcmFmdCcgJiYgcGV0aXRpb24uc3RhdHVzICE9PSAncGVuZGluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHVwZGF0ZSBwZXRpdGlvbiBpbiBjdXJyZW50IHN0YXR1cycpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHVwZGF0ZXMgaWYgcHJvdmlkZWRcbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdXBkYXRlZERhdGEgPSB7IC4uLnBldGl0aW9uLCAuLi51cGRhdGVzIH07XG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGVQZXRpdGlvbkRhdGEodXBkYXRlZERhdGEpO1xuICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFZhbGlkYXRpb24gZmFpbGVkOiAke3ZhbGlkYXRpb25FcnJvcnNcbiAgICAgICAgICAgIC5tYXAoKGUpID0+IGUubWVzc2FnZSlcbiAgICAgICAgICAgIC5qb2luKCcsICcpfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFBFVElUSU9OU19DT0xMRUNUSU9OLCBwZXRpdGlvbklkKTtcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoKSksXG4gICAgfTtcblxuICAgIC8vIFJlY2FsY3VsYXRlIHByaWNpbmcgaWYgdGFyZ2V0IHNpZ25hdHVyZXMgY2hhbmdlZFxuICAgIGlmICh1cGRhdGVzLnRhcmdldFNpZ25hdHVyZXMpIHtcbiAgICAgIGNvbnN0IG5ld1ByaWNpbmdUaWVyID0gY2FsY3VsYXRlUHJpY2luZ1RpZXIodXBkYXRlcy50YXJnZXRTaWduYXR1cmVzKTtcbiAgICAgIGNvbnN0IG5ld0Ftb3VudCA9IGNhbGN1bGF0ZVBldGl0aW9uUHJpY2UodXBkYXRlcy50YXJnZXRTaWduYXR1cmVzKTtcblxuICAgICAgdXBkYXRlRGF0YS5wcmljaW5nVGllciA9IG5ld1ByaWNpbmdUaWVyO1xuXG4gICAgICAvLyBJZiBhbW91bnQgY2hhbmdlZCBhbmQgbm90IHlldCBwYWlkLCB1cGRhdGUgcGF5bWVudCBzdGF0dXNcbiAgICAgIGlmIChcbiAgICAgICAgbmV3QW1vdW50ICE9PSBwZXRpdGlvbi5hbW91bnRQYWlkICYmXG4gICAgICAgIHBldGl0aW9uLnBheW1lbnRTdGF0dXMgPT09ICd1bnBhaWQnXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YS5wYXltZW50U3RhdHVzID0gbmV3QW1vdW50ID4gMCA/ICd1bnBhaWQnIDogJ3BhaWQnO1xuICAgICAgICB1cGRhdGVEYXRhLnN0YXR1cyA9IG5ld0Ftb3VudCA+IDAgPyAnZHJhZnQnIDogJ3BlbmRpbmcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHVwZGF0ZURhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHBldGl0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgcGV0aXRpb24uIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVsZXRlIGEgcGV0aXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBldGl0aW9uID0gYXN5bmMgKFxuICBwZXRpdGlvbklkOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCwgdmVyaWZ5IHRoZSB1c2VyIG93bnMgdGhpcyBwZXRpdGlvblxuICAgIGNvbnN0IHBldGl0aW9uID0gYXdhaXQgZ2V0UGV0aXRpb24ocGV0aXRpb25JZCk7XG4gICAgaWYgKCFwZXRpdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQZXRpdGlvbiBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBpZiAocGV0aXRpb24uY3JlYXRvcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZGVsZXRlIHRoaXMgcGV0aXRpb24nKTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGFsbG93IGRlbGV0aW9uIG9mIGRyYWZ0IG9yIHBlbmRpbmcgcGV0aXRpb25zXG4gICAgaWYgKHBldGl0aW9uLnN0YXR1cyAhPT0gJ2RyYWZ0JyAmJiBwZXRpdGlvbi5zdGF0dXMgIT09ICdwZW5kaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZGVsZXRlIHBldGl0aW9uIGluIGN1cnJlbnQgc3RhdHVzJyk7XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIGFzc29jaWF0ZWQgZmlsZXMgaWYgdGhleSBleGlzdFxuICAgIGlmIChwZXRpdGlvbi5tZWRpYVVybHMgJiYgcGV0aXRpb24ubWVkaWFVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlbGV0ZVByb21pc2VzID0gcGV0aXRpb24ubWVkaWFVcmxzLm1hcCgodXJsKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWVkaWFSZWYgPSByZWYoc3RvcmFnZSwgdXJsKTtcbiAgICAgICAgICByZXR1cm4gZGVsZXRlT2JqZWN0KG1lZGlhUmVmKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGRlbGV0ZVByb21pc2VzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGRlbGV0ZSBwZXRpdGlvbiBtZWRpYTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBldGl0aW9uLnFyQ29kZVVybCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcXJSZWYgPSByZWYoc3RvcmFnZSwgcGV0aXRpb24ucXJDb2RlVXJsKTtcbiAgICAgICAgYXdhaXQgZGVsZXRlT2JqZWN0KHFyUmVmKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGRlbGV0ZSBwZXRpdGlvbiBRUiBjb2RlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWxldGUgdGhlIHBldGl0aW9uIGRvY3VtZW50XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBQRVRJVElPTlNfQ09MTEVDVElPTiwgcGV0aXRpb25JZCk7XG4gICAgYXdhaXQgZGVsZXRlRG9jKGRvY1JlZik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcGV0aXRpb246JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBwZXRpdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTaWduIGEgcGV0aXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHNpZ25QZXRpdGlvbiA9IGFzeW5jIChcbiAgcGV0aXRpb25JZDogc3RyaW5nLFxuICBzaWduZXJEYXRhOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHBob25lOiBzdHJpbmc7XG4gICAgbG9jYXRpb24/OiB7IGNvdW50cnk6IHN0cmluZzsgY2l0eT86IHN0cmluZyB9O1xuICAgIGNvbW1lbnQ/OiBzdHJpbmc7XG4gICAgaXNBbm9ueW1vdXM/OiBib29sZWFuO1xuICB9LFxuICB1c2VySWQ/OiBzdHJpbmcsXG4gIGlwQWRkcmVzczogc3RyaW5nID0gJycsXG4gIHVzZXJBZ2VudDogc3RyaW5nID0gJydcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4gIHRyeSB7XG4gICAgLy8gR2V0IHBldGl0aW9uIHRvIHZlcmlmeSBpdCBjYW4gYmUgc2lnbmVkXG4gICAgY29uc3QgcGV0aXRpb24gPSBhd2FpdCBnZXRQZXRpdGlvbihwZXRpdGlvbklkKTtcbiAgICBpZiAoIXBldGl0aW9uKSB7XG4gICAgICBhd2FpdCB0cmFja1NpZ25hdHVyZUF0dGVtcHQoe1xuICAgICAgICBwZXRpdGlvbklkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudCxcbiAgICAgICAgcGhvbmVOdW1iZXI6IHNpZ25lckRhdGEucGhvbmUsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHJlYXNvbjogJ1BldGl0aW9uIG5vdCBmb3VuZCcsXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGV0aXRpb24gbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgaWYgKHBldGl0aW9uLnN0YXR1cyAhPT0gJ2FwcHJvdmVkJykge1xuICAgICAgYXdhaXQgdHJhY2tTaWduYXR1cmVBdHRlbXB0KHtcbiAgICAgICAgcGV0aXRpb25JZCxcbiAgICAgICAgaXBBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQsXG4gICAgICAgIHBob25lTnVtYmVyOiBzaWduZXJEYXRhLnBob25lLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICByZWFzb246ICdQZXRpdGlvbiBub3QgYXBwcm92ZWQnLFxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgcGV0aXRpb24gaXMgbm90IGF2YWlsYWJsZSBmb3Igc2lnbmluZycpO1xuICAgIH1cblxuICAgIGlmIChwZXRpdGlvbi5jdXJyZW50U2lnbmF0dXJlcyA+PSBwZXRpdGlvbi50YXJnZXRTaWduYXR1cmVzKSB7XG4gICAgICBhd2FpdCB0cmFja1NpZ25hdHVyZUF0dGVtcHQoe1xuICAgICAgICBwZXRpdGlvbklkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudCxcbiAgICAgICAgcGhvbmVOdW1iZXI6IHNpZ25lckRhdGEucGhvbmUsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHJlYXNvbjogJ1RhcmdldCByZWFjaGVkJyxcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIHBldGl0aW9uIGhhcyByZWFjaGVkIGl0cyBzaWduYXR1cmUgZ29hbCcpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHNpZ25hdHVyZSBhdXRoZW50aWNpdHkgYW5kIHNlY3VyaXR5XG4gICAgY29uc3Qgc2VjdXJpdHlDaGVjayA9IGF3YWl0IHZhbGlkYXRlU2lnbmF0dXJlQXV0aGVudGljaXR5KFxuICAgICAgcGV0aXRpb25JZCxcbiAgICAgIHNpZ25lckRhdGEucGhvbmUsXG4gICAgICBpcEFkZHJlc3MsXG4gICAgICB1c2VyQWdlbnRcbiAgICApO1xuXG4gICAgaWYgKCFzZWN1cml0eUNoZWNrLnZhbGlkKSB7XG4gICAgICBhd2FpdCB0cmFja1NpZ25hdHVyZUF0dGVtcHQoe1xuICAgICAgICBwZXRpdGlvbklkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudCxcbiAgICAgICAgcGhvbmVOdW1iZXI6IHNpZ25lckRhdGEucGhvbmUsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHJlYXNvbjogc2VjdXJpdHlDaGVjay5yZWFzb24sXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihzZWN1cml0eUNoZWNrLnJlYXNvbiB8fCAnU2VjdXJpdHkgdmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICB9XG5cbiAgICAvLyBNb2RlcmF0ZSBjb21tZW50IGlmIHByb3ZpZGVkXG4gICAgaWYgKHNpZ25lckRhdGEuY29tbWVudCkge1xuICAgICAgY29uc3QgbW9kZXJhdGlvblJlc3VsdCA9IG1vZGVyYXRlQ29tbWVudChzaWduZXJEYXRhLmNvbW1lbnQpO1xuICAgICAgaWYgKCFtb2RlcmF0aW9uUmVzdWx0LmFwcHJvdmVkKSB7XG4gICAgICAgIGF3YWl0IHRyYWNrU2lnbmF0dXJlQXR0ZW1wdCh7XG4gICAgICAgICAgcGV0aXRpb25JZCxcbiAgICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgICAgdXNlckFnZW50LFxuICAgICAgICAgIHBob25lTnVtYmVyOiBzaWduZXJEYXRhLnBob25lLFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICByZWFzb246IGBDb21tZW50IG1vZGVyYXRpb24gZmFpbGVkOiAke21vZGVyYXRpb25SZXN1bHQucmVhc29ucy5qb2luKFxuICAgICAgICAgICAgJywgJ1xuICAgICAgICAgICl9YCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnWW91ciBjb21tZW50IGNvbnRhaW5zIGluYXBwcm9wcmlhdGUgY29udGVudC4gUGxlYXNlIHJldmlzZSBhbmQgdHJ5IGFnYWluLidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgc2lnbmVkIChpZiB1c2VySWQgcHJvdmlkZWQpXG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgY29uc3QgZXhpc3RpbmdTaWduYXR1cmUgPSBhd2FpdCBjaGVja0V4aXN0aW5nU2lnbmF0dXJlKFxuICAgICAgICBwZXRpdGlvbklkLFxuICAgICAgICB1c2VySWRcbiAgICAgICk7XG4gICAgICBpZiAoZXhpc3RpbmdTaWduYXR1cmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgaGF2ZSBhbHJlYWR5IHNpZ25lZCB0aGlzIHBldGl0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBwaG9uZSBudW1iZXJcbiAgICBjb25zdCBwaG9uZVNpZ25hdHVyZSA9IGF3YWl0IGNoZWNrUGhvbmVTaWduYXR1cmUoXG4gICAgICBwZXRpdGlvbklkLFxuICAgICAgc2lnbmVyRGF0YS5waG9uZVxuICAgICk7XG4gICAgaWYgKHBob25lU2lnbmF0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGlzIHBob25lIG51bWJlciBoYXMgYWxyZWFkeSBiZWVuIHVzZWQgdG8gc2lnbiB0aGlzIHBldGl0aW9uJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgc2lnbmF0dXJlIHdpdGggc2VjdXJpdHkgZmluZ2VycHJpbnRcbiAgICBjb25zdCBzaWduYXR1cmVGaW5nZXJwcmludCA9IGdlbmVyYXRlU2lnbmF0dXJlRmluZ2VycHJpbnQoXG4gICAgICBzaWduZXJEYXRhLnBob25lLFxuICAgICAgaXBBZGRyZXNzLFxuICAgICAgdXNlckFnZW50LFxuICAgICAgbm93XG4gICAgKTtcblxuICAgIGNvbnN0IHNpZ25hdHVyZURhdGE6IGFueSA9IHtcbiAgICAgIHBldGl0aW9uSWQsXG4gICAgICBzaWduZXJOYW1lOiBzaWduZXJEYXRhLmlzQW5vbnltb3VzID8gJ0Fub255bW91cycgOiBzaWduZXJEYXRhLm5hbWUsXG4gICAgICBzaWduZXJQaG9uZTogc2lnbmVyRGF0YS5waG9uZSxcbiAgICAgIHNpZ25lckxvY2F0aW9uOiBzaWduZXJEYXRhLmxvY2F0aW9uLFxuICAgICAgdmVyaWZpY2F0aW9uTWV0aG9kOiAncGhvbmVfb3RwJyBhcyBjb25zdCxcbiAgICAgIHZlcmlmaWVkQXQ6IG5vdyxcbiAgICAgIGlwQWRkcmVzcyxcbiAgICAgIHVzZXJBZ2VudCxcbiAgICAgIGZpbmdlcnByaW50OiBzaWduYXR1cmVGaW5nZXJwcmludCxcbiAgICAgIGlzQW5vbnltb3VzOiBzaWduZXJEYXRhLmlzQW5vbnltb3VzIHx8IGZhbHNlLFxuICAgICAgY29tbWVudDogc2lnbmVyRGF0YS5jb21tZW50LFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgfTtcblxuICAgIC8vIEFkZCB1c2VySWQgaWYgcHJvdmlkZWRcbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBzaWduYXR1cmVEYXRhLnVzZXJJZCA9IHVzZXJJZDtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2lnbmF0dXJlIHRvIGNvbGxlY3Rpb25cbiAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgU0lHTkFUVVJFU19DT0xMRUNUSU9OKSwge1xuICAgICAgLi4uc2lnbmF0dXJlRGF0YSxcbiAgICAgIHZlcmlmaWVkQXQ6IFRpbWVzdGFtcC5mcm9tRGF0ZShzaWduYXR1cmVEYXRhLnZlcmlmaWVkQXQpLFxuICAgICAgY3JlYXRlZEF0OiBUaW1lc3RhbXAuZnJvbURhdGUoc2lnbmF0dXJlRGF0YS5jcmVhdGVkQXQpLFxuICAgIH0pO1xuXG4gICAgLy8gSW5jcmVtZW50IHBldGl0aW9uIHNpZ25hdHVyZSBjb3VudFxuICAgIGNvbnN0IHBldGl0aW9uUmVmID0gZG9jKGRiLCBQRVRJVElPTlNfQ09MTEVDVElPTiwgcGV0aXRpb25JZCk7XG4gICAgYXdhaXQgdXBkYXRlRG9jKHBldGl0aW9uUmVmLCB7XG4gICAgICBjdXJyZW50U2lnbmF0dXJlczogaW5jcmVtZW50KDEpLFxuICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoKSksXG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayBmb3IgbWlsZXN0b25lIG5vdGlmaWNhdGlvbnNcbiAgICBjb25zdCBuZXdTaWduYXR1cmVDb3VudCA9IHBldGl0aW9uLmN1cnJlbnRTaWduYXR1cmVzICsgMTtcbiAgICBjb25zdCBwcm9ncmVzcyA9IChuZXdTaWduYXR1cmVDb3VudCAvIHBldGl0aW9uLnRhcmdldFNpZ25hdHVyZXMpICogMTAwO1xuICAgIGNvbnN0IG1pbGVzdG9uZXMgPSBbMjUsIDUwLCA3NSwgMTAwXTtcblxuICAgIGZvciAoY29uc3QgbWlsZXN0b25lIG9mIG1pbGVzdG9uZXMpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzUHJvZ3Jlc3MgPVxuICAgICAgICAocGV0aXRpb24uY3VycmVudFNpZ25hdHVyZXMgLyBwZXRpdGlvbi50YXJnZXRTaWduYXR1cmVzKSAqIDEwMDtcbiAgICAgIGlmIChwcm9ncmVzcyA+PSBtaWxlc3RvbmUgJiYgcHJldmlvdXNQcm9ncmVzcyA8IG1pbGVzdG9uZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IG5vdGlmeVNpZ25hdHVyZU1pbGVzdG9uZShcbiAgICAgICAgICAgIHBldGl0aW9uSWQsXG4gICAgICAgICAgICBwZXRpdGlvbi5jcmVhdG9ySWQsXG4gICAgICAgICAgICBwZXRpdGlvbi50aXRsZSxcbiAgICAgICAgICAgIG5ld1NpZ25hdHVyZUNvdW50LFxuICAgICAgICAgICAgbWlsZXN0b25lXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAobm90aWZpY2F0aW9uRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgJ0Vycm9yIHNlbmRpbmcgbWlsZXN0b25lIG5vdGlmaWNhdGlvbjonLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uRXJyb3JcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIERvbid0IGZhaWwgdGhlIHNpZ25hdHVyZSBwcm9jZXNzIGlmIG5vdGlmaWNhdGlvbiBmYWlsc1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrOyAvLyBPbmx5IHNlbmQgb25lIG1pbGVzdG9uZSBub3RpZmljYXRpb24gcGVyIHNpZ25hdHVyZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyYWNrIHN1Y2Nlc3NmdWwgc2lnbmF0dXJlIGF0dGVtcHRcbiAgICBhd2FpdCB0cmFja1NpZ25hdHVyZUF0dGVtcHQoe1xuICAgICAgcGV0aXRpb25JZCxcbiAgICAgIGlwQWRkcmVzcyxcbiAgICAgIHVzZXJBZ2VudCxcbiAgICAgIHBob25lTnVtYmVyOiBzaWduZXJEYXRhLnBob25lLFxuICAgICAgdXNlcklkLFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzaWduaW5nIHBldGl0aW9uOicsIGVycm9yKTtcblxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcblxuICAgIC8vIFRyYWNrIGZhaWxlZCBhdHRlbXB0IGlmIG5vdCBhbHJlYWR5IHRyYWNrZWRcbiAgICBpZiAoXG4gICAgICAhZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdhbHJlYWR5IGJlZW4gdXNlZCcpICYmXG4gICAgICAhZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdUb28gbWFueSBzaWduYXR1cmVzJykgJiZcbiAgICAgICFlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2luYXBwcm9wcmlhdGUgY29udGVudCcpXG4gICAgKSB7XG4gICAgICBhd2FpdCB0cmFja1NpZ25hdHVyZUF0dGVtcHQoe1xuICAgICAgICBwZXRpdGlvbklkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudCxcbiAgICAgICAgcGhvbmVOdW1iZXI6IHNpZ25lckRhdGEucGhvbmUsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHJlYXNvbjogZXJyb3JNZXNzYWdlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2lnbiBwZXRpdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGFscmVhZHkgc2lnbmVkIHBldGl0aW9uXG4gKi9cbmNvbnN0IGNoZWNrRXhpc3RpbmdTaWduYXR1cmUgPSBhc3luYyAoXG4gIHBldGl0aW9uSWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZGIsIFNJR05BVFVSRVNfQ09MTEVDVElPTiksXG4gICAgICB3aGVyZSgncGV0aXRpb25JZCcsICc9PScsIHBldGl0aW9uSWQpLFxuICAgICAgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCksXG4gICAgICBsaW1pdCgxKVxuICAgICk7XG5cbiAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICByZXR1cm4gIXF1ZXJ5U25hcHNob3QuZW1wdHk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgZXhpc3Rpbmcgc2lnbmF0dXJlOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgcGhvbmUgbnVtYmVyIGFscmVhZHkgdXNlZCBmb3IgcGV0aXRpb25cbiAqL1xuY29uc3QgY2hlY2tQaG9uZVNpZ25hdHVyZSA9IGFzeW5jIChcbiAgcGV0aXRpb25JZDogc3RyaW5nLFxuICBwaG9uZTogc3RyaW5nXG4pOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGRiLCBTSUdOQVRVUkVTX0NPTExFQ1RJT04pLFxuICAgICAgd2hlcmUoJ3BldGl0aW9uSWQnLCAnPT0nLCBwZXRpdGlvbklkKSxcbiAgICAgIHdoZXJlKCdzaWduZXJQaG9uZScsICc9PScsIHBob25lKSxcbiAgICAgIGxpbWl0KDEpXG4gICAgKTtcblxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIHJldHVybiAhcXVlcnlTbmFwc2hvdC5lbXB0eTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBwaG9uZSBzaWduYXR1cmU6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgcGV0aXRpb25zIHdpdGggZmlsdGVyaW5nIGFuZCBwYWdpbmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRQZXRpdGlvbnMgPSBhc3luYyAoXG4gIGZpbHRlcnM6IFBldGl0aW9uRmlsdGVycyA9IHt9LFxuICBwYWdpbmF0aW9uOiBQYWdpbmF0aW9uSW5mbyA9IHsgcGFnZTogMSwgbGltaXQ6IDEyLCB0b3RhbDogMCwgaGFzTW9yZTogZmFsc2UgfVxuKTogUHJvbWlzZTx7IHBldGl0aW9uczogUGV0aXRpb25bXTsgcGFnaW5hdGlvbjogUGFnaW5hdGlvbkluZm8gfT4gPT4ge1xuICB0cnkge1xuICAgIGxldCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgUEVUSVRJT05TX0NPTExFQ1RJT04pKTtcblxuICAgIC8vIEFwcGx5IGZpbHRlcnNcbiAgICBpZiAoZmlsdGVycy5zdGF0dXMpIHtcbiAgICAgIHEgPSBxdWVyeShxLCB3aGVyZSgnc3RhdHVzJywgJz09JywgZmlsdGVycy5zdGF0dXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVmYXVsdCB0byBhcHByb3ZlZCBwZXRpdGlvbnMgZm9yIHB1YmxpYyB2aWV3aW5nXG4gICAgICBxID0gcXVlcnkocSwgd2hlcmUoJ3N0YXR1cycsICc9PScsICdhcHByb3ZlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy5jYXRlZ29yeSkge1xuICAgICAgcSA9IHF1ZXJ5KHEsIHdoZXJlKCdjYXRlZ29yeScsICc9PScsIGZpbHRlcnMuY2F0ZWdvcnkpKTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSBzb3J0aW5nXG4gICAgY29uc3Qgc29ydEZpZWxkID1cbiAgICAgIGZpbHRlcnMuc29ydEJ5ID09PSAncG9wdWxhcidcbiAgICAgICAgPyAnY3VycmVudFNpZ25hdHVyZXMnXG4gICAgICAgIDogZmlsdGVycy5zb3J0QnkgPT09ICdzaWduYXR1cmVzJ1xuICAgICAgICAgID8gJ2N1cnJlbnRTaWduYXR1cmVzJ1xuICAgICAgICAgIDogJ2NyZWF0ZWRBdCc7XG4gICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IGZpbHRlcnMuc29ydE9yZGVyIHx8ICdkZXNjJztcbiAgICBxID0gcXVlcnkocSwgb3JkZXJCeShzb3J0RmllbGQsIHNvcnREaXJlY3Rpb24pKTtcblxuICAgIC8vIEFwcGx5IHBhZ2luYXRpb25cbiAgICBpZiAocGFnaW5hdGlvbi5saW1pdCkge1xuICAgICAgcSA9IHF1ZXJ5KHEsIGxpbWl0KHBhZ2luYXRpb24ubGltaXQgKyAxKSk7IC8vIEdldCBvbmUgZXh0cmEgdG8gY2hlY2sgaWYgdGhlcmUgYXJlIG1vcmVcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBjb25zdCBwZXRpdGlvbnM6IFBldGl0aW9uW10gPSBbXTtcblxuICAgIGNvbnN0IGRvY3MgPSBxdWVyeVNuYXBzaG90LmRvY3M7XG4gICAgZG9jcy5mb3JFYWNoKChkb2MsIGluZGV4KSA9PiB7XG4gICAgICAvLyBTa2lwIHRoZSBleHRyYSBkb2N1bWVudCB1c2VkIGZvciBwYWdpbmF0aW9uIGNoZWNrXG4gICAgICBpZiAocGFnaW5hdGlvbi5saW1pdCAmJiBpbmRleCA+PSBwYWdpbmF0aW9uLmxpbWl0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICBwZXRpdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnksXG4gICAgICAgIHN1YmNhdGVnb3J5OiBkYXRhLnN1YmNhdGVnb3J5LFxuICAgICAgICB0YXJnZXRTaWduYXR1cmVzOiBkYXRhLnRhcmdldFNpZ25hdHVyZXMsXG4gICAgICAgIGN1cnJlbnRTaWduYXR1cmVzOiBkYXRhLmN1cnJlbnRTaWduYXR1cmVzIHx8IDAsXG4gICAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMsXG4gICAgICAgIGNyZWF0b3JJZDogZGF0YS5jcmVhdG9ySWQsXG4gICAgICAgIGNyZWF0b3JQYWdlSWQ6IGRhdGEuY3JlYXRvclBhZ2VJZCxcbiAgICAgICAgbWVkaWFVcmxzOiBkYXRhLm1lZGlhVXJscyB8fCBbXSxcbiAgICAgICAgcXJDb2RlVXJsOiBkYXRhLnFyQ29kZVVybCxcbiAgICAgICAgaGFzUXJDb2RlOiBkYXRhLmhhc1FyQ29kZSB8fCBmYWxzZSxcbiAgICAgICAgcHJpY2luZ1RpZXI6IGRhdGEucHJpY2luZ1RpZXIsXG4gICAgICAgIGFtb3VudFBhaWQ6IGRhdGEuYW1vdW50UGFpZCB8fCAwLFxuICAgICAgICBwYXltZW50U3RhdHVzOiBkYXRhLnBheW1lbnRTdGF0dXMgfHwgJ3VucGFpZCcsXG5cbiAgICAgICAgLy8gTG9jYXRpb25cbiAgICAgICAgbG9jYXRpb246IGRhdGEubG9jYXRpb24sXG5cbiAgICAgICAgLy8gTWV0YWRhdGFcbiAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBkYXRhLnVwZGF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgYXBwcm92ZWRBdDogZGF0YS5hcHByb3ZlZEF0Py50b0RhdGUoKSxcbiAgICAgICAgcGF1c2VkQXQ6IGRhdGEucGF1c2VkQXQ/LnRvRGF0ZSgpLFxuICAgICAgICBkZWxldGVkQXQ6IGRhdGEuZGVsZXRlZEF0Py50b0RhdGUoKSxcblxuICAgICAgICAvLyBBbmFseXRpY3NcbiAgICAgICAgdmlld0NvdW50OiBkYXRhLnZpZXdDb3VudCB8fCAwLFxuICAgICAgICBzaGFyZUNvdW50OiBkYXRhLnNoYXJlQ291bnQgfHwgMCxcblxuICAgICAgICAvLyBNb2RlcmF0aW9uXG4gICAgICAgIG1vZGVyYXRlZEJ5OiBkYXRhLm1vZGVyYXRlZEJ5LFxuICAgICAgICBtb2RlcmF0aW9uTm90ZXM6IGRhdGEubW9kZXJhdGlvbk5vdGVzLFxuXG4gICAgICAgIC8vIFB1YmxpYyB2aXNpYmlsaXR5XG4gICAgICAgIGlzUHVibGljOiBkYXRhLmlzUHVibGljICE9PSBmYWxzZSxcbiAgICAgICAgaXNBY3RpdmU6IGRhdGEuaXNBY3RpdmUgIT09IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBBcHBseSBjbGllbnQtc2lkZSBmaWx0ZXJzIGZvciBjb21wbGV4IHF1ZXJpZXNcbiAgICBsZXQgZmlsdGVyZWRQZXRpdGlvbnMgPSBwZXRpdGlvbnM7XG5cbiAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHtcbiAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBmaWx0ZXJzLnNlYXJjaC50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWRQZXRpdGlvbnMgPSBwZXRpdGlvbnMuZmlsdGVyKFxuICAgICAgICAocGV0aXRpb24pID0+XG4gICAgICAgICAgcGV0aXRpb24udGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fFxuICAgICAgICAgIHBldGl0aW9uLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlcnMubG9jYXRpb24pIHtcbiAgICAgIGZpbHRlcmVkUGV0aXRpb25zID0gZmlsdGVyZWRQZXRpdGlvbnMuZmlsdGVyKFxuICAgICAgICAocGV0aXRpb24pID0+XG4gICAgICAgICAgcGV0aXRpb24ubG9jYXRpb24/LmNvdW50cnkgPT09IGZpbHRlcnMubG9jYXRpb24gfHxcbiAgICAgICAgICBwZXRpdGlvbi5sb2NhdGlvbj8uY2l0eSA9PT0gZmlsdGVycy5sb2NhdGlvblxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdpbmF0aW9uSW5mbzogUGFnaW5hdGlvbkluZm8gPSB7XG4gICAgICBwYWdlOiBwYWdpbmF0aW9uLnBhZ2UgfHwgMSxcbiAgICAgIGxpbWl0OiBwYWdpbmF0aW9uLmxpbWl0IHx8IDEyLFxuICAgICAgdG90YWw6IGZpbHRlcmVkUGV0aXRpb25zLmxlbmd0aCxcbiAgICAgIGhhc01vcmU6IGZpbHRlcmVkUGV0aXRpb25zLmxlbmd0aCA9PT0gcGFnaW5hdGlvbi5saW1pdCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBldGl0aW9uczogZmlsdGVyZWRQZXRpdGlvbnMsXG4gICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uSW5mbyxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcGV0aXRpb25zOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHBldGl0aW9ucy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgcGV0aXRpb25zIGJ5IHVzZXIgSURcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFVzZXJQZXRpdGlvbnMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFBldGl0aW9uW10+ID0+IHtcbiAgdHJ5IHtcbiAgICBsZXQgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgUEVUSVRJT05TX0NPTExFQ1RJT04pLFxuICAgICAgd2hlcmUoJ2NyZWF0b3JJZCcsICc9PScsIHVzZXJJZCksXG4gICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpXG4gICAgKTtcblxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIGNvbnN0IHBldGl0aW9uczogUGV0aXRpb25bXSA9IFtdO1xuXG4gICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgcGV0aXRpb25zLnB1c2goe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxuICAgICAgICBzdWJjYXRlZ29yeTogZGF0YS5zdWJjYXRlZ29yeSxcbiAgICAgICAgdGFyZ2V0U2lnbmF0dXJlczogZGF0YS50YXJnZXRTaWduYXR1cmVzLFxuICAgICAgICBjdXJyZW50U2lnbmF0dXJlczogZGF0YS5jdXJyZW50U2lnbmF0dXJlcyB8fCAwLFxuICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICBjcmVhdG9ySWQ6IGRhdGEuY3JlYXRvcklkLFxuICAgICAgICBjcmVhdG9yUGFnZUlkOiBkYXRhLmNyZWF0b3JQYWdlSWQsXG4gICAgICAgIG1lZGlhVXJsczogZGF0YS5tZWRpYVVybHMgfHwgW10sXG4gICAgICAgIHFyQ29kZVVybDogZGF0YS5xckNvZGVVcmwsXG4gICAgICAgIGhhc1FyQ29kZTogZGF0YS5oYXNRckNvZGUgfHwgZmFsc2UsXG4gICAgICAgIHByaWNpbmdUaWVyOiBkYXRhLnByaWNpbmdUaWVyLFxuICAgICAgICBhbW91bnRQYWlkOiBkYXRhLmFtb3VudFBhaWQgfHwgMCxcbiAgICAgICAgcGF5bWVudFN0YXR1czogZGF0YS5wYXltZW50U3RhdHVzIHx8ICd1bnBhaWQnLFxuXG4gICAgICAgIC8vIExvY2F0aW9uXG4gICAgICAgIGxvY2F0aW9uOiBkYXRhLmxvY2F0aW9uLFxuXG4gICAgICAgIC8vIE1ldGFkYXRhXG4gICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIGFwcHJvdmVkQXQ6IGRhdGEuYXBwcm92ZWRBdD8udG9EYXRlKCksXG4gICAgICAgIHBhdXNlZEF0OiBkYXRhLnBhdXNlZEF0Py50b0RhdGUoKSxcbiAgICAgICAgZGVsZXRlZEF0OiBkYXRhLmRlbGV0ZWRBdD8udG9EYXRlKCksXG5cbiAgICAgICAgLy8gQW5hbHl0aWNzXG4gICAgICAgIHZpZXdDb3VudDogZGF0YS52aWV3Q291bnQgfHwgMCxcbiAgICAgICAgc2hhcmVDb3VudDogZGF0YS5zaGFyZUNvdW50IHx8IDAsXG5cbiAgICAgICAgLy8gTW9kZXJhdGlvblxuICAgICAgICBtb2RlcmF0ZWRCeTogZGF0YS5tb2RlcmF0ZWRCeSxcbiAgICAgICAgbW9kZXJhdGlvbk5vdGVzOiBkYXRhLm1vZGVyYXRpb25Ob3RlcyxcblxuICAgICAgICAvLyBQdWJsaWMgdmlzaWJpbGl0eVxuICAgICAgICBpc1B1YmxpYzogZGF0YS5pc1B1YmxpYyAhPT0gZmFsc2UsXG4gICAgICAgIGlzQWN0aXZlOiBkYXRhLmlzQWN0aXZlICE9PSBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBldGl0aW9ucztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgcGV0aXRpb25zOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHlvdXIgcGV0aXRpb25zLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICB9XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBwZXRpdGlvbiBzdGF0dXMgKGFkbWluL21vZGVyYXRvciBvbmx5KVxuICovXG5leHBvcnQgY29uc3QgdXBkYXRlUGV0aXRpb25TdGF0dXMgPSBhc3luYyAoXG4gIHBldGl0aW9uSWQ6IHN0cmluZyxcbiAgc3RhdHVzOiBQZXRpdGlvblsnc3RhdHVzJ10sXG4gIG1vZGVyYXRvcklkOiBzdHJpbmcsXG4gIG5vdGVzPzogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgcGV0aXRpb24gZGV0YWlscyBmb3IgYXVkaXQgbG9nXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBQRVRJVElPTlNfQ09MTEVDVElPTiwgcGV0aXRpb25JZCk7XG4gICAgY29uc3QgcGV0aXRpb25TbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgY29uc3QgcGV0aXRpb24gPSBwZXRpdGlvblNuYXAuZGF0YSgpIGFzIFBldGl0aW9uO1xuICAgIGNvbnN0IG9sZFN0YXR1cyA9IHBldGl0aW9uPy5zdGF0dXM7XG5cbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICBzdGF0dXMsXG4gICAgICBtb2RlcmF0ZWRCeTogbW9kZXJhdG9ySWQsXG4gICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5mcm9tRGF0ZShuZXcgRGF0ZSgpKSxcbiAgICB9O1xuXG4gICAgaWYgKG5vdGVzKSB7XG4gICAgICB1cGRhdGVEYXRhLm1vZGVyYXRpb25Ob3RlcyA9IG5vdGVzO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09ICdhcHByb3ZlZCcpIHtcbiAgICAgIHVwZGF0ZURhdGEuYXBwcm92ZWRBdCA9IFRpbWVzdGFtcC5mcm9tRGF0ZShuZXcgRGF0ZSgpKTtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3BhdXNlZCcpIHtcbiAgICAgIHVwZGF0ZURhdGEucGF1c2VkQXQgPSBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoKSk7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdkZWxldGVkJykge1xuICAgICAgdXBkYXRlRGF0YS5kZWxldGVkQXQgPSBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoKSk7XG4gICAgICB1cGRhdGVEYXRhLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwgdXBkYXRlRGF0YSk7XG5cbiAgICAvLyBMb2cgdGhlIGFjdGlvbiAoYXN5bmMsIHdvbid0IGJsb2NrKVxuICAgIGNvbnN0IG1vZGVyYXRvciA9IGF3YWl0IGdldFVzZXJCeUlkKG1vZGVyYXRvcklkKTtcbiAgICBjb25zdCBhY3Rpb25NYXA6IFJlY29yZDxzdHJpbmcsIEF1ZGl0QWN0aW9uPiA9IHtcbiAgICAgIGFwcHJvdmVkOiAncGV0aXRpb24uYXBwcm92ZWQnLFxuICAgICAgcmVqZWN0ZWQ6ICdwZXRpdGlvbi5yZWplY3RlZCcsXG4gICAgICBwYXVzZWQ6ICdwZXRpdGlvbi5wYXVzZWQnLFxuICAgICAgZGVsZXRlZDogJ3BldGl0aW9uLmRlbGV0ZWQnLFxuICAgICAgYXJjaGl2ZWQ6ICdwZXRpdGlvbi5hcmNoaXZlZCcsXG4gICAgfTtcblxuICAgIGlmIChhY3Rpb25NYXBbc3RhdHVzXSkge1xuICAgICAgbG9nQXVkaXRBY3Rpb24oe1xuICAgICAgICBhY3RvcklkOiBtb2RlcmF0b3JJZCxcbiAgICAgICAgYWN0b3JOYW1lOiBtb2RlcmF0b3I/Lm5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICBhY3RvckVtYWlsOiBtb2RlcmF0b3I/LmVtYWlsIHx8ICcnLFxuICAgICAgICBhY3RvclJvbGU6IChtb2RlcmF0b3I/LnJvbGUgYXMgJ2FkbWluJyB8ICdtb2RlcmF0b3InKSB8fCAnbW9kZXJhdG9yJyxcbiAgICAgICAgYWN0aW9uOiBhY3Rpb25NYXBbc3RhdHVzXSxcbiAgICAgICAgdGFyZ2V0VHlwZTogJ3BldGl0aW9uJyxcbiAgICAgICAgdGFyZ2V0SWQ6IHBldGl0aW9uSWQsXG4gICAgICAgIHRhcmdldE5hbWU6IHBldGl0aW9uPy50aXRsZSxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIG9sZFZhbHVlOiBvbGRTdGF0dXMsXG4gICAgICAgICAgbmV3VmFsdWU6IHN0YXR1cyxcbiAgICAgICAgICByZWFzb246IG5vdGVzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHBldGl0aW9uIHN0YXR1czonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHBldGl0aW9uIHN0YXR1cy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbmNyZW1lbnQgcGV0aXRpb24gdmlldyBjb3VudFxuICovXG5leHBvcnQgY29uc3QgaW5jcmVtZW50UGV0aXRpb25WaWV3cyA9IGFzeW5jIChcbiAgcGV0aXRpb25JZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFBFVElUSU9OU19DT0xMRUNUSU9OLCBwZXRpdGlvbklkKTtcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICB2aWV3Q291bnQ6IGluY3JlbWVudCgxKSxcbiAgICAgIHVwZGF0ZWRBdDogVGltZXN0YW1wLmZyb21EYXRlKG5ldyBEYXRlKCkpLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluY3JlbWVudGluZyBwZXRpdGlvbiB2aWV3czonLCBlcnJvcik7XG4gICAgLy8gRG9uJ3QgdGhyb3cgZXJyb3IgZm9yIGFuYWx5dGljcyAtIGl0J3Mgbm90IGNyaXRpY2FsXG4gIH1cbn07XG5cbi8qKlxuICogSW5jcmVtZW50IHBldGl0aW9uIHNoYXJlIGNvdW50XG4gKi9cbmV4cG9ydCBjb25zdCBpbmNyZW1lbnRQZXRpdGlvblNoYXJlcyA9IGFzeW5jIChcbiAgcGV0aXRpb25JZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFBFVElUSU9OU19DT0xMRUNUSU9OLCBwZXRpdGlvbklkKTtcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICBzaGFyZUNvdW50OiBpbmNyZW1lbnQoMSksXG4gICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5mcm9tRGF0ZShuZXcgRGF0ZSgpKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbmNyZW1lbnRpbmcgcGV0aXRpb24gc2hhcmVzOicsIGVycm9yKTtcbiAgICAvLyBEb24ndCB0aHJvdyBlcnJvciBmb3IgYW5hbHl0aWNzIC0gaXQncyBub3QgY3JpdGljYWxcbiAgfVxufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGRlZmF1bHQgY2F0ZWdvcmllc1xuICovXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZUNhdGVnb3JpZXMgPSBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2F0ZWdvcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsIENBVEVHT1JJRVNfQ09MTEVDVElPTik7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNhdGVnb3JpZXNSZWYpO1xuXG4gICAgLy8gT25seSBpbml0aWFsaXplIGlmIG5vIGNhdGVnb3JpZXMgZXhpc3RcbiAgICBpZiAoc25hcHNob3QuZW1wdHkpIHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IERFRkFVTFRfQ0FURUdPUklFUy5tYXAoKGNhdGVnb3J5KSA9PlxuICAgICAgICBhZGREb2MoY2F0ZWdvcmllc1JlZiwge1xuICAgICAgICAgIC4uLmNhdGVnb3J5LFxuICAgICAgICAgIHBldGl0aW9uQ291bnQ6IDAsXG4gICAgICAgICAgY3JlYXRlZEF0OiBUaW1lc3RhbXAuZnJvbURhdGUobm93KSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5mcm9tRGF0ZShub3cpLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgY29uc29sZS5sb2coJ0RlZmF1bHQgY2F0ZWdvcmllcyBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgY2F0ZWdvcmllczonLCBlcnJvcik7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFsbCBjYXRlZ29yaWVzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYXRlZ29yaWVzID0gYXN5bmMgKCk6IFByb21pc2U8Q2F0ZWdvcnlbXT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNhdGVnb3JpZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCBDQVRFR09SSUVTX0NPTExFQ1RJT04pO1xuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNhdGVnb3JpZXNSZWYpO1xuICAgIGNvbnN0IGNhdGVnb3JpZXM6IENhdGVnb3J5W10gPSBbXTtcblxuICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIGlmIChkYXRhLmlzQWN0aXZlICE9PSBmYWxzZSkge1xuICAgICAgICBjYXRlZ29yaWVzLnB1c2goe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGljb246IGRhdGEuaWNvbixcbiAgICAgICAgICBjb2xvcjogZGF0YS5jb2xvcixcbiAgICAgICAgICBpc0FjdGl2ZTogZGF0YS5pc0FjdGl2ZSAhPT0gZmFsc2UsXG4gICAgICAgICAgcGV0aXRpb25Db3VudDogZGF0YS5wZXRpdGlvbkNvdW50IHx8IDAsXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIElmIG5vIGNhdGVnb3JpZXMgZm91bmQgaW4gZGF0YWJhc2UsIHJldHVybiBkZWZhdWx0IGNhdGVnb3JpZXNcbiAgICBpZiAoY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBjYXRlZ29yaWVzIGZvdW5kIGluIGRhdGFiYXNlLCB1c2luZyBkZWZhdWx0cycpO1xuICAgICAgcmV0dXJuIERFRkFVTFRfQ0FURUdPUklFUy5tYXAoKGNhdCwgaW5kZXgpID0+ICh7XG4gICAgICAgIGlkOiBgZGVmYXVsdC0ke2luZGV4fWAsXG4gICAgICAgIC4uLmNhdCxcbiAgICAgICAgcGV0aXRpb25Db3VudDogMCxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGFjdHVhbCBwZXRpdGlvbiBjb3VudHMgZm9yIGVhY2ggY2F0ZWdvcnlcbiAgICBjb25zdCBwZXRpdGlvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCBQRVRJVElPTlNfQ09MTEVDVElPTik7XG4gICAgY29uc3QgcGV0aXRpb25zUXVlcnkgPSBxdWVyeShcbiAgICAgIHBldGl0aW9uc1JlZixcbiAgICAgIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAnYXBwcm92ZWQnKVxuICAgICk7XG4gICAgY29uc3QgcGV0aXRpb25zU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHBldGl0aW9uc1F1ZXJ5KTtcblxuICAgIC8vIENvdW50IHBldGl0aW9ucyBieSBjYXRlZ29yeVxuICAgIGNvbnN0IGNhdGVnb3J5Q291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgcGV0aXRpb25zU25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGRvYy5kYXRhKCkuY2F0ZWdvcnk7XG4gICAgICBpZiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgY2F0ZWdvcnlDb3VudHNbY2F0ZWdvcnldID0gKGNhdGVnb3J5Q291bnRzW2NhdGVnb3J5XSB8fCAwKSArIDE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgcGV0aXRpb24gY291bnRzXG4gICAgY2F0ZWdvcmllcy5mb3JFYWNoKChjYXQpID0+IHtcbiAgICAgIGNhdC5wZXRpdGlvbkNvdW50ID0gY2F0ZWdvcnlDb3VudHNbY2F0Lm5hbWVdIHx8IDA7XG4gICAgfSk7XG5cbiAgICAvLyBTb3J0IGJ5IG5hbWVcbiAgICBjYXRlZ29yaWVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXG4gICAgcmV0dXJuIGNhdGVnb3JpZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBjYXRlZ29yaWVzOicsIGVycm9yKTtcbiAgICAvLyBSZXR1cm4gZGVmYXVsdCBjYXRlZ29yaWVzIGFzIGZhbGxiYWNrXG4gICAgcmV0dXJuIERFRkFVTFRfQ0FURUdPUklFUy5tYXAoKGNhdCwgaW5kZXgpID0+ICh7XG4gICAgICBpZDogYGRlZmF1bHQtJHtpbmRleH1gLFxuICAgICAgLi4uY2F0LFxuICAgICAgcGV0aXRpb25Db3VudDogMCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9KSk7XG4gIH1cbn07XG5cbi8vIEF1dG8taW5pdGlhbGl6ZSBjYXRlZ29yaWVzIHdoZW4gbW9kdWxlIGxvYWRzXG5pbml0aWFsaXplQ2F0ZWdvcmllcygpO1xuLyoqXG4gKiBHZXQgcGV0aXRpb24gYW5hbHl0aWNzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRQZXRpdGlvbkFuYWx5dGljcyA9IGFzeW5jIChwZXRpdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBNb2NrIGltcGxlbWVudGF0aW9uIGZvciBub3dcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIGFnZ3JlZ2F0ZSBzaWduYXR1cmUgZGF0YVxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFNpZ25hdHVyZXM6IDAsXG4gICAgICBkYWlseVNpZ25hdHVyZXM6IFtdLFxuICAgICAgdG9wTG9jYXRpb25zOiBbXSxcbiAgICAgIHNpZ25hdHVyZUdyb3d0aDogMCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcGV0aXRpb24gYW5hbHl0aWNzOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFuYWx5dGljcy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgcmVsYXRlZCBwZXRpdGlvbnMgYnkgY2F0ZWdvcnlcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFJlbGF0ZWRQZXRpdGlvbnMgPSBhc3luYyAoXG4gIGNhdGVnb3J5OiBzdHJpbmcsXG4gIGV4Y2x1ZGVJZD86IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gTW9jayBpbXBsZW1lbnRhdGlvbiBmb3Igbm93XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBmaW5kIHNpbWlsYXIgcGV0aXRpb25zXG4gICAgcmV0dXJuIFtdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcmVsYXRlZCBwZXRpdGlvbnM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdXNlciBieSBJRFxuICovXG5leHBvcnQgY29uc3QgZ2V0VXNlckJ5SWQgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgVVNFUlNfQ09MTEVDVElPTiwgdXNlcklkKTtcbiAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcblxuICAgIGlmICghdXNlclNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclNuYXAuZGF0YSgpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdXNlclNuYXAuaWQsXG4gICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwgfHwgJycsXG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lIHx8ICcnLFxuICAgICAgcm9sZTogdXNlckRhdGEucm9sZSB8fCAndXNlcicsXG4gICAgICBwaG9uZTogdXNlckRhdGEucGhvbmUgfHwgJycsXG4gICAgICB2ZXJpZmllZEVtYWlsOiB1c2VyRGF0YS5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxuICAgICAgdmVyaWZpZWRQaG9uZTogdXNlckRhdGEucGhvbmVWZXJpZmllZCB8fCBmYWxzZSxcbiAgICAgIGNyZWF0ZWRBdDogdXNlckRhdGEuY3JlYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiB1c2VyRGF0YS51cGRhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICBpc0FjdGl2ZTogdXNlckRhdGEuaXNBY3RpdmUgIT09IGZhbHNlLFxuICAgICAgLi4uKHVzZXJEYXRhLmJpbyAmJiB7IGJpbzogdXNlckRhdGEuYmlvIH0pLFxuICAgICAgLi4uKHVzZXJEYXRhLnBob3RvVVJMICYmIHsgcGhvdG9VUkw6IHVzZXJEYXRhLnBob3RvVVJMIH0pLFxuICAgIH0gYXMgVXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIERlbGV0ZSBwZXRpdGlvbiBieSBjcmVhdG9yIChzb2Z0IGRlbGV0ZSlcbiAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBldGl0aW9uQnlDcmVhdG9yID0gYXN5bmMgKFxuICBwZXRpdGlvbklkOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwZXRpdGlvblJlZiA9IGRvYyhkYiwgUEVUSVRJT05TX0NPTExFQ1RJT04sIHBldGl0aW9uSWQpO1xuICAgIGNvbnN0IHBldGl0aW9uU25hcCA9IGF3YWl0IGdldERvYyhwZXRpdGlvblJlZik7XG5cbiAgICBpZiAoIXBldGl0aW9uU25hcC5leGlzdHMoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQZXRpdGlvbiBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBwZXRpdGlvbiA9IHBldGl0aW9uU25hcC5kYXRhKCk7XG5cbiAgICAvLyBWZXJpZnkgdGhlIHVzZXIgaXMgdGhlIGNyZWF0b3JcbiAgICBpZiAocGV0aXRpb24uY3JlYXRvcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT25seSB0aGUgcGV0aXRpb24gY3JlYXRvciBjYW4gZGVsZXRlIHRoaXMgcGV0aXRpb24nKTtcbiAgICB9XG5cbiAgICAvLyBTb2Z0IGRlbGV0ZSBieSBtYXJraW5nIGFzIGRlbGV0ZWRcbiAgICBhd2FpdCB1cGRhdGVEb2MocGV0aXRpb25SZWYsIHtcbiAgICAgIHN0YXR1czogJ2RlbGV0ZWQnLFxuICAgICAgZGVsZXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHBldGl0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLyoqXG4gKiBBcmNoaXZlIGEgcGV0aXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGFyY2hpdmVQZXRpdGlvbiA9IGFzeW5jIChcbiAgcGV0aXRpb25JZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGV0aXRpb25SZWYgPSBkb2MoZGIsIFBFVElUSU9OU19DT0xMRUNUSU9OLCBwZXRpdGlvbklkKTtcbiAgICBjb25zdCBwZXRpdGlvblNuYXAgPSBhd2FpdCBnZXREb2MocGV0aXRpb25SZWYpO1xuXG4gICAgaWYgKCFwZXRpdGlvblNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGV0aXRpb24gbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcGV0aXRpb24gPSBwZXRpdGlvblNuYXAuZGF0YSgpO1xuXG4gICAgLy8gVmVyaWZ5IHRoZSB1c2VyIGlzIHRoZSBjcmVhdG9yXG4gICAgaWYgKHBldGl0aW9uLmNyZWF0b3JJZCAhPT0gdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgdGhlIHBldGl0aW9uIGNyZWF0b3IgY2FuIGFyY2hpdmUgdGhpcyBwZXRpdGlvbicpO1xuICAgIH1cblxuICAgIGF3YWl0IHVwZGF0ZURvYyhwZXRpdGlvblJlZiwge1xuICAgICAgc3RhdHVzOiAnYXJjaGl2ZWQnLFxuICAgICAgYXJjaGl2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhcmNoaXZpbmcgcGV0aXRpb246JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG4vKipcbiAqIFJlcXVlc3QgcGV0aXRpb24gZGVsZXRpb24gKGZvciBub24tY3JlYXRvcnMpXG4gKi9cbmV4cG9ydCBjb25zdCByZXF1ZXN0UGV0aXRpb25EZWxldGlvbiA9IGFzeW5jIChcbiAgcGV0aXRpb25JZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcmVhc29uOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICB0cnkge1xuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBjcmVhdGUgYSBkZWxldGlvbiByZXF1ZXN0XG4gICAgLy8gdGhhdCBhZG1pbnMvbW9kZXJhdG9ycyBjYW4gcmV2aWV3XG4gICAgY29uc3QgcmVxdWVzdFJlZiA9IGNvbGxlY3Rpb24oZGIsICdkZWxldGlvbl9yZXF1ZXN0cycpO1xuICAgIGF3YWl0IGFkZERvYyhyZXF1ZXN0UmVmLCB7XG4gICAgICBwZXRpdGlvbklkLFxuICAgICAgcmVxdWVzdGVkQnk6IHVzZXJJZCxcbiAgICAgIHJlYXNvbixcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlcXVlc3RpbmcgcGV0aXRpb24gZGVsZXRpb246JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJkb2MiLCJhZGREb2MiLCJnZXREb2MiLCJnZXREb2NzIiwidXBkYXRlRG9jIiwiZGVsZXRlRG9jIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJsaW1pdCIsIlRpbWVzdGFtcCIsImluY3JlbWVudCIsIm5vdGlmeVNpZ25hdHVyZU1pbGVzdG9uZSIsInZhbGlkYXRlU2lnbmF0dXJlQXV0aGVudGljaXR5IiwidHJhY2tTaWduYXR1cmVBdHRlbXB0IiwiZ2VuZXJhdGVTaWduYXR1cmVGaW5nZXJwcmludCIsIm1vZGVyYXRlQ29tbWVudCIsImxvZ0F1ZGl0QWN0aW9uIiwicmVmIiwiZGVsZXRlT2JqZWN0IiwiZGIiLCJzdG9yYWdlIiwidmFsaWRhdGVQZXRpdGlvbkRhdGEiLCJERUZBVUxUX0NBVEVHT1JJRVMiLCJjYWxjdWxhdGVQcmljaW5nVGllciIsImNhbGN1bGF0ZVBldGl0aW9uUHJpY2UiLCJQRVRJVElPTlNfQ09MTEVDVElPTiIsIlNJR05BVFVSRVNfQ09MTEVDVElPTiIsImdlbmVyYXRlUmVmZXJlbmNlQ29kZSIsImxldHRlcnMiLCJudW1iZXJzIiwiY29kZSIsImNoYXJBdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImkiLCJpc1JlZmVyZW5jZUNvZGVVbmlxdWUiLCJxIiwic25hcHNob3QiLCJlbXB0eSIsImVycm9yIiwiY29uc29sZSIsImdlbmVyYXRlVW5pcXVlUmVmZXJlbmNlQ29kZSIsImF0dGVtcHRzIiwibWF4QXR0ZW1wdHMiLCJpc1VuaXF1ZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInNsaWNlIiwiQ0FURUdPUklFU19DT0xMRUNUSU9OIiwiVVNFUlNfQ09MTEVDVElPTiIsImNyZWF0ZVBldGl0aW9uIiwicGV0aXRpb25EYXRhIiwiY3JlYXRvcklkIiwiY3JlYXRvck5hbWUiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiRXJyb3IiLCJtYXAiLCJlIiwibWVzc2FnZSIsImpvaW4iLCJwcmljaW5nVGllciIsInRhcmdldFNpZ25hdHVyZXMiLCJhbW91bnRSZXF1aXJlZCIsInJlZmVyZW5jZUNvZGUiLCJwZXRpdGlvbkRvYyIsInRpdGxlIiwidHJpbSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJzdWJjYXRlZ29yeSIsImN1cnJlbnRTaWduYXR1cmVzIiwic3RhdHVzIiwibWVkaWFVcmxzIiwicXJDb2RlVXJsIiwiaGFzUXJDb2RlIiwiYW1vdW50UGFpZCIsInBheW1lbnRTdGF0dXMiLCJwdWJsaXNoZXJUeXBlIiwicHVibGlzaGVyTmFtZSIsInBldGl0aW9uVHlwZSIsImFkZHJlc3NlZFRvVHlwZSIsImFkZHJlc3NlZFRvU3BlY2lmaWMiLCJ5b3V0dWJlVmlkZW9VcmwiLCJ0YWdzIiwibG9jYXRpb24iLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ2aWV3Q291bnQiLCJzaGFyZUNvdW50IiwiaXNQdWJsaWMiLCJpc0FjdGl2ZSIsImRvY1JlZiIsImZyb21EYXRlIiwiY3JlYXRlZFBldGl0aW9uIiwiaWQiLCJsb2ciLCJ2ZXJpZnlEb2MiLCJleGlzdHMiLCJkYXRhIiwidmVyaWZ5RXJyb3IiLCJnZXRQZXRpdGlvbkJ5SWQiLCJnZXRQZXRpdGlvbiIsInBldGl0aW9uSWRPclNsdWciLCJyZXRyeUNvdW50IiwiZG9jU25hcCIsInBhcnRzIiwic3BsaXQiLCJpZFN1ZmZpeCIsInBldGl0aW9uc1F1ZXJ5IiwicXVlcnlTbmFwc2hvdCIsImZvdW5kRG9jIiwiZm9yRWFjaCIsImVuZHNXaXRoIiwicGV0aXRpb24iLCJjcmVhdG9yUGFnZUlkIiwidG9EYXRlIiwibW9kZXJhdGVkQnkiLCJtb2RlcmF0aW9uTm90ZXMiLCJyZXN1Ym1pc3Npb25Db3VudCIsInJlc3VibWlzc2lvbkhpc3RvcnkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhcHByb3ZlZEF0IiwicGF1c2VkQXQiLCJkZWxldGVkQXQiLCJ1cGRhdGVQZXRpdGlvbiIsInBldGl0aW9uSWQiLCJ1cGRhdGVzIiwidXNlcklkIiwiT2JqZWN0Iiwia2V5cyIsInVwZGF0ZWREYXRhIiwidXBkYXRlRGF0YSIsIm5ld1ByaWNpbmdUaWVyIiwibmV3QW1vdW50IiwiZGVsZXRlUGV0aXRpb24iLCJkZWxldGVQcm9taXNlcyIsInVybCIsIm1lZGlhUmVmIiwiYWxsIiwid2FybiIsInFyUmVmIiwic2lnblBldGl0aW9uIiwic2lnbmVyRGF0YSIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsInBob25lTnVtYmVyIiwicGhvbmUiLCJzdWNjZXNzIiwicmVhc29uIiwic2VjdXJpdHlDaGVjayIsInZhbGlkIiwiY29tbWVudCIsIm1vZGVyYXRpb25SZXN1bHQiLCJhcHByb3ZlZCIsInJlYXNvbnMiLCJleGlzdGluZ1NpZ25hdHVyZSIsImNoZWNrRXhpc3RpbmdTaWduYXR1cmUiLCJwaG9uZVNpZ25hdHVyZSIsImNoZWNrUGhvbmVTaWduYXR1cmUiLCJzaWduYXR1cmVGaW5nZXJwcmludCIsInNpZ25hdHVyZURhdGEiLCJzaWduZXJOYW1lIiwiaXNBbm9ueW1vdXMiLCJuYW1lIiwic2lnbmVyUGhvbmUiLCJzaWduZXJMb2NhdGlvbiIsInZlcmlmaWNhdGlvbk1ldGhvZCIsInZlcmlmaWVkQXQiLCJmaW5nZXJwcmludCIsInBldGl0aW9uUmVmIiwibmV3U2lnbmF0dXJlQ291bnQiLCJwcm9ncmVzcyIsIm1pbGVzdG9uZXMiLCJtaWxlc3RvbmUiLCJwcmV2aW91c1Byb2dyZXNzIiwibm90aWZpY2F0aW9uRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJpbmNsdWRlcyIsImdldFBldGl0aW9ucyIsImZpbHRlcnMiLCJwYWdpbmF0aW9uIiwicGFnZSIsInRvdGFsIiwiaGFzTW9yZSIsInNvcnRGaWVsZCIsInNvcnRCeSIsInNvcnREaXJlY3Rpb24iLCJzb3J0T3JkZXIiLCJwZXRpdGlvbnMiLCJkb2NzIiwiaW5kZXgiLCJwdXNoIiwiZmlsdGVyZWRQZXRpdGlvbnMiLCJzZWFyY2giLCJzZWFyY2hUZXJtIiwidG9Mb3dlckNhc2UiLCJmaWx0ZXIiLCJjb3VudHJ5IiwiY2l0eSIsInBhZ2luYXRpb25JbmZvIiwiZ2V0VXNlclBldGl0aW9ucyIsInVwZGF0ZVBldGl0aW9uU3RhdHVzIiwibW9kZXJhdG9ySWQiLCJub3RlcyIsInBldGl0aW9uU25hcCIsIm9sZFN0YXR1cyIsIm1vZGVyYXRvciIsImdldFVzZXJCeUlkIiwiYWN0aW9uTWFwIiwicmVqZWN0ZWQiLCJwYXVzZWQiLCJkZWxldGVkIiwiYXJjaGl2ZWQiLCJhY3RvcklkIiwiYWN0b3JOYW1lIiwiYWN0b3JFbWFpbCIsImVtYWlsIiwiYWN0b3JSb2xlIiwicm9sZSIsImFjdGlvbiIsInRhcmdldFR5cGUiLCJ0YXJnZXRJZCIsInRhcmdldE5hbWUiLCJkZXRhaWxzIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsImluY3JlbWVudFBldGl0aW9uVmlld3MiLCJpbmNyZW1lbnRQZXRpdGlvblNoYXJlcyIsImluaXRpYWxpemVDYXRlZ29yaWVzIiwiY2F0ZWdvcmllc1JlZiIsInByb21pc2VzIiwicGV0aXRpb25Db3VudCIsImdldENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwiaWNvbiIsImNvbG9yIiwiY2F0IiwicGV0aXRpb25zUmVmIiwicGV0aXRpb25zU25hcHNob3QiLCJjYXRlZ29yeUNvdW50cyIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJnZXRQZXRpdGlvbkFuYWx5dGljcyIsInRvdGFsU2lnbmF0dXJlcyIsImRhaWx5U2lnbmF0dXJlcyIsInRvcExvY2F0aW9ucyIsInNpZ25hdHVyZUdyb3d0aCIsImdldFJlbGF0ZWRQZXRpdGlvbnMiLCJleGNsdWRlSWQiLCJ1c2VyRGF0YSIsInVzZXJSZWYiLCJ1c2VyU25hcCIsInZlcmlmaWVkRW1haWwiLCJlbWFpbFZlcmlmaWVkIiwidmVyaWZpZWRQaG9uZSIsInBob25lVmVyaWZpZWQiLCJiaW8iLCJwaG90b1VSTCIsImRlbGV0ZVBldGl0aW9uQnlDcmVhdG9yIiwiYXJjaGl2ZVBldGl0aW9uIiwiYXJjaGl2ZWRBdCIsInJlcXVlc3RQZXRpdGlvbkRlbGV0aW9uIiwicmVxdWVzdFJlZiIsInJlcXVlc3RlZEJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/petitions.ts\n"));

/***/ })

});