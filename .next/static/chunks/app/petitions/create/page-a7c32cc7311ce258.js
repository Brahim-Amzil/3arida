(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8323],{3495:function(e,t,s){Promise.resolve().then(s.bind(s,241))},9840:function(e,t,s){var r=s(2601);s(472);var i=s(2265),a=i&&"object"==typeof i&&"default"in i?i:{default:i};function n(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=void 0!==r&&r.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},c=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,i=t.optimizeForSpeed,a=void 0===i?o:i;d(l(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",d("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var n=document.querySelector('meta[property="csp-nonce"]');this._nonce=n?n.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(d(l(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed){var s=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];d(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},s.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},s.cssRules=function(){var e=this;return this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&d(l(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return s?i.insertBefore(r,s):i.appendChild(r),r},n(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),t&&n(e,t),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var u=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},m={};function h(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return m[r]||(m[r]="jsx-"+u(e+"-"+s)),m[r]}function g(e,t){var s=e+t;return m[s]||(m[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),m[s]}var x=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,r=void 0===s?null:s,i=t.optimizeForSpeed,a=void 0!==i&&i;this._sheet=r||new c({name:"styled-jsx",optimizeForSpeed:a}),this._sheet.inject(),r&&"boolean"==typeof a&&(this._sheet.setOptimizeForSpeed(a),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),r=s.styleId,i=s.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var a=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=a,this._instancesCounts[r]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var r=this._fromServer&&this._fromServer[s];r?(r.parentNode.removeChild(r),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],r=e[1];return a.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,r=e.id;if(s){var i=h(r,s);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return g(i,e)}):[g(i,t)]}}return{styleId:h(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=i.createContext(null);p.displayName="StyleSheetContext";var b=a.default.useInsertionEffect||a.default.useLayoutEffect,f=new x;function y(e){var t=f||i.useContext(p);return t&&b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=y},9102:function(e,t,s){e.exports=s(9840).style},241:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(7437),i=s(9102),a=s.n(i),n=s(2265),o=s(4033),l=s(8449),c=s(4890),d=s(575),u=s(5671),m=s(3525),h=s(8063),g=s(8161),x=s(1221),p=s(955);async function b(e,t){try{let s=x.auth.currentUser;if(console.log("\uD83D\uDD10 Current user during upload:",s?"Authenticated":"Not authenticated"),console.log("\uD83D\uDD10 User UID:",null==s?void 0:s.uid),console.log("\uD83D\uDD10 User email:",null==s?void 0:s.email),console.log("\uD83D\uDD10 Email verified:",null==s?void 0:s.emailVerified),console.log("\uD83D\uDCC1 Upload path:",t),!s)throw Error("User must be authenticated to upload images");let r=(0,p.ref)(x.t,t),i=await (0,p.KV)(r,e),a=await (0,p.getDownloadURL)(i.ref);return console.log("✅ Image uploaded successfully:",a),a}catch(e){throw console.error("❌ Error uploading image:",e),Error("Failed to upload image. Please try again.")}}async function f(e){try{let t=(0,p.ref)(x.t,e);await (0,p.oq)(t),console.log("✅ Image deleted successfully")}catch(e){console.error("❌ Error deleting image:",e)}}let y={Environment:["Climate Change","Pollution","Wildlife Protection","Renewable Energy","Water Conservation","Waste Management"],"Social Justice":["Human Rights","Gender Equality","Racial Justice","LGBTQ+ Rights","Disability Rights","Workers Rights"],Politics:["Government Reform","Electoral Reform","Transparency","Anti-Corruption","Local Government","Policy Change"],Education:["School Funding","Higher Education","Student Rights","Teacher Support","Educational Access","Curriculum Reform"],Healthcare:["Healthcare Access","Mental Health","Public Health","Healthcare Reform","Medical Research","Patient Rights"],Economy:["Employment","Small Business","Economic Policy","Consumer Rights","Housing","Taxation"],Infrastructure:["Transportation","Public Works","Urban Planning","Internet Access","Public Safety","Utilities"],Culture:["Arts Funding","Cultural Heritage","Language Rights","Religious Freedom","Community Events","Cultural Education"]};function j(){var e,t,i,x,p,j;let v=(0,o.useRouter)(),{user:N,isAuthenticated:w,loading:S}=(0,m.useAuth)(),[C,D]=(0,n.useState)([]),[_,T]=(0,n.useState)(!1),[P,k]=(0,n.useState)(""),[A,E]=(0,n.useState)(!1),[R,F]=(0,n.useState)({publisherType:"",publisherName:"",officialDocument:void 0,petitionType:"",addressedToType:"",addressedToSpecific:"",title:"",description:"",category:"",subcategory:"",targetSignatures:1e3,mediaUrls:[],youtubeVideoUrl:"",location:{country:"Morocco",city:""}}),[z,O]=(0,n.useState)(""),[U,I]=(0,n.useState)(""),[L,M]=(0,n.useState)(""),[B,q]=(0,n.useState)(""),[G,V]=(0,n.useState)("slider"),[Y,H]=(0,n.useState)(""),[W,K]=(0,n.useState)(0),[Z,J]=(0,n.useState)(null),Q=[{id:"publisher",title:"Publisher Information",description:"Who is publishing this petition?"},{id:"petition-details",title:"Petition Details",description:"Basic information about your petition"},{id:"content",title:"Content & Description",description:"Tell your story and explain your cause"},{id:"media",title:"Media & Images",description:"Add photos and videos to make your petition engaging"},{id:"location",title:"Location & Targeting",description:"Set your petition location and signature goal"},{id:"review",title:"Review & Submit",description:"Review your petition before publishing"}];(0,n.useEffect)(()=>{X()},[]),(0,n.useEffect)(()=>{S||w||v.push("/auth/login?redirect=/petitions/create")},[S,w,v]);let X=async()=>{try{let e=await (0,h.CP)();D(e)}catch(t){console.error("Error loading categories:",t);let{DEFAULT_CATEGORIES:e}=await Promise.resolve().then(s.bind(s,8161));D(e.map((e,t)=>({id:"default-".concat(t),...e,petitionCount:0,createdAt:new Date,updatedAt:new Date})))}},$=(e,t)=>{F(s=>({...s,[e]:t}))},ee=e=>{e>=0&&e<Q.length&&K(e)},et=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){console.log("\uD83D\uDCE4 Starting image upload for file:",s.name),E(!0),k("");try{console.log("\uD83D\uDD0D Validating image file..."),function(e){if(!e.type.startsWith("image/"))throw Error("Please select an image file");if(e.size>5242880)throw Error("Image must be less than 5MB");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw Error("Supported formats: JPEG, PNG, WebP")}(s),console.log("✅ Image file validation passed");let e="temp_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),t=function(e,t){let s=t.split(".").pop()||"jpg",r=Date.now(),i="".concat(r,".").concat(s);return"petitions/".concat(e,"/").concat(i)}(e,s.name);console.log("\uD83D\uDCC1 Generated upload path:",t),console.log("☁️ Uploading to Firebase Storage...");let r=await b(s,t);console.log("✅ Image uploaded successfully! URL:",r),F(e=>{let t={...e,mediaUrls:[r]};return console.log("✅ Updating formData.mediaUrls to:",[r]),console.log("\uD83D\uDCCA Full updated formData:",t),t}),console.log("✅ Image upload complete:",s.name)}catch(e){console.error("❌ Error uploading image:",e),k(e.message||"Failed to upload image. Please try again.")}finally{E(!1)}}},es=async()=>{if(R.mediaUrls.length>0)try{await f(R.mediaUrls[0]),console.log("✅ Image deleted from storage")}catch(e){console.error("❌ Error deleting image from storage:",e)}F(e=>({...e,mediaUrls:[]}))},er=async e=>{var t,s,r;if(e.preventDefault(),W!==Q.length-1){console.log("⚠️ Form submission blocked - not on review step. Current step:",W),console.log('⚠️ Please navigate to the Review step and click "Create Petition" button');return}if(console.log("✅ Form submission allowed - on review step"),!N){k("You must be logged in to create a petition");return}if(!R.publisherType){k("Please select who is publishing this petition");return}if(!(null===(t=R.publisherName)||void 0===t?void 0:t.trim())){k("Please enter the publisher name");return}if("Association, Organization, Institution"===R.publisherType&&!R.officialDocument){k("Please upload an official document proving your organization/association/institution");return}if("Other"===R.category&&!z.trim()){k("Please specify a custom category");return}if("Other"===R.subcategory&&!U.trim()){k("Please specify a custom subcategory");return}if("Specific: Addressed to:"===R.petitionType&&!R.addressedToType){k("Please select who this petition is addressed to");return}if(R.addressedToType&&!(null===(s=R.addressedToSpecific)||void 0===s?void 0:s.trim())){k("Please specify the ".concat(R.addressedToType.toLowerCase()));return}if("specific"===G){if(!Y||0>=parseInt(Y)){k("Please enter a valid number of signatures");return}if(parseInt(Y)>1e6){k("Maximum number of signatures is 1,000,000");return}}if(!R.targetSignatures||R.targetSignatures<=0){k("Please select or enter a target number of signatures");return}let i={...R,category:"Other"===R.category?z.trim():R.category,subcategory:"Other"===R.subcategory?U.trim():R.subcategory},a=(0,g.QI)(i);if(a.length>0){k(a.map(e=>e.message).join(", "));return}try{T(!0),k("");let e=await (0,h.MY)(i,N.uid,N.displayName||(null===(r=N.email)||void 0===r?void 0:r.split("@")[0])||"Anonymous");localStorage.setItem("newPetitionId",e.id),(0,g.yX)(R.targetSignatures)>0?v.push("/petitions/success?payment=true&id=".concat(e.id)):v.push("/petitions/success?id=".concat(e.id))}catch(e){console.error("Error creating petition:",e),k(e.message||"Failed to create petition. Please try again.")}finally{T(!1)}},ei=(0,g.yX)(R.targetSignatures),ea=(0,g.xF)(R.targetSignatures),en=g.S2[ea];return S?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,r.jsx)(l.default,{}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})]}):w?(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 min-h-screen bg-gray-50 flex flex-col",children:[(0,r.jsx)(a(),{id:"5b04a09e4d1cbce5",children:'input[type="range"].jsx-5b04a09e4d1cbce5::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;height:20px;width:20px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:#10b981;cursor:pointer;border:2px solid#fff;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}input[type="range"].jsx-5b04a09e4d1cbce5::-moz-range-thumb{height:20px;width:20px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:#10b981;cursor:pointer;border:2px solid#fff;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}'}),(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 mb-8",children:[(0,r.jsx)("h1",{className:"jsx-5b04a09e4d1cbce5 text-3xl font-bold text-gray-900 mb-2",children:"Start a Petition"}),(0,r.jsx)("p",{className:"jsx-5b04a09e4d1cbce5 text-lg text-gray-600",children:"Create a petition to rally support for your cause and make change happen"})]}),(0,r.jsx)("div",{className:"jsx-5b04a09e4d1cbce5 mb-8",children:(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 bg-white rounded-lg shadow-sm border p-6",children:[(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"jsx-5b04a09e4d1cbce5 text-lg font-semibold text-gray-900",children:Q[W].title}),(0,r.jsxs)("span",{className:"jsx-5b04a09e4d1cbce5 text-sm text-gray-500",children:["Step ",W+1," of ",Q.length]})]}),(0,r.jsx)("p",{className:"jsx-5b04a09e4d1cbce5 text-gray-600 mb-4",children:Q[W].description}),(0,r.jsx)("div",{className:"jsx-5b04a09e4d1cbce5 w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,r.jsx)("div",{style:{width:"".concat((W+1)/Q.length*100,"%")},className:"jsx-5b04a09e4d1cbce5 bg-green-600 h-2 rounded-full transition-all duration-300 ease-in-out"})}),(0,r.jsx)("div",{className:"jsx-5b04a09e4d1cbce5 flex justify-between",children:Q.map((e,t)=>(0,r.jsxs)("div",{onClick:()=>ee(t),className:"jsx-5b04a09e4d1cbce5 "+"flex flex-col items-center cursor-pointer transition-colors duration-200 ".concat(t<=W?"text-green-600":"text-gray-400"),children:[(0,r.jsx)("div",{className:"jsx-5b04a09e4d1cbce5 "+"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium border-2 transition-colors duration-200 ".concat(t<W?"bg-green-600 border-green-600 text-white":t===W?"border-green-600 text-green-600 bg-white":"border-gray-300 text-gray-400 bg-white"),children:t<W?"✓":t+1}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-xs mt-1 text-center max-w-16 leading-tight",children:e.title.split(" ")[0]})]},e.id))})]})}),(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 max-w-4xl mx-auto",children:[(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.Ol,{children:(0,r.jsx)(u.ll,{children:"Petition Details"})}),(0,r.jsx)(u.aY,{children:(0,r.jsxs)("form",{onSubmit:er,onKeyDown:e=>{"Enter"===e.key&&W!==Q.length-1&&(e.preventDefault(),console.log("⚠️ Enter key blocked - not on review step"))},className:"jsx-5b04a09e4d1cbce5 space-y-6",children:[0===W&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publish a petition as *"}),(0,r.jsxs)("select",{required:!0,value:R.publisherType,onChange:e=>{$("publisherType",e.target.value),e.target.value!==R.publisherType&&($("publisherName",""),$("officialDocument",void 0))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"",children:"Select publisher type"}),(0,r.jsx)("option",{value:"Individual",children:"\uD83D\uDC64 Individual"}),(0,r.jsx)("option",{value:"Association, Organization, Institution",children:"\uD83C\uDFE2 Association, Organization, Institution"})]})]}),R.publisherType&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Individual"===R.publisherType?"Your Name":"Organization/Association/Institution Name"," ","*"]}),(0,r.jsx)("input",{type:"text",required:!0,value:R.publisherName||"",onChange:e=>$("publisherName",e.target.value),placeholder:"Individual"===R.publisherType?"Enter your full name":"Enter organization/association/institution name",maxLength:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(null===(e=R.publisherName)||void 0===e?void 0:e.length)||0,"/100 characters"]})]}),"Association, Organization, Institution"===R.publisherType&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Official Document *"}),(0,r.jsx)("input",{type:"file",required:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(s.size>5242880){alert("File size must be less than 5MB"),e.target.value="";return}$("officialDocument",s)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Upload an official document (PDF, DOC, DOCX, JPG, PNG). Max size: 5MB"})]})]}),1===W&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Petition Type *"}),(0,r.jsxs)("select",{required:!0,value:R.petitionType,onChange:e=>$("petitionType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"",children:"Select petition type"}),(0,r.jsx)("option",{value:"Change",children:"\uD83D\uDD04 Change - Request a change in policy or practice"}),(0,r.jsx)("option",{value:"Support",children:"✊ Support - Show support for a cause or person"}),(0,r.jsx)("option",{value:"Stop",children:"\uD83D\uDED1 Stop - Stop something from happening"}),(0,r.jsx)("option",{value:"Start",children:"\uD83D\uDE80 Start - Start a new initiative or program"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Who is this petition addressed to? *"}),(0,r.jsxs)("select",{required:!0,value:R.addressedToType,onChange:e=>$("addressedToType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"",children:"Select who this petition is for"}),(0,r.jsx)("option",{value:"Government",children:"\uD83C\uDFDB️ Government Official/Agency"}),(0,r.jsx)("option",{value:"Company",children:"\uD83C\uDFE2 Company/Corporation"}),(0,r.jsx)("option",{value:"Organization",children:"\uD83C\uDFDB️ Organization/Institution"}),(0,r.jsx)("option",{value:"Individual",children:"\uD83D\uDC64 Individual"}),(0,r.jsx)("option",{value:"Community",children:"\uD83C\uDFD8️ Community/Local Authority"}),(0,r.jsx)("option",{value:"Other",children:"\uD83D\uDCDD Other"})]})]}),R.addressedToType&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Specific ",R.addressedToType," Name *"]}),(0,r.jsx)("input",{type:"text",required:!0,value:R.addressedToSpecific,onChange:e=>$("addressedToSpecific",e.target.value),placeholder:"Enter the specific ".concat(R.addressedToType.toLowerCase()," name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,r.jsxs)("select",{required:!0,value:R.category,onChange:e=>{$("category",e.target.value),$("subcategory","")},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),C.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id)),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]}),"Other"===R.category&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Category *"}),(0,r.jsx)("input",{type:"text",required:!0,value:z,onChange:e=>O(e.target.value),placeholder:"Enter your custom category",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),R.category&&"Other"!==R.category&&y[R.category]&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory *"}),(0,r.jsxs)("select",{required:!0,value:R.subcategory,onChange:e=>$("subcategory",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"",children:"Select a subcategory"}),y[R.category].map(e=>(0,r.jsx)("option",{value:e,children:e},e)),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]}),"Other"===R.subcategory&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Subcategory *"}),(0,r.jsx)("input",{type:"text",required:!0,value:U,onChange:e=>I(e.target.value),placeholder:"Enter your custom subcategory",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]})]}),2===W&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Petition Title *"}),(0,r.jsx)("input",{type:"text",required:!0,value:R.title,onChange:e=>$("title",e.target.value),placeholder:"Enter a clear, compelling title for your petition",maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[R.title.length,"/150 characters"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Petition Description *"}),(0,r.jsx)("textarea",{required:!0,value:R.description,onChange:e=>$("description",e.target.value),placeholder:"Explain your cause, why it matters, and what change you want to see. Be specific and compelling.",rows:8,maxLength:5e3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[R.description.length,"/5000 characters"]})]})]}),3===W&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Petition Image (Optional)"}),R.mediaUrls&&R.mediaUrls.length>0&&(0,r.jsxs)("div",{className:"mb-4 relative",children:[(0,r.jsx)("img",{src:R.mediaUrls[0],alt:"Petition preview",className:"w-full h-48 object-cover rounded-lg border"}),(0,r.jsx)("button",{type:"button",onClick:es,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:et,disabled:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 disabled:opacity-50 disabled:cursor-not-allowed"}),A&&(0,r.jsxs)("div",{className:"flex items-center mt-2 text-sm text-blue-600",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Uploading image..."]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Upload an image to make your petition more compelling. Max size: 5MB"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Video (Optional)"}),(0,r.jsx)("input",{type:"url",value:R.youtubeVideoUrl||"",onChange:e=>$("youtubeVideoUrl",e.target.value),placeholder:"Paste YouTube video URL here",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Add a YouTube video to help explain your cause (paste the full YouTube URL)"}),R.youtubeVideoUrl&&(0,r.jsx)("div",{className:"mt-4",children:(j=R.youtubeVideoUrl)&&/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|m\.youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/.test(j)?(0,r.jsx)("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:(0,r.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat((e=>{if(!e)return null;let t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|m\.youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/);return t?t[1]:null})(R.youtubeVideoUrl)),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full rounded-lg"})}):(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:"Please enter a valid YouTube URL (e.g., https://www.youtube.com/watch?v=VIDEO_ID)"})})})]})]}),4===W&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Target Number of Signatures *"}),(0,r.jsxs)("div",{className:"flex border-b border-gray-200 mb-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>V("slider"),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors ".concat("slider"===G?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Slider"}),(0,r.jsx)("button",{type:"button",onClick:()=>V("specific"),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors ".concat("specific"===G?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Specific Number"})]}),"slider"===G&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"range",min:"100",max:"100000",step:"100",value:R.targetSignatures,onChange:e=>$("targetSignatures",parseInt(e.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-green-500",style:{background:"linear-gradient(to right, #10b981 0%, #10b981 ".concat((R.targetSignatures-100)/99900*100,"%, #e5e7eb ").concat((R.targetSignatures-100)/99900*100,"%, #e5e7eb 100%)")}}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,r.jsx)("span",{children:"100"}),(0,r.jsx)("span",{children:"25K"}),(0,r.jsx)("span",{children:"50K"}),(0,r.jsx)("span",{children:"100K"})]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[R.targetSignatures.toLocaleString()," signatures"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[en.name," Plan - ",0===ei?"Free":"".concat(ei," MAD")]})]})]}),"specific"===G&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"number",min:"1",max:"1000000",value:Y,onChange:e=>{let t=e.target.value;H(t),t&&parseInt(t)>0&&$("targetSignatures",parseInt(t))},placeholder:"Enter number of signatures",className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Enter any number between 1 and 1,000,000 signatures"})]}),R.targetSignatures>0&&(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:[R.targetSignatures.toLocaleString()," signatures"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[en.name," Plan - ",0===ei?"Free":"".concat(ei," MAD")]})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"Set a signature goal that matches your petition's reach. You can always upgrade your plan as your support grows."}),R.targetSignatures&&(0,r.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-blue-900",children:[en.name," Plan"]}),(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Up to ",en.maxSignatures.toLocaleString()," signatures"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-blue-900",children:0===ei?"Free":"".concat((0,g.xG)(ei)," MAD")}),ei>0&&(0,r.jsx)("p",{className:"text-xs text-blue-600",children:"One-time payment"})]})]}),en.features&&en.features.length>0&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-blue-800 mb-2",children:"Includes:"}),(0,r.jsx)("ul",{className:"text-xs text-blue-700 space-y-1",children:en.features.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-1 h-1 bg-blue-400 rounded-full mr-2"}),e]},t))})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Geographical scope of the petition *"}),(0,r.jsxs)("select",{required:!0,value:B,onChange:e=>{let t=e.target.value;q(t),"Kingdom of Morocco"===t?F(e=>({...e,location:{country:"Morocco",city:""}})):"Other"===t||F(e=>({...e,location:{country:"Morocco",city:t}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"",children:"Select location"}),(0,r.jsx)("option",{value:"Kingdom of Morocco",children:"Kingdom of Morocco"}),(0,r.jsx)("option",{disabled:!0,children:"──────────"}),null===(t=[{country:"Morocco",cities:["Agadir","Al Hoceima","Beni Mellal","Berkane","Casablanca","Chefchaouen","El Jadida","Errachidia","Essaouira","Fez","Ifrane","Kenitra","Khenifra","Khouribga","Larache","Marrakech","Meknes","Nador","Ouarzazate","Oujda","Rabat","Safi","Sale","Tangier","Tetouan"]},{country:"France",cities:["Paris","Lyon","Marseille","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille"]},{country:"Spain",cities:["Madrid","Barcelona","Valencia","Seville","Zaragoza","M\xe1laga","Murcia","Palma","Las Palmas","Bilbao"]},{country:"United States",cities:["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose"]},{country:"Canada",cities:["Toronto","Montreal","Vancouver","Calgary","Edmonton","Ottawa","Winnipeg","Quebec City","Hamilton","Kitchener"]},{country:"United Kingdom",cities:["London","Birmingham","Manchester","Glasgow","Liverpool","Leeds","Sheffield","Edinburgh","Bristol","Cardiff"]}].find(e=>"Morocco"===e.country))||void 0===t?void 0:t.cities.map(e=>(0,r.jsx)("option",{value:e,children:e},e)),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]}),"Other"===B&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Location *"}),(0,r.jsx)("input",{type:"text",required:!0,value:L,onChange:e=>M(e.target.value),placeholder:"Enter your custom location",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (Optional)"}),(0,r.jsx)("input",{type:"text",value:R.tags,onChange:e=>$("tags",e.target.value),placeholder:"Enter tags separated by commas (e.g., environment, climate, sustainability)",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Add relevant tags to help people discover your petition"})]})]}),5===W&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Review Your Petition"}),(0,r.jsx)("p",{className:"text-blue-700",children:"Please review all the information below before submitting your petition."})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Publisher Information"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",R.publisherType]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",R.publisherName]}),R.officialDocument&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Document:"})," ",R.officialDocument.name]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Petition Details"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",R.petitionType]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Addressed to:"})," ",R.addressedToType," -"," ",R.addressedToSpecific]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Category:"})," ","Other"===R.category?z:R.category]}),R.subcategory&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Subcategory:"})," ","Other"===R.subcategory?U:R.subcategory]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Content"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Title:"})," ",R.title]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("strong",{children:"Description:"}),(0,r.jsx)("p",{className:"mt-1 text-gray-700",children:R.description})]})]}),(R.mediaUrls&&R.mediaUrls.length>0||R.youtubeVideoUrl)&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Media"}),R.mediaUrls&&R.mediaUrls.length>0&&(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("p",{className:"mb-2",children:"✅ Image uploaded"}),(0,r.jsx)("img",{src:R.mediaUrls[0],alt:"Petition preview",className:"w-full max-w-md h-32 object-cover rounded-lg border"})]}),R.youtubeVideoUrl&&(0,r.jsx)("p",{children:"✅ YouTube video added"})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Location & Targeting"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Target Signatures:"})," ",null===(i=R.targetSignatures)||void 0===i?void 0:i.toLocaleString()]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Location:"})," ",(null===(x=R.location)||void 0===x?void 0:x.city)?"".concat(R.location.city,", ").concat(R.location.country):(null===(p=R.location)||void 0===p?void 0:p.country)||"Not specified"]}),R.tags&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Tags:"})," ",R.tags]})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"Pricing Information"}),(0,r.jsxs)("p",{className:"text-green-700",children:[(0,r.jsx)("strong",{children:"Total Cost:"})," ",0===ei?"Free":"".concat(ei," MAD")]}),(0,r.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["Tier: ",ea," | Plan: ",en.name]})]})]}),(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 flex justify-between pt-6 border-t",children:[(0,r.jsx)(d.z,{type:"button",variant:"outline",onClick:()=>{W>0&&K(W-1)},disabled:0===W,children:"Previous"}),W<Q.length-1?(0,r.jsx)(d.z,{type:"button",onClick:()=>{W<Q.length-1&&K(W+1)},disabled:A,children:A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-5b04a09e4d1cbce5 animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading Image..."]}):"Next"}):(0,r.jsx)(d.z,{type:"submit",disabled:_,className:"bg-green-600 hover:bg-green-700 text-white",children:_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-5b04a09e4d1cbce5 animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Petition..."]}):ei>0?"Create Petition - ".concat((0,g.xG)(ei)):"Create Free Petition"})]})]})})]}),(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.Ol,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>J("pricing"===Z?null:"pricing"),children:(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 flex items-center justify-between",children:[(0,r.jsx)(u.ll,{className:"flex items-center",children:"\uD83D\uDCB0 Pricing Information"}),(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-lg font-bold text-green-600",children:ei>0?(0,g.xG)(ei):"Free"}),(0,r.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5b04a09e4d1cbce5 "+"w-5 h-5 text-gray-500 transition-transform duration-200 ".concat("pricing"===Z?"rotate-180":""),children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7",className:"jsx-5b04a09e4d1cbce5"})})]})]})}),"pricing"===Z&&(0,r.jsx)(u.aY,{className:"pt-0",children:(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 space-y-4",children:[(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 flex items-center justify-between mb-2",children:[(0,r.jsxs)("span",{className:"jsx-5b04a09e4d1cbce5 font-medium text-green-800",children:[en.name," Tier"]}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-lg font-bold text-green-600",children:ei>0?(0,g.xG)(ei):"Free"})]}),(0,r.jsxs)("p",{className:"jsx-5b04a09e4d1cbce5 text-sm text-green-700 mb-3",children:["Up to ",R.targetSignatures.toLocaleString()," ","signatures"]}),(0,r.jsx)("ul",{className:"jsx-5b04a09e4d1cbce5 text-sm text-green-700 space-y-1",children:en.features.map((e,t)=>(0,r.jsxs)("li",{className:"jsx-5b04a09e4d1cbce5 flex items-center",children:[(0,r.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-5b04a09e4d1cbce5 w-4 h-4 mr-2 text-green-600",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd",className:"jsx-5b04a09e4d1cbce5"})}),e]},t))})]}),ei>0&&(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 text-sm text-gray-600",children:[(0,r.jsx)("p",{className:"jsx-5b04a09e4d1cbce5 mb-2",children:"\uD83D\uDCB3 Payment will be processed securely through Stripe"}),(0,r.jsx)("p",{className:"jsx-5b04a09e4d1cbce5",children:"\uD83C\uDDF2\uD83C\uDDE6 All prices are in Moroccan Dirham (MAD)"})]})]})})]}),(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.Ol,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>J("tips"===Z?null:"tips"),children:(0,r.jsxs)("div",{className:"jsx-5b04a09e4d1cbce5 flex items-center justify-between",children:[(0,r.jsx)(u.ll,{className:"flex items-center",children:"\uD83D\uDCA1 Tips for Success"}),(0,r.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5b04a09e4d1cbce5 "+"w-5 h-5 text-gray-500 transition-transform duration-200 ".concat("tips"===Z?"rotate-180":""),children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7",className:"jsx-5b04a09e4d1cbce5"})})]})}),"tips"===Z&&(0,r.jsx)(u.aY,{className:"pt-0",children:(0,r.jsxs)("ul",{className:"jsx-5b04a09e4d1cbce5 text-sm text-gray-600 space-y-3",children:[(0,r.jsxs)("li",{className:"jsx-5b04a09e4d1cbce5 flex items-start",children:[(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-green-600 mr-2",children:"✓"}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5",children:"Write a clear, compelling title that explains your cause"})]}),(0,r.jsxs)("li",{className:"jsx-5b04a09e4d1cbce5 flex items-start",children:[(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-green-600 mr-2",children:"✓"}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5",children:"Explain why this issue matters and what change you want to see"})]}),(0,r.jsxs)("li",{className:"jsx-5b04a09e4d1cbce5 flex items-start",children:[(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-green-600 mr-2",children:"✓"}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5",children:"Choose a realistic signature goal to start with"})]}),(0,r.jsxs)("li",{className:"jsx-5b04a09e4d1cbce5 flex items-start",children:[(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-green-600 mr-2",children:"✓"}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5",children:"Add photos or videos to make your petition more engaging"})]}),(0,r.jsxs)("li",{className:"jsx-5b04a09e4d1cbce5 flex items-start",children:[(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5 text-green-600 mr-2",children:"✓"}),(0,r.jsx)("span",{className:"jsx-5b04a09e4d1cbce5",children:"Share your petition with friends and family to get initial support"})]})]})})]})]})]})]}),(0,r.jsx)(c.Z,{})]}):null}},3525:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d},useAuth:function(){return c}});var r=s(7437),i=s(2265),a=s(7065),n=s(8121),o=s(1221);let l=(0,i.createContext)({user:null,userProfile:null,loading:!0,isAuthenticated:!1}),c=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function d(e){let{children:t}=e,[s,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[m,h]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=null,t=(0,a.Aj)(o.auth,async t=>{if(console.log("\uD83D\uDD10 Auth state changed:",t?"User logged in":"User logged out"),c(t),h(!1),e&&(e(),e=null),t){let s=(0,n.doc)(o.db,"users",t.uid);e=(0,n.cf)(s,async e=>{if(e.exists()){var s,r,i,a,n,l,c,d;let m=e.data();if(console.log("\uD83D\uDC64 User profile updated from Firestore",{hasBio:!!m.bio,bio:m.bio,isActive:m.isActive}),!1===m.isActive){console.warn("⚠️ User account is inactive, logging out..."),await o.auth.signOut(),window.location.href="/auth/login?error=account-inactive";return}u({id:t.uid,name:m.name||t.displayName||"",email:m.email||t.email||"",phone:m.phone,photoURL:m.photoURL||t.photoURL,bio:m.bio,verifiedEmail:m.verifiedEmail||t.emailVerified||!1,verifiedPhone:m.verifiedPhone||!1,role:m.role||"user",creatorPageId:m.creatorPageId,fcmToken:m.fcmToken,fcmTokenUpdatedAt:null===(r=m.fcmTokenUpdatedAt)||void 0===r?void 0:null===(s=r.toDate)||void 0===s?void 0:s.call(r),createdAt:(null===(a=m.createdAt)||void 0===a?void 0:null===(i=a.toDate)||void 0===i?void 0:i.call(a))||new Date,updatedAt:null===(l=m.updatedAt)||void 0===l?void 0:null===(n=l.toDate)||void 0===n?void 0:n.call(l),lastLoginAt:null===(d=m.lastLoginAt)||void 0===d?void 0:null===(c=d.toDate)||void 0===c?void 0:c.call(d),isActive:!1!==m.isActive})}else u({id:t.uid,name:t.displayName||"",email:t.email||"",verifiedEmail:t.emailVerified,verifiedPhone:!1,role:"user",isActive:!0,createdAt:new Date})},e=>{console.error("Error listening to user profile:",e),u({id:t.uid,name:t.displayName||"",email:t.email||"",verifiedEmail:t.emailVerified,verifiedPhone:!1,role:"user",isActive:!0,createdAt:new Date})})}else u(null)});return()=>{t(),e&&e()}},[]),(0,r.jsx)(l.Provider,{value:{user:s,userProfile:d,loading:m,isAuthenticated:!!s},children:t})}},4890:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(7437);s(2265);var i=s(1396),a=s.n(i);function n(){return(0,r.jsx)("footer",{className:"bg-gray-900 text-white py-12 mt-auto",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"3"})}),(0,r.jsx)("span",{className:"text-xl font-bold",children:"3arida"})]}),(0,r.jsx)("p",{className:"text-gray-400",children:"Empowering Moroccan citizens to create change through petitions."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Platform"}),(0,r.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/petitions",className:"hover:text-white",children:"Discover Petitions"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/petitions/create",className:"hover:text-white",children:"Start a Petition"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/about",className:"hover:text-white",children:"About Us"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Support"}),(0,r.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/help",className:"hover:text-white",children:"Help Center"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/contact",className:"hover:text-white",children:"Contact Us"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/guidelines",className:"hover:text-white",children:"Community Guidelines"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Legal"}),(0,r.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/privacy",className:"hover:text-white",children:"Privacy Policy"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/terms",className:"hover:text-white",children:"Terms of Service"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/cookies",className:"hover:text-white",children:"Cookie Policy"})})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:(0,r.jsx)("p",{children:"\xa9 2024 3arida. All rights reserved. Made with ❤️ for Morocco."})})]})})}},5671:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},Zb:function(){return n},aY:function(){return c},ll:function(){return l}});var r=s(7437),i=s(2265),a=s(2169);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});n.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...i})});o.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});l.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...i})}).displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...i})});c.displayName="CardContent",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},472:function(){},1396:function(e,t,s){e.exports=s(5250)},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[4358,139,8218,7895,5250,6289,1094,5748,2971,4938,1744],function(){return e(e.s=3495)}),_N_E=e.O()}]);