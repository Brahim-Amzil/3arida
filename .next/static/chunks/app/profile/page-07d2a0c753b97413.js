(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{5721:function(e,s,r){Promise.resolve().then(r.bind(r,8407))},8407:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var t=r(7437),a=r(2265),n=r(4033),i=r(1069),l=r(575),o=r(3525),d=r(4182),c=r(7065),m=r(8121),u=r(1221),x=r(955);async function h(e,s){if(!s.type.startsWith("image/"))throw Error("File must be an image");if(s.size>5242880)throw Error("Image must be less than 5MB");let r=Date.now(),t=s.name.split(".").pop(),a="".concat(e,"_").concat(r,".").concat(t),n=(0,x.ref)(u.t,"profile-images/".concat(a));return await (0,x.KV)(n,s),await (0,x.getDownloadURL)(n)}async function g(e){try{let s=new URL(e),r=decodeURIComponent(s.pathname.split("/o/")[1].split("?")[0]),t=(0,x.ref)(u.t,r);await (0,x.oq)(t)}catch(e){console.error("Error deleting profile image:",e)}}var f=r(6691),p=r.n(f);function b(){var e,s;let r=(0,n.useRouter)(),x=(0,n.useSearchParams)(),{user:f,userProfile:b}=(0,o.useAuth)(),[y,j]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1),[N,k]=(0,a.useState)(""),[P,C]=(0,a.useState)("account");(0,a.useEffect)(()=>{let e=x.get("tab");e&&["account","profile","security","preferences"].includes(e)&&C(e)},[x]);let[S,V]=(0,a.useState)({name:(null==b?void 0:b.name)||(null==f?void 0:f.displayName)||"",email:(null==f?void 0:f.email)||"",phone:(null==b?void 0:b.phone)||"",bio:(null==b?void 0:b.bio)||""}),[D,L]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{b&&(console.log("\uD83D\uDD04 Syncing form data from userProfile:",{name:b.name,phone:b.phone,bio:null==b?void 0:b.bio,fullProfile:b}),V({name:b.name||(null==f?void 0:f.displayName)||"",email:(null==f?void 0:f.email)||"",phone:b.phone||"",bio:(null==b?void 0:b.bio)||""}))},[b,f]);let[z,E]=(0,a.useState)(!1),[A,F]=(0,a.useState)(!1),[U,X]=(0,a.useState)((null==b?void 0:b.photoURL)||(null==f?void 0:f.photoURL)||null);(0,a.useEffect)(()=>{(b||f)&&X((null==b?void 0:b.photoURL)||(null==f?void 0:f.photoURL)||null)},[b,f]);let R=async e=>{if(e.preventDefault(),f){j(!0),k(""),w(!1);try{console.log("\uD83D\uDCDD Updating profile with data:",{name:S.name,phone:S.phone,bio:S.bio}),S.name!==f.displayName&&await (0,c.ck)(f,{displayName:S.name});let e=(0,m.doc)(u.db,"users",f.uid);await (0,m.updateDoc)(e,{name:S.name,phone:S.phone,bio:S.bio,updatedAt:new Date}),console.log("✅ Profile updated successfully"),w(!0),setTimeout(()=>w(!1),3e3)}catch(e){console.error("❌ Error updating profile:",e),k(e.message||"Failed to update profile")}finally{j(!1)}}},M=async e=>{if(e.preventDefault(),f){if(D.newPassword!==D.confirmPassword){k("New passwords do not match."),setTimeout(()=>k(""),3e3);return}if(D.newPassword.length<6){k("New password must be at least 6 characters long."),setTimeout(()=>k(""),3e3);return}j(!0),k(""),w(!1);try{let e=c.w9.credential(f.email,D.currentPassword);await (0,c.aF)(f,e),await (0,c.gQ)(f,D.newPassword),w(!0),L({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>w(!1),3e3)}catch(s){console.error("Error updating password:",s);let e="Failed to update password.";"auth/wrong-password"===s.code&&(e="Current password is incorrect."),k(e)}finally{j(!1)}}},B=e=>{let s=e.target.name,r=e.target.value;"bio"===s&&console.log("✏️ Bio field changed:",r),V({...S,[s]:r})},T=async e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(r&&f){F(!0),k("");try{U&&await g(U);let e=await h(f.uid,r);X(e);let s=(0,m.doc)(u.db,"users",f.uid);await (0,m.updateDoc)(s,{photoURL:e,updatedAt:new Date}),await (0,c.ck)(f,{photoURL:e}),w(!0),setTimeout(()=>w(!1),3e3)}catch(e){console.error("Error uploading image:",e),k(e.message||"Failed to upload image")}finally{F(!1)}}};return(a.useEffect(()=>{f||r.push("/auth/login")},[f,r]),f)?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(i.Z,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and preferences."})]}),(v||N)&&(0,t.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat(v?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:v?"Changes saved successfully!":N}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"-mb-px flex",children:[(0,t.jsx)("button",{onClick:()=>C("account"),className:"py-4 px-6 text-sm font-medium border-b-2 ".concat("account"===P?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Account Status"}),(0,t.jsx)("button",{onClick:()=>C("profile"),className:"py-4 px-6 text-sm font-medium border-b-2 ".concat("profile"===P?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Profile Information"}),(0,t.jsx)("button",{onClick:()=>C("security"),className:"py-4 px-6 text-sm font-medium border-b-2 ".concat("security"===P?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Security"}),(0,t.jsx)("button",{onClick:()=>C("preferences"),className:"py-4 px-6 text-sm font-medium border-b-2 ".concat("preferences"===P?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Preferences"})]})}),(0,t.jsxs)("div",{className:"p-6",children:["account"===P&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Account Status Overview"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 mr-3 flex-shrink-0 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Account Type"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 capitalize",children:[(null==b?void 0:b.role)||"user"," Account"]})]})]}),(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 capitalize",children:(null==b?void 0:b.role)||"User"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 mr-3 flex-shrink-0 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Email Verification"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:f.emailVerified?"Your email is verified":"Please verify your email"})]})]}),(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(f.emailVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:f.emailVerified?"Verified":"Unverified"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 mr-3 flex-shrink-0 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Phone Verification"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(null==b?void 0:b.phoneVerified)?"Required to create and sign petitions":"Verify phone to create and sign petitions"})]})]}),(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat((null==b?void 0:b.phoneVerified)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==b?void 0:b.phoneVerified)?"Verified":"Pending"})]})]})]}),!(null==b?void 0:b.phoneVerified)&&(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Action Required"}),(0,t.jsxs)("div",{className:"flex items-center p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsx)("div",{className:"w-5 h-5 mr-3 flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Phone Verification Required"}),(0,t.jsx)("p",{className:"text-sm text-yellow-600",children:"You must verify your phone number to create or sign petitions."})]}),(0,t.jsx)(l.z,{onClick:()=>E(!0),className:"ml-4 bg-yellow-600 hover:bg-yellow-700 flex-shrink-0",children:"Verify Phone"})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Details"}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Member Since"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(null==b?void 0:null===(e=b.createdAt)||void 0===e?void 0:e.toLocaleDateString())||"Recently"})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Email Address"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:S.email})]})]})]})]})]}),"profile"===P&&(0,t.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Picture"}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)("div",{className:"relative",children:[U?(0,t.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200",children:(0,t.jsx)(p(),{src:U,alt:"Profile",width:96,height:96,className:"object-cover"})}):(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-green-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-green-600 font-bold text-3xl",children:null==f?void 0:null===(s=f.email)||void 0===s?void 0:s.charAt(0).toUpperCase()})}),A&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"profile-image",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:A?"Uploading...":"Change Photo"}),(0,t.jsx)("input",{id:"profile-image",type:"file",accept:"image/*",onChange:T,disabled:A,className:"hidden"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:S.name,onChange:B,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:S.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",id:"phone",name:"phone",value:S.phone,onChange:B,placeholder:"+212 6XX XXX XXX",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),(0,t.jsx)("textarea",{id:"bio",name:"bio",value:S.bio,onChange:B,rows:4,placeholder:"Tell us about yourself...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(l.z,{type:"submit",disabled:y,children:y?"Saving...":"Save Changes"})})]}),"security"===P&&(0,t.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,t.jsx)("input",{type:"password",id:"currentPassword",value:D.currentPassword,onChange:e=>L({...D,currentPassword:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,t.jsx)("input",{type:"password",id:"newPassword",value:D.newPassword,onChange:e=>L({...D,newPassword:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",minLength:6,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",value:D.confirmPassword,onChange:e=>L({...D,confirmPassword:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",minLength:6,required:!0})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(l.z,{type:"submit",disabled:y,children:y?"Updating...":"Update Password"})})]}),"preferences"===P&&(0,t.jsx)("div",{className:"space-y-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Account Actions"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Download Account Data"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Export your account information"})]}),(0,t.jsx)(l.z,{variant:"outline",size:"sm",children:"Download"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-red-900",children:"Delete Account"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:"Permanently delete your account and all data"})]}),(0,t.jsx)(l.z,{variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-100",children:"Delete"})]})]})]})})]})]}),z&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,t.jsx)(d.Z,{onVerified:async e=>{if(f)try{let s=(0,m.doc)(u.db,"users",f.uid);await (0,m.updateDoc)(s,{phone:e,phoneVerified:!0,updatedAt:new Date}),console.log("Phone verified and saved:",e),w(!0),E(!1),setTimeout(()=>{window.location.reload()},500)}catch(e){console.error("Error updating phone:",e),k("Failed to update phone number"),E(!1)}},onCancel:()=>E(!1)})})})]})]}):null}},4182:function(e,s,r){"use strict";r.d(s,{Z:function(){return i}});var t=r(7437),a=r(2265),n=r(575);function i(e){let{onVerified:s,onCancel:r}=e,[i,l]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,m]=(0,a.useState)("phone"),[u,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),f=async()=>{if(!i.trim()){g("Please enter a valid phone number");return}x(!0),g("");try{await new Promise(e=>setTimeout(e,1e3)),m("code")}catch(e){g("Failed to send verification code")}finally{x(!1)}},p=async()=>{if(!o.trim()){g("Please enter the verification code");return}x(!0),g("");try{await new Promise(e=>setTimeout(e,1e3)),6===o.length?s(i):g("Invalid verification code")}catch(e){g("Failed to verify code")}finally{x(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Phone Verification Required"}),"phone"===c?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Please enter your phone number to sign this petition."}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:i,onChange:e=>l(e.target.value),placeholder:"+212 6XX XXX XXX",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),h&&(0,t.jsx)("p",{className:"text-red-600 text-sm",children:h}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(n.z,{onClick:f,disabled:u,className:"flex-1",children:u?"Sending...":"Send Code"}),(0,t.jsx)(n.z,{variant:"outline",onClick:r,disabled:u,children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:["Enter the 6-digit code sent to ",i]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"123456",maxLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-center text-lg tracking-widest"})]}),h&&(0,t.jsx)("p",{className:"text-red-600 text-sm",children:h}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(n.z,{onClick:p,disabled:u,className:"flex-1",children:u?"Verifying...":"Verify"}),(0,t.jsx)(n.z,{variant:"outline",onClick:()=>m("phone"),disabled:u,children:"Back"})]})]})]})})}}},function(e){e.O(0,[358,139,682,680,396,496,691,878,69,971,938,744],function(){return e(e.s=5721)}),_N_E=e.O()}]);