(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6368],{3138:function(e,t,s){Promise.resolve().then(s.bind(s,8684))},8684:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),n=s(2265),i=s(4033),a=s(1396),l=s.n(a),o=s(8449),c=s(5671),d=s(8161);function u(e){let{petition:t,className:s=""}=e,[i,a]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),[u,x]=(0,n.useState)("30d"),h=(0,d.SB)(t.currentSignatures,t.targetSignatures);(0,n.useEffect)(()=>{m()},[t.id,u]);let m=async()=>{try{o(!0);let e={totalViews:t.viewCount,totalShares:t.shareCount,totalSignatures:t.currentSignatures,conversionRate:t.viewCount>0?t.currentSignatures/t.viewCount*100:0,shareRate:t.viewCount>0?t.shareCount/t.viewCount*100:0,dailyViews:f(t.viewCount,u),dailySignatures:f(t.currentSignatures,u),topReferrers:[{source:"Direct",count:Math.floor(.4*t.viewCount)},{source:"Facebook",count:Math.floor(.25*t.viewCount)},{source:"WhatsApp",count:Math.floor(.15*t.viewCount)},{source:"Twitter",count:Math.floor(.1*t.viewCount)},{source:"Other",count:Math.floor(.1*t.viewCount)}],demographics:{ageGroups:[{range:"18-24",count:Math.floor(.2*t.currentSignatures)},{range:"25-34",count:Math.floor(.35*t.currentSignatures)},{range:"35-44",count:Math.floor(.25*t.currentSignatures)},{range:"45-54",count:Math.floor(.15*t.currentSignatures)},{range:"55+",count:Math.floor(.05*t.currentSignatures)}],locations:[{city:"Casablanca",count:Math.floor(.3*t.currentSignatures)},{city:"Rabat",count:Math.floor(.2*t.currentSignatures)},{city:"Marrakech",count:Math.floor(.15*t.currentSignatures)},{city:"Fes",count:Math.floor(.1*t.currentSignatures)},{city:"Other",count:Math.floor(.25*t.currentSignatures)}]}};a(e)}catch(e){console.error("Error loading analytics:",e)}finally{o(!1)}},f=(e,t)=>{let s="7d"===t?7:"30d"===t?30:90,r=[];for(let t=0;t<s;t++){let t=e/s,n=.5*Math.random()+.75;r.push(Math.floor(t*n))}return r};return l?(0,r.jsx)("div",{className:"space-y-6 ".concat(s),children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded"})]})})},t))}):i?(0,r.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Petition Analytics"}),(0,r.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["7d","30d","90d"].map(e=>(0,r.jsx)("button",{onClick:()=>x(e),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(u===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"7d"===e?"7 days":"30d"===e?"30 days":"90 days"},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Views"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.totalViews.toLocaleString()})]})]})})}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Signatures"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.totalSignatures.toLocaleString()})]})]})})}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Shares"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.totalShares.toLocaleString()})]})]})})}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[i.conversionRate.toFixed(1),"%"]})]})]})})})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Ol,{children:(0,r.jsx)(c.ll,{children:"Progress Overview"})}),(0,r.jsx)(c.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-lg font-medium text-gray-900",children:[i.totalSignatures.toLocaleString()," of"," ",t.targetSignatures.toLocaleString()," signatures"]}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[h.toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,r.jsx)("div",{className:"bg-green-600 h-4 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(h,100),"%")}})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Remaining:"})," ",Math.max(0,t.targetSignatures-i.totalSignatures).toLocaleString()]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Share Rate:"})," ",i.shareRate.toFixed(1),"%"]})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Ol,{children:(0,r.jsx)(c.ll,{children:"Traffic Sources"})}),(0,r.jsx)(c.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:i.topReferrers.map((e,t)=>{let s=i.totalViews>0?e.count/i.totalViews*100:0;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(0===t?"bg-blue-500":1===t?"bg-green-500":2===t?"bg-yellow-500":3===t?"bg-purple-500":"bg-gray-500")}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.source})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count.toLocaleString()}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[s.toFixed(1),"%"]})]})]},e.source)})})})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Ol,{children:(0,r.jsx)(c.ll,{children:"Top Locations"})}),(0,r.jsx)(c.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:i.demographics.locations.map((e,t)=>{let s=i.totalSignatures>0?e.count/i.totalSignatures*100:0;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(0===t?"bg-red-500":1===t?"bg-orange-500":2===t?"bg-yellow-500":3===t?"bg-green-500":"bg-blue-500")}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.city})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count.toLocaleString()}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[s.toFixed(1),"%"]})]})]},e.city)})})})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Ol,{children:(0,r.jsx)(c.ll,{children:"Performance Insights"})}),(0,r.jsx)(c.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[i.conversionRate<2&&(0,r.jsxs)("div",{className:"flex items-start p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Low Conversion Rate"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Your conversion rate is"," ",i.conversionRate.toFixed(1),"%. Consider improving your petition description or adding compelling images."]})]})]}),i.shareRate<5&&(0,r.jsxs)("div",{className:"flex items-start p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Increase Sharing"}),(0,r.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Your share rate is ",i.shareRate.toFixed(1),"%. Encourage supporters to share your petition on social media."]})]})]}),h>=75&&(0,r.jsxs)("div",{className:"flex items-start p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Great Progress!"}),(0,r.jsxs)("p",{className:"text-sm text-green-700 mt-1",children:["You're ",h.toFixed(1),"% of the way to your goal. Keep promoting your petition to reach 100%!"]})]})]})]})})]})]}):(0,r.jsx)("div",{className:"".concat(s),children:(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"py-12 text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Failed to load analytics data"})})})})}var x=s(575),h=s(6587),m=s(8063);function f(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),s=null==e?void 0:e.id,{user:a}=(0,h.xw)(),[c,d]=(0,n.useState)(null),[f,g]=(0,n.useState)(!0),[j,v]=(0,n.useState)("");(0,n.useEffect)(()=>{a&&s&&p()},[a,s]);let p=async()=>{try{g(!0),v("");let e=await (0,m.Am)(s);if(!e){v("Petition not found");return}if(e.creatorId!==(null==a?void 0:a.uid)){v("You can only view analytics for your own petitions");return}d(e)}catch(e){console.error("Error loading petition:",e),v("Failed to load petition")}finally{g(!1)}};return f?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.default,{}),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})]}):j||!c?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.default,{}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:j}),(0,r.jsx)(x.z,{onClick:()=>t.push("/dashboard"),children:"Back to Dashboard"})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.default,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)(x.z,{variant:"outline",asChild:!0,children:(0,r.jsxs)(l(),{href:"/dashboard",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]})}),(0,r.jsx)(x.z,{variant:"outline",asChild:!0,children:(0,r.jsx)(l(),{href:"/petitions/".concat(c.id),children:"View Petition"})})]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Petition Analytics"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:c.title})]}),(0,r.jsx)(u,{petition:c})]})]})}},3525:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d},useAuth:function(){return c}});var r=s(7437),n=s(2265),i=s(7065),a=s(8121),l=s(1221);let o=(0,n.createContext)({user:null,userProfile:null,loading:!0,isAuthenticated:!1}),c=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function d(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[x,h]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=null,t=(0,i.Aj)(l.auth,async t=>{if(console.log("\uD83D\uDD10 Auth state changed:",t?"User logged in":"User logged out"),c(t),h(!1),e&&(e(),e=null),t){let s=(0,a.doc)(l.db,"users",t.uid);e=(0,a.cf)(s,async e=>{if(e.exists()){var s,r,n,i,a,o,c,d;let x=e.data();if(console.log("\uD83D\uDC64 User profile updated from Firestore",{hasBio:!!x.bio,bio:x.bio,isActive:x.isActive}),!1===x.isActive){console.warn("⚠️ User account is inactive, logging out..."),await l.auth.signOut(),window.location.href="/auth/login?error=account-inactive";return}u({id:t.uid,name:x.name||t.displayName||"",email:x.email||t.email||"",phone:x.phone,photoURL:x.photoURL||t.photoURL,bio:x.bio,verifiedEmail:x.verifiedEmail||t.emailVerified||!1,verifiedPhone:x.verifiedPhone||!1,role:x.role||"user",creatorPageId:x.creatorPageId,fcmToken:x.fcmToken,fcmTokenUpdatedAt:null===(r=x.fcmTokenUpdatedAt)||void 0===r?void 0:null===(s=r.toDate)||void 0===s?void 0:s.call(r),createdAt:(null===(i=x.createdAt)||void 0===i?void 0:null===(n=i.toDate)||void 0===n?void 0:n.call(i))||new Date,updatedAt:null===(o=x.updatedAt)||void 0===o?void 0:null===(a=o.toDate)||void 0===a?void 0:a.call(o),lastLoginAt:null===(d=x.lastLoginAt)||void 0===d?void 0:null===(c=d.toDate)||void 0===c?void 0:c.call(d),isActive:!1!==x.isActive})}else u({id:t.uid,name:t.displayName||"",email:t.email||"",verifiedEmail:t.emailVerified,verifiedPhone:!1,role:"user",isActive:!0,createdAt:new Date})},e=>{console.error("Error listening to user profile:",e),u({id:t.uid,name:t.displayName||"",email:t.email||"",verifiedEmail:t.emailVerified,verifiedPhone:!1,role:"user",isActive:!0,createdAt:new Date})})}else u(null)});return()=>{t(),e&&e()}},[]),(0,r.jsx)(o.Provider,{value:{user:s,userProfile:d,loading:x,isAuthenticated:!!s},children:t})}},5671:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},Zb:function(){return a},aY:function(){return c},ll:function(){return o}});var r=s(7437),n=s(2265),i=s(2169);let a=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});a.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},6587:function(e,t,s){"use strict";s.d(t,{Rc:function(){return o},fc:function(){return u},u2:function(){return c},xw:function(){return a}}),s(7437);var r=s(2265),n=s(4033),i=s(3525);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/auth/login",{user:t,loading:s}=(0,i.useAuth)(),a=(0,n.useRouter)();return(0,r.useEffect)(()=>{if(!s&&!t){let t=window.location.pathname,s="".concat(e,"?redirect=").concat(encodeURIComponent(t));a.push(s)}},[t,s,a,e]),{user:t,loading:s,isAuthenticated:!!t}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/dashboard",{user:s,userProfile:a,loading:l}=(0,i.useAuth)(),o=(0,n.useRouter)();return(0,r.useEffect)(()=>{if(!l){if(s)a&&!e.includes(a.role)&&o.push(t);else{let e=window.location.pathname,t="/auth/login?redirect=".concat(encodeURIComponent(e));o.push(t)}}},[s,a,l,o,e,t]),{user:s,userProfile:a,loading:l,isAuthenticated:!!s,hasRequiredRole:!!a&&e.includes(a.role)}},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard";return l(["admin"],e)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard";return l(["moderator","admin"],e)},d=(e,t)=>!!e&&t.includes(e.role),u=e=>d(e,["moderator","admin"])},1396:function(e,t,s){e.exports=s(5250)},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[4358,139,8218,7895,5250,6289,1094,5748,2971,4938,1744],function(){return e(e.s=3138)}),_N_E=e.O()}]);