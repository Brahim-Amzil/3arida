(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4369:function(e,s,r){Promise.resolve().then(r.bind(r,7736))},7736:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var i=r(7437),t=r(2265),l=r(4033),a=r(1396),n=r.n(a),d=r(1069),c=r(1659),o=r(575),x=r(5671),h=r(3525),m=r(8793),j=r(8063);function u(){var e;let s=(0,l.useRouter)(),{user:r,userProfile:a,isAuthenticated:u,loading:g}=(0,h.useAuth)(),[v,p]=(0,t.useState)([]),[N,f]=(0,t.useState)(!0),[b,y]=(0,t.useState)("");(0,t.useEffect)(()=>{g||u||s.push("/auth/login?redirect=/dashboard")},[g,u,s]),(0,t.useEffect)(()=>{r&&w()},[r]);let w=async()=>{if(r)try{f(!0),y("");let e=await (0,j.gt)(r.uid);p(e)}catch(e){console.error("Error loading user petitions:",e),y("Failed to load your petitions. Please try again.")}finally{f(!1)}},k=async()=>{try{await (0,m.kS)(),s.push("/")}catch(e){console.error("Logout error:",e)}};if(g)return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(d.Z,{}),(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)]",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})]});if(!u)return null;let L=v.reduce((e,s)=>e+s.currentSignatures,0),C=v.filter(e=>"approved"===e.status).length,z=v.filter(e=>"pending"===e.status).length;return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(d.Z,{}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back,"," ",(null==a?void 0:a.name)||(null==r?void 0:r.displayName)||(null==r?void 0:null===(e=r.email)||void 0===e?void 0:e.split("@")[0]),"!"]}),(0,i.jsx)("p",{className:"text-lg text-gray-600",children:"Manage your petitions and track their progress"})]}),(0,i.jsxs)("div",{className:"mt-4 md:mt-0 flex gap-3",children:[(0,i.jsx)(n(),{href:"/petitions/create",children:(0,i.jsx)(o.z,{children:"Create New Petition"})}),(0,i.jsx)(o.z,{variant:"outline",onClick:k,children:"Sign Out"})]})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,i.jsx)(x.Zb,{children:(0,i.jsx)(x.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Petitions"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]})]})})}),(0,i.jsx)(x.Zb,{children:(0,i.jsx)(x.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Petitions"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C})]})]})})}),(0,i.jsx)(x.Zb,{children:(0,i.jsx)(x.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z})]})]})})}),(0,i.jsx)(x.Zb,{children:(0,i.jsx)(x.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,i.jsxs)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Signatures"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:L.toLocaleString()})]})]})})})]}),(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)(x.Zb,{children:[(0,i.jsx)(x.Ol,{children:(0,i.jsx)(x.ll,{children:"Quick Actions"})}),(0,i.jsx)(x.aY,{children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsx)(n(),{href:"/petitions/create",children:(0,i.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-gray-900",children:"Create Petition"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Start a new petition"})]})]})})}),(0,i.jsx)(n(),{href:"/petitions",children:(0,i.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-gray-900",children:"Discover Petitions"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Browse all petitions"})]})]})})}),(0,i.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-gray-900",children:"Profile Settings"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your account"})]})]})})]})})]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Petitions"}),(0,i.jsx)(o.z,{asChild:!0,variant:"outline",children:(0,i.jsx)(n(),{href:"/petitions/create",children:"Create New"})})]}),N&&(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[void 0,void 0,void 0].map((e,s)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse",children:[(0,i.jsx)("div",{className:"h-48 bg-gray-200"}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,i.jsx)("div",{className:"h-2 bg-gray-200 rounded mb-2"}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"}),(0,i.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]})]})]},s))}),b&&(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,i.jsx)("p",{className:"text-red-600",children:b}),(0,i.jsx)(o.z,{onClick:w,className:"mt-4",variant:"outline",children:"Try Again"})]}),!N&&!b&&v.length>0&&(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(e=>(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(c.Z,{petition:e,variant:"grid",showProgress:!0,showCreator:!1,showActions:!0}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)(n(),{href:"/dashboard/analytics/".concat(e.id),className:"bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-700 p-2 rounded-full shadow-sm transition-all",title:"View Analytics",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})})]},e.id))}),!N&&!b&&0===v.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No petitions yet"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't created any petitions yet. Start your first petition to make change happen!"}),(0,i.jsx)(o.z,{asChild:!0,children:(0,i.jsx)(n(),{href:"/petitions/create",children:"Create Your First Petition"})})]})]})]})]})}}},function(e){e.O(0,[358,139,218,682,680,396,496,340,691,878,69,63,659,971,938,744],function(){return e(e.s=4369)}),_N_E=e.O()}]);