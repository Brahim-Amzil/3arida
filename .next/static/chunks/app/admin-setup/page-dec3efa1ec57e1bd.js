(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{8946:function(e,s,t){Promise.resolve().then(t.bind(t,9897))},9897:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var i=t(7437),a=t(2265),n=t(3525),l=t(8121),r=t(1221),d=t(575),c=t(5671),o=t(1069);function m(){let{user:e,userProfile:s}=(0,n.useAuth)(),[t,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),h=async()=>{if(!e){x("❌ You must be logged in to become an admin");return}m(!0),x("");try{var s;let t=(0,l.doc)(r.db,"users",e.uid),i=await (0,l.getDoc)(t),a=i.exists()?i.data():{};await (0,l.setDoc)(t,{...a,id:e.uid,name:a.name||e.displayName||(null===(s=e.email)||void 0===s?void 0:s.split("@")[0])||"Admin",email:e.email||"",role:"admin",verifiedEmail:e.emailVerified||!1,verifiedPhone:a.verifiedPhone||!1,isActive:!0,createdAt:a.createdAt||new Date,updatedAt:new Date,lastLoginAt:new Date},{merge:!0}),x("✅ Success! You are now an admin. Refresh the page to see admin features."),setTimeout(()=>{window.location.reload()},2e3)}catch(e){console.error("Error making user admin:",e),x("❌ Failed to make you an admin. Check console for details.")}finally{m(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(o.Z,{}),(0,i.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:(0,i.jsxs)(c.Zb,{children:[(0,i.jsx)(c.Ol,{children:(0,i.jsx)(c.ll,{className:"text-2xl text-center",children:"\uD83D\uDD27 Admin Setup"})}),(0,i.jsxs)(c.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Use this page to set up admin access for petition moderation."}),e?(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,i.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,i.jsx)("strong",{children:"Current User:"})," ",e.email]}),(0,i.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,i.jsx)("strong",{children:"Current Role:"})," ",(null==s?void 0:s.role)||"user"]})]}):(0,i.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6",children:(0,i.jsx)("p",{className:"text-yellow-800",children:"⚠️ You must be logged in to use this page"})})]}),u&&(0,i.jsx)("div",{className:"p-4 rounded-lg ".concat(u.includes("✅")?"bg-green-50 text-green-800":u.includes("❌")?"bg-red-50 text-red-800":"bg-yellow-50 text-yellow-800"),children:u}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(d.z,{onClick:h,disabled:t||!e,className:"w-full",size:"lg",children:t?"Setting up...":"\uD83D\uDC51 Make Me Admin"}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"This will give you admin access to approve/reject petitions"})})]}),(0,i.jsxs)("div",{className:"border-t pt-6",children:[(0,i.jsx)("h3",{className:"font-semibold mb-4",children:"After becoming admin, you can:"}),(0,i.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,i.jsxs)("li",{children:["• Access the admin dashboard at ",(0,i.jsx)("code",{children:"/admin"})]}),(0,i.jsx)("li",{children:"• Approve or reject pending petitions"}),(0,i.jsx)("li",{children:"• Manage users and their roles"}),(0,i.jsx)("li",{children:"• View platform statistics"}),(0,i.jsx)("li",{children:"• Moderate content and comments"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDEA8 Security Note"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"In production, admin access should be granted through a secure process. This setup page is for development/testing purposes only."})]})]})]})})]})}}},function(e){e.O(0,[358,139,682,680,396,496,878,69,971,938,744],function(){return e(e.s=8946)}),_N_E=e.O()}]);