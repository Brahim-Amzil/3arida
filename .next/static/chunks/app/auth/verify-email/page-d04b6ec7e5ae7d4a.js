(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{1979:function(e,s,r){Promise.resolve().then(r.bind(r,8622))},8622:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var i=r(7437),a=r(2265),l=r(4033),n=r(1396),t=r.n(n),d=r(7065),c=r(1069),o=r(575),m=r(5671),x=r(3525),h=r(1221);function u(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),{user:r,loading:n}=(0,x.useAuth)(),[u,j]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),[y,N]=(0,a.useState)(!1),p=null==s?void 0:s.get("mode"),w=null==s?void 0:s.get("oobCode");(0,a.useEffect)(()=>{"verifyEmail"===p&&w&&k(w)},[p,w]);let k=async s=>{try{j(!0),g(""),await (0,d.iA)(h.auth,s),b("Email verified successfully! You can now access all features."),setTimeout(()=>{e.push("/dashboard")},3e3)}catch(e){console.error("Email verification error:",e),g("Invalid or expired verification link. Please request a new one.")}finally{j(!1)}},C=async()=>{if(!r){g("Please sign in to send verification email.");return}try{j(!0),g(""),await (0,d.w$)(r),N(!0),b("Verification email sent! Please check your inbox.")}catch(e){console.error("Send verification error:",e),g("Failed to send verification email. Please try again.")}finally{j(!1)}};return n?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(c.Z,{}),(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)]",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})]}):"verifyEmail"===p&&w?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(c.Z,{}),(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] py-12 px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"max-w-md w-full",children:(0,i.jsxs)(m.Zb,{children:[(0,i.jsx)(m.Ol,{children:(0,i.jsx)(m.ll,{className:"text-center",children:u?"Verifying Email...":v?"Email Verified!":"Verification Failed"})}),(0,i.jsxs)(m.aY,{className:"text-center",children:[u&&(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),(0,i.jsx)("span",{className:"ml-3 text-gray-600",children:"Verifying your email..."})]}),v&&(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,i.jsx)("p",{className:"text-green-600 mb-4",children:v}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Redirecting to dashboard..."})]}),f&&(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,i.jsx)("p",{className:"text-red-600 mb-4",children:f}),(0,i.jsx)(o.z,{asChild:!0,children:(0,i.jsx)(t(),{href:"/auth/login",children:"Back to Login"})})]})]})]})})})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(c.Z,{}),(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] py-12 px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"max-w-md w-full",children:(0,i.jsxs)(m.Zb,{children:[(0,i.jsx)(m.Ol,{children:(0,i.jsx)(m.ll,{className:"text-center",children:"Verify Your Email"})}),(0,i.jsx)(m.aY,{children:r?r.emailVerified?(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Email Already Verified"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Your email address has been verified successfully."}),(0,i.jsx)(o.z,{asChild:!0,children:(0,i.jsx)(t(),{href:"/dashboard",children:"Go to Dashboard"})})]}):(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Check Your Email"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-4",children:["We need to verify your email address:"," ",(0,i.jsx)("strong",{children:r.email})]}),v&&(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-4",children:(0,i.jsx)("p",{className:"text-green-600 text-sm",children:v})}),f&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:(0,i.jsx)("p",{className:"text-red-600 text-sm",children:f})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(o.z,{onClick:C,disabled:u||y,className:"w-full",children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):y?"Verification Email Sent":"Send Verification Email"}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,i.jsx)("p",{children:"Didn't receive the email?"}),(0,i.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,i.jsx)("li",{children:"• Check your spam/junk folder"}),(0,i.jsxs)("li",{children:["• Make sure ",r.email," is correct"]}),(0,i.jsx)("li",{children:"• Wait a few minutes and try again"})]})]}),(0,i.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,i.jsx)(o.z,{variant:"outline",asChild:!0,className:"w-full",children:(0,i.jsx)(t(),{href:"/dashboard",children:"Continue to Dashboard"})}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Some features may be limited until email is verified"})]})]})]}):(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to verify your email address."}),(0,i.jsx)(o.z,{asChild:!0,children:(0,i.jsx)(t(),{href:"/auth/login",children:"Sign In"})})]})})]})})})]})}}},function(e){e.O(0,[358,139,682,680,396,496,878,69,971,938,744],function(){return e(e.s=1979)}),_N_E=e.O()}]);