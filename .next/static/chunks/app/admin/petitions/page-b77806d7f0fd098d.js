(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{5531:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(2265);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:n,iconNode:c,...u},h)=>(0,r.createElement)("svg",{ref:h,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:l("lucide",i),...!n&&!d(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...i},d)=>(0,r.createElement)(c,{ref:d,iconNode:t,className:l(`lucide-${a(n(e))}`,`lucide-${e}`,s),...i}));return s.displayName=n(e),s}},2442:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(5531).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3101:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(5531).Z)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},1138:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(5531).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(5531).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2865:function(e,t,s){Promise.resolve().then(s.bind(s,5946))},5946:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(7437),a=s(2265),i=s(1396),n=s.n(i),l=s(1069),d=s(5671),o=s(575),c=s(6587),u=s(2442),h=s(3101),m=s(2549),x=s(1138),p=s(8121),g=s(1221),v=s(9289);function f(e){let{petition:t,onUpdate:s,size:i="default",layout:n="horizontal",moderatorId:l}=e,[d,c]=(0,a.useState)(""),f=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r&&!confirm("Are you sure you want to ".concat(e," this petition?")))return;let i="";if(a){let t="delete"===e?"Reason for deletion (required):":"Reason for ".concat(e," (optional):");if(i=prompt(t)||"","delete"===e&&!i.trim()){alert("A reason is required for deletion.");return}}c(e);try{let r=new Date,a={updatedAt:p.Timestamp.fromDate(r)};switch(e){case"approve":a.status="approved",a.approvedAt=p.Timestamp.fromDate(r);break;case"reject":a.status="rejected",a.rejectedAt=p.Timestamp.fromDate(r);break;case"pause":a.status="paused",a.pausedAt=p.Timestamp.fromDate(r);break;case"delete":a.status="deleted",a.deletedAt=p.Timestamp.fromDate(r),a.isActive=!1}l&&(a.moderatedBy=l),i&&(a.moderatorNotes=i),await (0,p.updateDoc)((0,p.doc)(g.db,"petitions",t.id),a);let n={...t,status:a.status,updatedAt:r,moderatedBy:a.moderatedBy,moderationNotes:a.moderationNotes,isActive:void 0!==a.isActive?a.isActive:t.isActive};a.approvedAt&&(n.approvedAt=r),a.rejectedAt&&(n.rejectedAt=r),a.pausedAt&&(n.pausedAt=r),a.deletedAt&&(n.deletedAt=r);try{await (0,v.t8)(t.id,t.creatorId,t.title,a.status,i)}catch(e){console.error("Error sending notification:",e)}s&&s(n);let d="delete"===e?"deleted":"".concat(e,"d");alert("Petition ".concat(d," successfully!"))}catch(t){console.error("Error ".concat(e,"ing petition:"),t),alert("Error ".concat(e,"ing petition. Please try again."))}finally{c("")}};return(0,r.jsxs)("div",{className:"vertical"===n?"flex flex-col gap-2":"flex flex-wrap gap-2",children:[(0,r.jsxs)(o.z,{size:i,onClick:()=>f("approve"),disabled:"approve"===d||""!==d||"approved"===t.status,className:"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-300 disabled:text-gray-500",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"approve"===d?"Approving...":"Approve"]}),(0,r.jsxs)(o.z,{size:i,onClick:()=>f("pause",!1,!0),disabled:"pause"===d||""!==d||"paused"===t.status||"deleted"===t.status,variant:"outline",className:"text-orange-600 border-orange-300 hover:bg-orange-50 disabled:text-gray-500 disabled:border-gray-300",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"pause"===d?"Pausing...":"Pause"]}),(0,r.jsxs)(o.z,{size:i,onClick:()=>f("reject",!0,!0),disabled:"reject"===d||""!==d||"rejected"===t.status||"deleted"===t.status,variant:"destructive",className:"disabled:bg-gray-300 disabled:text-gray-500",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"reject"===d?"Rejecting...":"Reject"]}),(0,r.jsxs)(o.z,{size:i,onClick:()=>f("delete",!0,!0),disabled:"delete"===d||""!==d||"deleted"===t.status,variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50 disabled:text-gray-500 disabled:border-gray-300",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"delete"===d?"Deleting...":"Delete"]}),d&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mt-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-2"}),"Processing..."]})]})}function j(){let{user:e,userProfile:t,loading:i,hasRequiredRole:u}=(0,c.u2)(),[h,m]=(0,a.useState)([]),[x,v]=(0,a.useState)([]),[j,b]=(0,a.useState)(!0),[y,N]=(0,a.useState)(""),[w,k]=(0,a.useState)("pending"),[A,C]=(0,a.useState)(""),[z,D]=(0,a.useState)("all"),[L,R]=(0,a.useState)(1),[M]=(0,a.useState)(10),[q,E]=(0,a.useState)([]),[S,Z]=(0,a.useState)(0);(0,a.useEffect)(()=>{!i&&u&&(P(),I())},[i,u]),(0,a.useEffect)(()=>{x.length>0&&B(x,w,A,z)},[w,A,z]),(0,a.useEffect)(()=>{R(1)},[w,A,z]);let B=(e,t,s,r)=>{let a=e;if("all"!==t&&(a=a.filter(e=>e.status===t)),"all"!==r&&(a=a.filter(e=>e.category===r)),s.trim()){let e=s.toLowerCase(),t=s.toUpperCase();a=a.filter(s=>{var r,a;return s.title.toLowerCase().includes(e)||s.description.toLowerCase().includes(e)||s.category.toLowerCase().includes(e)||(null===(r=s.publisherName)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(a=s.referenceCode)||void 0===a?void 0:a.toUpperCase().includes(t))})}m(a)},P=async()=>{try{b(!0),N("");let e=(0,p.collection)(g.db,"petitions"),t=(0,p.query)(e,(0,p.orderBy)("createdAt","desc")),s=await (0,p.getDocs)(t),r=[];s.forEach(e=>{var t,s,a,i;let n=e.data(),l={id:e.id,...n,createdAt:(null===(s=n.createdAt)||void 0===s?void 0:null===(t=s.toDate)||void 0===t?void 0:t.call(s))||new Date,updatedAt:(null===(i=n.updatedAt)||void 0===i?void 0:null===(a=i.toDate)||void 0===a?void 0:a.call(i))||new Date};r.push(l)}),v(r),B(r,w,A,z)}catch(e){console.error("Error loading petitions:",e),N("Failed to load petitions")}finally{b(!1)}},I=async()=>{try{let e=(0,p.collection)(g.db,"deletionRequests"),t=(0,p.query)(e,(0,p.where)("status","==","pending"),(0,p.orderBy)("createdAt","desc")),s=await (0,p.getDocs)(t),r=[];s.forEach(e=>{var t,s;r.push({id:e.id,...e.data(),createdAt:(null===(s=e.data().createdAt)||void 0===s?void 0:null===(t=s.toDate)||void 0===t?void 0:t.call(s))||new Date})}),E(r),Z(r.length)}catch(e){console.error("Error loading deletion requests:",e)}},T=async(e,r)=>{if(confirm("Approve this deletion request? The petition will be deleted."))try{let{updateDoc:a,doc:i,Timestamp:n,getDoc:l}=await Promise.resolve().then(s.bind(s,8121)),{notifyDeletionRequestApproved:d}=await Promise.resolve().then(s.bind(s,9289)),o=(await l(i(g.db,"petitions",r))).data();if(await a(i(g.db,"petitions",r),{status:"deleted",deletedAt:n.now(),deletedBy:null==t?void 0:t.id}),await a(i(g.db,"deletionRequests",e),{status:"approved",approvedAt:n.now(),approvedBy:null==t?void 0:t.id}),null==o?void 0:o.publisherId)try{await d(o.publisherId,o.title,r)}catch(e){console.error("Error sending notification:",e)}alert("Deletion request approved"),I(),P()}catch(e){console.error("Error approving deletion:",e),alert("Failed to approve deletion request")}},U=async e=>{let r=prompt("Reason for denying this deletion request (optional):");if(null!==r)try{let{updateDoc:a,doc:i,Timestamp:n,getDoc:l}=await Promise.resolve().then(s.bind(s,8121)),{notifyDeletionRequestDenied:d}=await Promise.resolve().then(s.bind(s,9289)),o=(await l(i(g.db,"deletionRequests",e))).data();if(await a(i(g.db,"deletionRequests",e),{status:"denied",deniedAt:n.now(),deniedBy:null==t?void 0:t.id,denialReason:r||"No reason provided"}),null==o?void 0:o.creatorId)try{await d(o.creatorId,o.petitionTitle,o.petitionId,r||"No reason provided")}catch(e){console.error("Error sending notification:",e)}alert("Deletion request denied"),I()}catch(e){console.error("Error denying deletion:",e),alert("Failed to deny deletion request")}};return i?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(l.Z,{}),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})]}):u?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(l.Z,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,r.jsx)(o.z,{variant:"outline",asChild:!0,children:(0,r.jsxs)(n(),{href:"/admin",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Petition Moderation"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Review and manage petitions on the platform"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by title, description, category, publisher, or reference code (e.g., AB1234)...",value:A,onChange:e=>C(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,r.jsxs)("select",{value:z,onChange:e=>D(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,r.jsx)("option",{value:"all",children:"All Categories"}),Array.from(new Set(x.map(e=>e.category))).sort().map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(A||"all"!==z)&&(0,r.jsx)(o.z,{variant:"outline",onClick:()=>{C(""),D("all")},children:"Clear"})]})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{key:"pending",label:"Pending Review",count:x.filter(e=>"pending"===e.status).length},{key:"approved",label:"Approved",count:x.filter(e=>"approved"===e.status).length},{key:"paused",label:"Paused",count:x.filter(e=>"paused"===e.status).length},{key:"archived",label:"Archived",count:x.filter(e=>"archived"===e.status).length},{key:"deleted",label:"Deleted",count:x.filter(e=>"deleted"===e.status).length},{key:"deletion-requests",label:"Deletion Requests",count:S},{key:"all",label:"All Petitions",count:x.length}].map(e=>(0,r.jsxs)("button",{onClick:()=>k(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(w===e.key?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label,!j&&(0,r.jsx)("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2.5 rounded-full text-xs",children:e.count})]},e.key))})})}),j?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(d.Zb,{children:(0,r.jsx)(d.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})},t))}):y?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsx)("p",{className:"text-red-600",children:y}),(0,r.jsx)(o.z,{onClick:P,className:"mt-4",variant:"outline",children:"Try Again"})]}):"deletion-requests"===w?0===q.length?(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"py-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No deletion requests"}),(0,r.jsx)("p",{className:"text-gray-600",children:"There are no pending deletion requests at this time."})]})}):(0,r.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,r.jsx)(d.Zb,{className:"border-orange-200 bg-orange-50",children:(0,r.jsx)(d.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.petitionTitle}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Petition ID:"})," ",e.petitionId]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Current Signatures:"})," ",e.currentSignatures]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Requested:"})," ",e.createdAt.toLocaleDateString()]}),(0,r.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-orange-200",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"Reason:"}),(0,r.jsx)("p",{className:"text-gray-700",children:e.reason})]})]})]}),(0,r.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:[(0,r.jsx)(o.z,{onClick:()=>T(e.id,e.petitionId),className:"bg-red-600 hover:bg-red-700",size:"sm",children:"Approve Deletion"}),(0,r.jsx)(o.z,{onClick:()=>U(e.id),variant:"outline",size:"sm",children:"Deny Request"}),(0,r.jsx)(o.z,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsx)(n(),{href:"/petitions/".concat(e.petitionId),children:"View Petition"})})]})]})})},e.id))}):0===h.length?(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"py-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No petitions found"}),(0,r.jsx)("p",{className:"text-gray-600",children:A||"all"!==z?"No petitions match your search criteria.":"pending"===w?"No petitions are pending review.":"No ".concat(w," petitions found.")})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-6",children:h.slice((L-1)*M,L*M).map(e=>(0,r.jsx)(d.Zb,{children:(0,r.jsx)(d.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.mediaUrls&&e.mediaUrls.length>0?(0,r.jsx)("img",{src:e.mediaUrls[0],alt:e.title,className:"w-48 h-32 object-cover rounded-lg"}):(0,r.jsx)("div",{className:"w-48 h-32 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(n(),{href:"/admin/petitions/".concat(e.id),children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 hover:text-green-600 cursor-pointer",children:e.title})}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"paused"===e.status?"bg-red-100 text-red-800":"deleted"===e.status?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Category:"}),(0,r.jsx)("br",{}),e.category]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Signatures:"}),(0,r.jsx)("br",{}),e.currentSignatures," /"," ",e.targetSignatures]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Created:"}),(0,r.jsx)("br",{}),e.createdAt.toLocaleDateString()]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Tier:"}),(0,r.jsx)("br",{}),e.pricingTier]})]}),e.moderationNotes&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("span",{className:"font-medium",children:"Moderator Notes:"})," ",e.moderationNotes]})})]}),(0,r.jsxs)("div",{className:"ml-6 flex flex-col gap-2",children:[(0,r.jsx)(o.z,{size:"sm",variant:"outline",asChild:!0,children:(0,r.jsx)(n(),{href:"/admin/petitions/".concat(e.id),children:"Review"})}),(0,r.jsx)(f,{petition:e,onUpdate:t=>{m(s=>s.map(s=>s.id===e.id?t:s)),"all"!==w&&t.status!==e.status&&P()},size:"sm",layout:"vertical",moderatorId:null==t?void 0:t.id})]})]})})]})})},e.id))}),h.length>M&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-between border-t border-gray-200 pt-6",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing"," ",(0,r.jsx)("span",{className:"font-medium",children:(L-1)*M+1})," ","to"," ",(0,r.jsx)("span",{className:"font-medium",children:Math.min(L*M,h.length)})," ","of ",(0,r.jsx)("span",{className:"font-medium",children:h.length})," ","results"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===L,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,r.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.ceil(h.length/M)},(e,t)=>t+1).filter(e=>{let t=Math.ceil(h.length/M);return 1===e||e===t||e>=L-1&&e<=L+1}).map((e,t,s)=>(0,r.jsxs)(a.Fragment,{children:[t>0&&s[t-1]!==e-1&&(0,r.jsx)("span",{className:"px-2 py-1 text-gray-500",children:"..."}),(0,r.jsx)(o.z,{variant:L===e?"default":"outline",size:"sm",onClick:()=>R(e),className:L===e?"bg-green-600 hover:bg-green-700":"",children:e})]},e))}),(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>R(e=>Math.min(Math.ceil(h.length/M),e+1)),disabled:L===Math.ceil(h.length/M),children:["Next",(0,r.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})]}):null}},6587:function(e,t,s){"use strict";s.d(t,{Rc:function(){return d},fc:function(){return u},u2:function(){return o},xw:function(){return n}}),s(7437);var r=s(2265),a=s(4033),i=s(3525);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/auth/login",{user:t,loading:s}=(0,i.useAuth)(),n=(0,a.useRouter)();return(0,r.useEffect)(()=>{if(!s&&!t){let t=window.location.pathname,s="".concat(e,"?redirect=").concat(encodeURIComponent(t));n.push(s)}},[t,s,n,e]),{user:t,loading:s,isAuthenticated:!!t}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/dashboard",{user:s,userProfile:n,loading:l}=(0,i.useAuth)(),d=(0,a.useRouter)();return(0,r.useEffect)(()=>{if(!l){if(s)n&&!e.includes(n.role)&&d.push(t);else{let e=window.location.pathname,t="/auth/login?redirect=".concat(encodeURIComponent(e));d.push(t)}}},[s,n,l,d,e,t]),{user:s,userProfile:n,loading:l,isAuthenticated:!!s,hasRequiredRole:!!n&&e.includes(n.role)}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard";return l(["admin"],e)},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard";return l(["moderator","admin"],e)},c=(e,t)=>!!e&&t.includes(e.role),u=e=>c(e,["moderator","admin"])}},function(e){e.O(0,[358,139,682,680,396,496,878,69,971,938,744],function(){return e(e.s=2865)}),_N_E=e.O()}]);