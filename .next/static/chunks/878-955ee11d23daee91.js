"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{3525:function(e,r,t){t.r(r),t.d(r,{default:function(){return l},useAuth:function(){return d}});var a=t(7437),i=t(2265),o=t(7065),n=t(8121),s=t(1221);let u=(0,i.createContext)({user:null,userProfile:null,loading:!0,isAuthenticated:!1}),d=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function l(e){let{children:r}=e,[t,d]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[f,h]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=null,r=(0,o.Aj)(s.auth,async r=>{if(console.log("\uD83D\uDD10 Auth state changed:",r?"User logged in":"User logged out"),d(r),h(!1),e&&(e(),e=null),r){let t=(0,n.doc)(s.db,"users",r.uid);e=(0,n.cf)(t,e=>{if(e.exists()){var t,a,i,o,n,s;let u=e.data();console.log("\uD83D\uDC64 User profile updated from Firestore",{hasBio:!!u.bio,bio:u.bio}),c({id:r.uid,name:u.name||r.displayName||"",email:u.email||r.email||"",phone:u.phone,verifiedEmail:u.verifiedEmail||!1,verifiedPhone:u.verifiedPhone||!1,role:u.role||"user",creatorPageId:u.creatorPageId,createdAt:(null===(a=u.createdAt)||void 0===a?void 0:null===(t=a.toDate)||void 0===t?void 0:t.call(a))||new Date,updatedAt:null===(o=u.updatedAt)||void 0===o?void 0:null===(i=o.toDate)||void 0===i?void 0:i.call(o),lastLoginAt:null===(s=u.lastLoginAt)||void 0===s?void 0:null===(n=s.toDate)||void 0===n?void 0:n.call(s),isActive:!1!==u.isActive,...(u.bio||u.photoURL)&&{bio:u.bio,photoURL:u.photoURL}})}else c({id:r.uid,name:r.displayName||"",email:r.email||"",verifiedEmail:r.emailVerified,verifiedPhone:!1,role:"user",isActive:!0,createdAt:new Date})},e=>{console.error("Error listening to user profile:",e),c({id:r.uid,name:r.displayName||"",email:r.email||"",verifiedEmail:r.emailVerified,verifiedPhone:!1,role:"user",isActive:!0,createdAt:new Date})})}else c(null)});return()=>{r(),e&&e()}},[]),(0,a.jsx)(u.Provider,{value:{user:t,userProfile:l,loading:f,isAuthenticated:!!t},children:r})}},575:function(e,r,t){t.d(r,{z:function(){return d}});var a=t(7437),i=t(2265),o=t(4949),n=t(6061),s=t(2169);let u=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,r)=>{let{className:t,variant:i,size:n,asChild:d=!1,...l}=e,c=d?o.g7:"button";return(0,a.jsx)(c,{className:(0,s.cn)(u({variant:i,size:n,className:t})),ref:r,...l})});d.displayName="Button"},5671:function(e,r,t){t.d(r,{Ol:function(){return s},Zb:function(){return n},aY:function(){return d},ll:function(){return u}});var a=t(7437),i=t(2265),o=t(2169);let n=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});n.displayName="Card";let s=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...i})});s.displayName="CardHeader";let u=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("h3",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});u.displayName="CardTitle",i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("p",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...i})}).displayName="CardDescription";let d=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...i})});d.displayName="CardContent",i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...i})}).displayName="CardFooter"},8793:function(e,r,t){t.d(r,{Cb:function(){return s},fZ:function(){return n},kS:function(){return u}});var a=t(7065),i=t(8121);t(5496);var o=t(1221);let n=async e=>{try{let r=await (0,a.e5)(o.auth,e.email,e.password);return await l(r.user.uid),r}catch(e){throw console.error("Login error:",e),Error(c(e.code))}},s=async()=>{try{let e=new a.hJ,r=await (0,a.rh)(o.auth,e);return(await (0,i.getDoc)((0,i.doc)(o.db,"users",r.user.uid))).exists()||(await d(r.user,{name:r.user.displayName||"",email:r.user.email||""}),await (0,i.updateDoc)((0,i.doc)(o.db,"users",r.user.uid),{verifiedEmail:!0,updatedAt:new Date})),await l(r.user.uid),r}catch(e){throw console.error("Google login error:",e),Error(c(e.code))}},u=async()=>{try{await (0,a.w7)(o.auth)}catch(e){throw console.error("Logout error:",e),Error("Failed to logout")}},d=async(e,r)=>{try{let t=(0,i.doc)(o.db,"users",e.uid);if(!(await (0,i.getDoc)(t)).exists()){let{name:a,email:o}=r,n=new Date;await (0,i.setDoc)(t,{id:e.uid,name:a,email:o,phone:e.phoneNumber||null,verifiedEmail:!1,verifiedPhone:!1,role:"user",creatorPageId:null,lastLoginAt:n,createdAt:n,updatedAt:n,isActive:!0})}}catch(e){throw console.error("Error creating user profile:",e),Error("Failed to create user profile")}},l=async e=>{try{let r=(0,i.doc)(o.db,"users",e);await (0,i.updateDoc)(r,{lastLoginAt:new Date,updatedAt:new Date})}catch(e){console.error("Error updating login tracking:",e)}},c=e=>{switch(e){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/operation-not-allowed":return"This sign-in method is not enabled.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please try again.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":return"Sign-in was cancelled.";case"auth/invalid-phone-number":return"Please enter a valid Moroccan phone number.";case"auth/invalid-verification-code":return"Invalid verification code. Please try again.";case"auth/code-expired":return"Verification code has expired. Please request a new one.";default:return"An error occurred. Please try again."}}},1221:function(e,r,t){t.d(r,{auth:function(){return d},db:function(){return l},t:function(){return c}});var a=t(6142),i=t(7065),o=t(8121),n=t(955);let s={apiKey:"AIzaSyAhYUelLCS8ItJwaltcjtUl8HHJwp605T0",authDomain:"arida-c5faf.firebaseapp.com",projectId:"arida-c5faf",storageBucket:"arida-c5faf.firebasestorage.app",messagingSenderId:"446881275370",appId:"1:446881275370:web:283f0360cfab3556a32693"};console.log("\uD83D\uDD27 Firebase Config:",{projectId:s.projectId,authDomain:s.authDomain});let u=(0,a.initializeApp)(s),d=(0,i.getAuth)(u),l=(0,o.getFirestore)(u),c=(0,n.getStorage)(u);console.log("\uD83D\uDD27 Firestore app:",u.name),console.log("\uD83D\uDD27 Firestore project:",u.options.projectId),r.Z=u},2169:function(e,r,t){t.d(r,{cn:function(){return o}});var a=t(7042),i=t(4769);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.m6)((0,a.W)(r))}}}]);