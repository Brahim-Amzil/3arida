"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1069],{1069:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var a=r(7437),s=r(2265),n=r(1396),o=r.n(n),i=r(4033),l=r(3525),c=r(8793),d=r(575),u=r(5671),h=r(9289);function m(e){let{className:t=""}=e,{user:r}=(0,l.useAuth)(),[n,i]=(0,s.useState)([]),[c,m]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!0),f=(0,s.useRef)(null),g=n.filter(e=>!e.read).length;(0,s.useEffect)(()=>{if(!r){i([]),p(!1);return}let e=(0,h.e$)(r.uid,e=>{i(e),p(!1)});return()=>e()},[r]),(0,s.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let v=async e=>{if(!e.read)try{await (0,h.Ix)(e.id)}catch(e){console.error("Error marking notification as read:",e)}m(!1)},j=async()=>{if(r&&0!==g)try{await (0,h.Go)(r.uid)}catch(e){console.error("Error marking all notifications as read:",e)}},y=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3);return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):t<604800?"".concat(Math.floor(t/86400),"d ago"):e.toLocaleDateString()},N=e=>{var t,r,a,s,n,o;if(null===(t=e.data)||void 0===t?void 0:t.petitionId){let t="/petitions/".concat(e.data.petitionId),i=new URLSearchParams;if("petition_status_change"===e.type&&(null===(r=e.data)||void 0===r?void 0:r.newStatus)){let t=e.data.newStatus;i.append("notif",t),(null===(a=e.data)||void 0===a?void 0:a.moderatorNotes)&&i.append("reason",e.data.moderatorNotes)}else"petition_approved"===e.type?(i.append("notif","approved"),(null===(s=e.data)||void 0===s?void 0:s.moderatorNotes)&&i.append("reason",e.data.moderatorNotes)):"petition_rejected"===e.type?(i.append("notif","rejected"),(null===(n=e.data)||void 0===n?void 0:n.moderatorNotes)&&i.append("reason",e.data.moderatorNotes)):"petition_paused"===e.type&&(i.append("notif","paused"),(null===(o=e.data)||void 0===o?void 0:o.moderatorNotes)&&i.append("reason",e.data.moderatorNotes));let l=i.toString();return l?"".concat(t,"?").concat(l):t}return"/dashboard"};return r?(0,a.jsxs)("div",{className:"relative ".concat(t),ref:f,children:[(0,a.jsxs)("button",{onClick:()=>m(!c),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:[(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),g>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:g>99?"99+":g})]}),c&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:(0,a.jsxs)(u.Zb,{className:"border-0 shadow-none",children:[(0,a.jsx)(u.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(u.ll,{className:"text-lg",children:"Notifications"}),g>0&&(0,a.jsx)(d.z,{onClick:j,variant:"ghost",size:"sm",className:"text-xs",children:"Mark all read"})]})}),(0,a.jsx)(u.aY,{className:"p-0",children:x?(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600 mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Loading notifications..."})]}):0===n.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No notifications"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"You're all caught up!"})]}):(0,a.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[n.slice(0,10).map(e=>(0,a.jsx)(o(),{href:N(e),onClick:()=>v(e),className:"block px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ".concat(e.read?"":"bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"text-lg ".concat((0,h.Bm)(e.type)),children:(0,h.FQ)(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium ".concat(e.read?"text-gray-700":"text-gray-900"),children:e.title}),!e.read&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:y(e.createdAt)})]})]})},e.id)),n.length>10&&(0,a.jsx)("div",{className:"p-3 text-center border-t border-gray-100",children:(0,a.jsx)(o(),{href:"/notifications",className:"text-sm text-green-600 hover:text-green-500 font-medium",onClick:()=>m(!1),children:"View all notifications"})})]})})]})})]}):null}function x(e){var t,r;let{user:n,userProfile:i,onLogout:l}=e,[c,d]=(0,s.useState)(!1),u=(0,s.useRef)(null);return(0,s.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:"relative flex items-center space-x-4",ref:u,children:[(0,a.jsx)(m,{}),(null==i?void 0:i.role)==="admin"&&(0,a.jsxs)(o(),{href:"/admin",className:"flex items-center space-x-1 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Admin"})]}),(null==i?void 0:i.role)==="moderator"&&(0,a.jsxs)(o(),{href:"/admin/petitions",className:"flex items-center space-x-1 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Moderator"})]}),(0,a.jsxs)("button",{onClick:()=>d(!c),className:"flex items-center space-x-2 hover:bg-gray-50 rounded-lg px-3 py-2 transition-colors",children:[(null==i?void 0:i.photoURL)||(null==n?void 0:n.photoURL)?(0,a.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:(0,a.jsx)("img",{src:(null==i?void 0:i.photoURL)||(null==n?void 0:n.photoURL)||"",alt:"Profile",className:"w-full h-full object-cover"})}):(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 font-medium text-sm",children:null==n?void 0:null===(t=n.email)||void 0===t?void 0:t.charAt(0).toUpperCase()})}),(0,a.jsx)("span",{className:"text-sm text-gray-700 font-medium",children:(null==n?void 0:n.displayName)||(null==n?void 0:null===(r=n.email)||void 0===r?void 0:r.split("@")[0])}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform ".concat(c?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[(0,a.jsx)(o(),{href:"/dashboard",onClick:()=>d(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"Dashboard"})}),(0,a.jsx)(o(),{href:"/dashboard",onClick:()=>d(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"My Campaigns"})}),(null==i?void 0:i.role)==="admin"&&(0,a.jsx)(o(),{href:"/admin",onClick:()=>d(!1),className:"block px-4 py-3 text-purple-600 hover:bg-purple-50 transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"\uD83D\uDC51 Admin"})}),(0,a.jsx)(o(),{href:"/profile",onClick:()=>d(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"Profile Settings"})}),(0,a.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,a.jsx)("button",{onClick:()=>{d(!1),l()},className:"block w-full text-left px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"Sign Out"})})]})]})}var p=function(){var e,t;let{user:r,userProfile:n,isAuthenticated:u,loading:h}=(0,l.useAuth)(),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),v=(0,i.useRouter)();(0,s.useEffect)(()=>{let e=setTimeout(()=>g(!0),0);return()=>clearTimeout(e)},[]);let j=async()=>{try{await (0,c.kS)(),p(!1),v.push("/")}catch(e){console.error("Logout error:",e)}};return f?(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",suppressHydrationWarning:!0,children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(o(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"3"})}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"3arida"})]})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)(o(),{href:"/petitions",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Discover Petitions"}),(0,a.jsx)(o(),{href:"/petitions/create",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Start a Petition"}),(0,a.jsx)(o(),{href:"/pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Pricing"}),(0,a.jsx)(o(),{href:"/about",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"About"})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:h?(0,a.jsx)("div",{className:"w-8 h-8 animate-spin rounded-full border-2 border-green-600 border-t-transparent"}):u?(0,a.jsx)(x,{user:r,userProfile:n,onLogout:j}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o(),{href:"/auth/login",children:(0,a.jsx)(d.z,{variant:"ghost",size:"sm",children:"Sign In"})}),(0,a.jsx)(o(),{href:"/auth/register",children:(0,a.jsx)(d.z,{size:"sm",children:"Get Started"})})]})}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{onClick:()=>p(!m),className:"text-gray-600 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),m&&(0,a.jsx)("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)(o(),{href:"/petitions",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>p(!1),children:"Discover Petitions"}),(0,a.jsx)(o(),{href:"/petitions/create",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>p(!1),children:"Start a Petition"}),(0,a.jsx)(o(),{href:"/pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>p(!1),children:"Pricing"}),(0,a.jsx)(o(),{href:"/about",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>p(!1),children:"About"}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-200",children:h?(0,a.jsx)("div",{className:"w-8 h-8 animate-spin rounded-full border-2 border-green-600 border-t-transparent"}):u?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o(),{href:"/dashboard",onClick:()=>p(!1),children:(0,a.jsx)(d.z,{variant:"ghost",size:"sm",className:"w-full justify-start",children:"Dashboard"})}),(null==n?void 0:n.role)==="admin"&&(0,a.jsx)(o(),{href:"/admin",onClick:()=>p(!1),children:(0,a.jsx)(d.z,{variant:"ghost",size:"sm",className:"w-full justify-start text-purple-600 hover:text-purple-700",children:"\uD83D\uDC51 Admin"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 font-medium text-sm",children:null==r?void 0:null===(e=r.email)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:null==r?void 0:null===(t=r.email)||void 0===t?void 0:t.split("@")[0]})]}),(0,a.jsx)(d.z,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:j,children:"Sign Out"})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o(),{href:"/auth/login",onClick:()=>p(!1),children:(0,a.jsx)(d.z,{variant:"ghost",size:"sm",className:"w-full",children:"Sign In"})}),(0,a.jsx)(o(),{href:"/auth/register",onClick:()=>p(!1),children:(0,a.jsx)(d.z,{size:"sm",className:"w-full",children:"Get Started"})})]})})]})})]})}):(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(o(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"3"})}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"3arida"})]})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)(o(),{href:"/petitions",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Discover Petitions"}),(0,a.jsx)(o(),{href:"/petitions/create",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Start a Petition"}),(0,a.jsx)(o(),{href:"/pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Pricing"}),(0,a.jsx)(o(),{href:"/about",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"About"})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:(0,a.jsx)("div",{className:"w-8 h-8 animate-spin rounded-full border-2 border-green-600 border-t-transparent"})}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{className:"text-gray-600 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})})}},9289:function(e,t,r){r.d(t,{Bm:function(){return h},FQ:function(){return u},Go:function(){return i},Ix:function(){return o},V1:function(){return d},e$:function(){return l},notifyAdminsOfDeletionRequest:function(){return m},notifyDeletionRequestApproved:function(){return x},notifyDeletionRequestDenied:function(){return p},t8:function(){return c}});var a=r(8121),s=r(1221);let n=async(e,t,r,n,o)=>{try{let i={userId:e,type:t,title:r,message:n,data:o||{},read:!1,createdAt:a.Timestamp.fromDate(new Date)};return(await (0,a.addDoc)((0,a.collection)(s.db,"notifications"),i)).id}catch(e){throw console.error("Error creating notification:",e),Error("Failed to create notification")}},o=async e=>{try{let t=(0,a.doc)(s.db,"notifications",e);await (0,a.updateDoc)(t,{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),Error("Failed to mark notification as read")}},i=async e=>{try{let t=(0,a.collection)(s.db,"notifications"),r=(0,a.query)(t,(0,a.where)("userId","==",e),(0,a.where)("read","==",!1)),n=(await (0,a.getDocs)(r)).docs.map(e=>(0,a.updateDoc)(e.ref,{read:!0}));await Promise.all(n)}catch(e){throw console.error("Error marking all notifications as read:",e),Error("Failed to mark all notifications as read")}},l=(e,t)=>{let r=(0,a.collection)(s.db,"notifications"),n=(0,a.query)(r,(0,a.where)("userId","==",e),(0,a.orderBy)("createdAt","desc"));return(0,a.cf)(n,e=>{let r=[];e.forEach(e=>{var t;let a=e.data();r.push({id:e.id,userId:a.userId,type:a.type,title:a.title,message:a.message,data:a.data||{},read:a.read||!1,createdAt:(null===(t=a.createdAt)||void 0===t?void 0:t.toDate())||new Date})}),t(r)})},c=async(e,t,r,a,s)=>{let o="",i="";switch(a){case"approved":o="\uD83C\uDF89 Petition Approved!",i='Your petition "'.concat(r,'" has been approved and is now live.');break;case"paused":o="⏸️ Petition Paused",i='Your petition "'.concat(r,'" has been paused by moderators.');break;case"deleted":o="❌ Petition Removed",i='Your petition "'.concat(r,'" has been removed.');break;default:o="\uD83D\uDCDD Petition Status Updated",i='Your petition "'.concat(r,'" status has been updated to ').concat(a,".")}s&&(i+=" Reason: ".concat(s)),await n(t,"petition_status_change",o,i,{petitionId:e,petitionTitle:r,newStatus:a,moderatorNotes:s})},d=async(e,t,r,a,s)=>{let o='Your petition "'.concat(r,'" has reached ').concat(s,"% of its goal with ").concat(a.toLocaleString()," signatures!");await n(t,"signature_milestone","\uD83C\uDFAF Milestone Reached!",o,{petitionId:e,petitionTitle:r,currentSignatures:a,milestone:s})},u=e=>{switch(e){case"petition_approved":return"\uD83C\uDF89";case"petition_rejected":return"❌";case"petition_paused":return"⏸️";case"signature_milestone":return"\uD83C\uDFAF";case"petition_status_change":return"\uD83D\uDCDD";case"new_comment":return"\uD83D\uDCAC";case"petition_update":return"\uD83D\uDCE2";default:return"\uD83D\uDD14"}},h=e=>{switch(e){case"petition_approved":return"text-green-600";case"petition_rejected":return"text-red-600";case"petition_paused":return"text-yellow-600";case"signature_milestone":return"text-purple-600";case"petition_status_change":return"text-blue-600";case"new_comment":return"text-indigo-600";case"petition_update":return"text-orange-600";default:return"text-gray-600"}},m=async(e,t,r,o,i)=>{try{let l=(0,a.collection)(s.db,"users"),c=(0,a.query)(l,(0,a.where)("role","in",["admin","moderator"])),d=await (0,a.getDocs)(c),u=d.docs.map(a=>n(a.id,"petition_status_change","Deletion Request","".concat(r,' requested deletion of "').concat(t,'" (').concat(i," signatures). Reason: ").concat(o),{petitionId:e,petitionTitle:t,creatorId:r,reason:o,signatureCount:i,actionType:"deletion_request"}));await Promise.all(u),console.log("✅ Notified ".concat(d.size," admins of deletion request"))}catch(e){throw console.error("Error notifying admins of deletion request:",e),e}},x=async(e,t,r)=>{try{await n(r,"petition_status_change","Deletion Request Approved",'Your deletion request for "'.concat(t,'" has been approved. The petition has been removed.'),{petitionId:e,petitionTitle:t,actionType:"deletion_approved"}),console.log("✅ Notified creator of deletion approval")}catch(e){throw console.error("Error notifying creator of deletion approval:",e),e}},p=async(e,t,r,a)=>{try{await n(r,"petition_status_change","Deletion Request Denied",'Your deletion request for "'.concat(t,'" has been denied. Reason: ').concat(a),{petitionId:e,petitionTitle:t,reason:a,actionType:"deletion_denied"}),console.log("✅ Notified creator of deletion denial")}catch(e){throw console.error("Error notifying creator of deletion denial:",e),e}}}}]);