"use strict";exports.id=4454,exports.ids=[4454],exports.modules={84454:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(95344),s=r(3729),o=r(20783),i=r.n(o),n=r(22254),l=r(87382),d=r(25750),c=r(5094),u=r(23673),h=r(3913);function m({className:e=""}){let{user:t}=(0,l.useAuth)(),[r,o]=(0,s.useState)([]),[n,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!0),p=(0,s.useRef)(null),f=r.filter(e=>!e.read).length;(0,s.useEffect)(()=>{if(!t){o([]),x(!1);return}let e=(0,h.e$)(t.uid,e=>{o(e),x(!1)});return()=>e()},[t]),(0,s.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let g=async e=>{if(!e.read)try{await (0,h.Ix)(e.id)}catch(e){console.error("Error marking notification as read:",e)}d(!1)},y=async()=>{if(t&&0!==f)try{await (0,h.Go)(t.uid)}catch(e){console.error("Error marking all notifications as read:",e)}},v=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString()},b=e=>{if(e.data?.petitionId){let t=`/petitions/${e.data.petitionId}`,r=new URLSearchParams;if("petition_status_change"===e.type&&e.data?.newStatus){let t=e.data.newStatus;r.append("notif",t),e.data?.moderatorNotes&&r.append("reason",e.data.moderatorNotes)}else"petition_approved"===e.type?(r.append("notif","approved"),e.data?.moderatorNotes&&r.append("reason",e.data.moderatorNotes)):"petition_rejected"===e.type?(r.append("notif","rejected"),e.data?.moderatorNotes&&r.append("reason",e.data.moderatorNotes)):"petition_paused"===e.type&&(r.append("notif","paused"),e.data?.moderatorNotes&&r.append("reason",e.data.moderatorNotes));let a=r.toString();return a?`${t}?${a}`:t}return"/dashboard"};return t?(0,a.jsxs)("div",{className:`relative ${e}`,ref:p,children:[(0,a.jsxs)("button",{onClick:()=>d(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),f>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:f>99?"99+":f})]}),n&&a.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:(0,a.jsxs)(u.Zb,{className:"border-0 shadow-none",children:[a.jsx(u.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(u.ll,{className:"text-lg",children:"Notifications"}),f>0&&a.jsx(c.z,{onClick:y,variant:"ghost",size:"sm",className:"text-xs",children:"Mark all read"})]})}),a.jsx(u.aY,{className:"p-0",children:m?(0,a.jsxs)("div",{className:"p-4 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600 mx-auto"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading notifications..."})]}):0===r.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No notifications"}),a.jsx("p",{className:"text-xs text-gray-500",children:"You're all caught up!"})]}):(0,a.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[r.slice(0,10).map(e=>a.jsx(i(),{href:b(e),onClick:()=>g(e),className:`block px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${e.read?"":"bg-blue-50"}`,children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`text-lg ${(0,h.Bm)(e.type)}`,children:(0,h.FQ)(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:`text-sm font-medium ${e.read?"text-gray-700":"text-gray-900"}`,children:e.title}),!e.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:v(e.createdAt)})]})]})},e.id)),r.length>10&&a.jsx("div",{className:"p-3 text-center border-t border-gray-100",children:a.jsx(i(),{href:"/notifications",className:"text-sm text-green-600 hover:text-green-500 font-medium",onClick:()=>d(!1),children:"View all notifications"})})]})})]})})]}):null}function x({user:e,userProfile:t,onLogout:r}){let[o,n]=(0,s.useState)(!1),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:"relative flex items-center space-x-4",ref:l,children:[a.jsx(m,{}),t?.role==="admin"&&(0,a.jsxs)(i(),{href:"/admin",className:"flex items-center space-x-1 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),a.jsx("span",{className:"text-sm font-semibold",children:"Admin"})]}),(0,a.jsxs)("button",{onClick:()=>n(!o),className:"flex items-center space-x-2 hover:bg-gray-50 rounded-lg px-3 py-2 transition-colors",children:[t?.photoURL||e?.photoURL?a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:a.jsx("img",{src:t?.photoURL||e?.photoURL||"",alt:"Profile",className:"w-full h-full object-cover"})}):a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 font-medium text-sm",children:e?.email?.charAt(0).toUpperCase()})}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:e?.displayName||e?.email?.split("@")[0]}),a.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[a.jsx(i(),{href:"/dashboard",onClick:()=>n(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:a.jsx("div",{className:"font-medium",children:"Dashboard"})}),a.jsx(i(),{href:"/dashboard",onClick:()=>n(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:a.jsx("div",{className:"font-medium",children:"My Campaigns"})}),t?.role==="admin"&&a.jsx(i(),{href:"/admin",onClick:()=>n(!1),className:"block px-4 py-3 text-purple-600 hover:bg-purple-50 transition-colors",children:a.jsx("div",{className:"font-medium",children:"\uD83D\uDC51 Admin"})}),a.jsx(i(),{href:"/profile",onClick:()=>n(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:a.jsx("div",{className:"font-medium",children:"Profile Settings"})}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:()=>{n(!1),r()},className:"block w-full text-left px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors",children:a.jsx("div",{className:"font-medium",children:"Sign Out"})})]})]})}function p(){let{user:e,userProfile:t,isAuthenticated:r,loading:o}=(0,l.useAuth)(),[u,h]=(0,s.useState)(!1),m=(0,n.useRouter)(),p=async()=>{try{await (0,d.kS)(),h(!1),m.push("/")}catch(e){console.error("Logout error:",e)}};return a.jsx("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)(i(),{href:"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"3"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"3arida"})]})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[a.jsx(i(),{href:"/petitions",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Discover Petitions"}),a.jsx(i(),{href:"/petitions/create",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Start a Petition"}),a.jsx(i(),{href:"/pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Pricing"}),a.jsx(i(),{href:"/about",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"About"})]}),a.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o?a.jsx("div",{className:"w-8 h-8 animate-spin rounded-full border-2 border-green-600 border-t-transparent"}):r?a.jsx(x,{user:e,userProfile:t,onLogout:p}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(i(),{href:"/auth/login",children:a.jsx(c.z,{variant:"ghost",size:"sm",children:"Sign In"})}),a.jsx(i(),{href:"/auth/register",children:a.jsx(c.z,{size:"sm",children:"Get Started"})})]})}),a.jsx("div",{className:"md:hidden",children:a.jsx("button",{onClick:()=>h(!u),className:"text-gray-600 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),u&&a.jsx("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[a.jsx(i(),{href:"/petitions",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>h(!1),children:"Discover Petitions"}),a.jsx(i(),{href:"/petitions/create",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>h(!1),children:"Start a Petition"}),a.jsx(i(),{href:"/pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>h(!1),children:"Pricing"}),a.jsx(i(),{href:"/about",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",onClick:()=>h(!1),children:"About"}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:o?a.jsx("div",{className:"w-8 h-8 animate-spin rounded-full border-2 border-green-600 border-t-transparent"}):r?(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(i(),{href:"/dashboard",onClick:()=>h(!1),children:a.jsx(c.z,{variant:"ghost",size:"sm",className:"w-full justify-start",children:"Dashboard"})}),t?.role==="admin"&&a.jsx(i(),{href:"/admin",onClick:()=>h(!1),children:a.jsx(c.z,{variant:"ghost",size:"sm",className:"w-full justify-start text-purple-600 hover:text-purple-700",children:"\uD83D\uDC51 Admin"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 font-medium text-sm",children:e?.email?.charAt(0).toUpperCase()})}),a.jsx("span",{className:"text-sm text-gray-700",children:e?.email?.split("@")[0]})]}),a.jsx(c.z,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:p,children:"Sign Out"})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(i(),{href:"/auth/login",onClick:()=>h(!1),children:a.jsx(c.z,{variant:"ghost",size:"sm",className:"w-full",children:"Sign In"})}),a.jsx(i(),{href:"/auth/register",onClick:()=>h(!1),children:a.jsx(c.z,{size:"sm",className:"w-full",children:"Get Started"})})]})})]})})]})})}},5094:(e,t,r)=>{r.d(t,{z:()=>d});var a=r(95344),s=r(3729),o=r(45877),i=r(49247),n=r(11453);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...i},d)=>{let c=s?o.g7:"button";return a.jsx(c,{className:(0,n.cn)(l({variant:t,size:r,className:e})),ref:d,...i})});d.displayName="Button"},23673:(e,t,r)=>{r.d(t,{Ol:()=>n,Zb:()=>i,aY:()=>d,ll:()=>l});var a=r(95344),s=r(3729),o=r(11453);let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let n=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle",s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},25750:(e,t,r)=>{r.d(t,{Cb:()=>n,fZ:()=>i,kS:()=>l});var a=r(50815),s=r(87097);r(22569);var o=r(81012);let i=async e=>{try{let t=await (0,a.e5)(o.auth,e.email,e.password);return await c(t.user.uid),t}catch(e){throw console.error("Login error:",e),Error(u(e.code))}},n=async()=>{try{let e=new a.hJ,t=await (0,a.rh)(o.auth,e);return(await (0,s.getDoc)((0,s.doc)(o.db,"users",t.user.uid))).exists()||(await d(t.user,{name:t.user.displayName||"",email:t.user.email||""}),await (0,s.updateDoc)((0,s.doc)(o.db,"users",t.user.uid),{verifiedEmail:!0,updatedAt:new Date})),await c(t.user.uid),t}catch(e){throw console.error("Google login error:",e),Error(u(e.code))}},l=async()=>{try{await (0,a.w7)(o.auth)}catch(e){throw console.error("Logout error:",e),Error("Failed to logout")}},d=async(e,t)=>{try{let r=(0,s.doc)(o.db,"users",e.uid);if(!(await (0,s.getDoc)(r)).exists()){let{name:a,email:o}=t,i=new Date;await (0,s.setDoc)(r,{id:e.uid,name:a,email:o,phone:e.phoneNumber||null,verifiedEmail:!1,verifiedPhone:!1,role:"user",creatorPageId:null,lastLoginAt:i,createdAt:i,updatedAt:i,isActive:!0})}}catch(e){throw console.error("Error creating user profile:",e),Error("Failed to create user profile")}},c=async e=>{try{let t=(0,s.doc)(o.db,"users",e);await (0,s.updateDoc)(t,{lastLoginAt:new Date,updatedAt:new Date})}catch(e){console.error("Error updating login tracking:",e)}},u=e=>{switch(e){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/operation-not-allowed":return"This sign-in method is not enabled.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please try again.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":return"Sign-in was cancelled.";case"auth/invalid-phone-number":return"Please enter a valid Moroccan phone number.";case"auth/invalid-verification-code":return"Invalid verification code. Please try again.";case"auth/code-expired":return"Verification code has expired. Please request a new one.";default:return"An error occurred. Please try again."}}},3913:(e,t,r)=>{r.d(t,{Bm:()=>h,FQ:()=>u,Go:()=>n,Ix:()=>i,V1:()=>c,e$:()=>l,notifyAdminsOfDeletionRequest:()=>m,notifyDeletionRequestApproved:()=>x,notifyDeletionRequestDenied:()=>p,t8:()=>d});var a=r(87097),s=r(81012);let o=async(e,t,r,o,i)=>{try{let n={userId:e,type:t,title:r,message:o,data:i||{},read:!1,createdAt:a.Timestamp.fromDate(new Date)};return(await (0,a.addDoc)((0,a.collection)(s.db,"notifications"),n)).id}catch(e){throw console.error("Error creating notification:",e),Error("Failed to create notification")}},i=async e=>{try{let t=(0,a.doc)(s.db,"notifications",e);await (0,a.updateDoc)(t,{read:!0})}catch(e){throw console.error("Error marking notification as read:",e),Error("Failed to mark notification as read")}},n=async e=>{try{let t=(0,a.collection)(s.db,"notifications"),r=(0,a.query)(t,(0,a.where)("userId","==",e),(0,a.where)("read","==",!1)),o=(await (0,a.getDocs)(r)).docs.map(e=>(0,a.updateDoc)(e.ref,{read:!0}));await Promise.all(o)}catch(e){throw console.error("Error marking all notifications as read:",e),Error("Failed to mark all notifications as read")}},l=(e,t)=>{let r=(0,a.collection)(s.db,"notifications"),o=(0,a.query)(r,(0,a.where)("userId","==",e),(0,a.orderBy)("createdAt","desc"));return(0,a.cf)(o,e=>{let r=[];e.forEach(e=>{let t=e.data();r.push({id:e.id,userId:t.userId,type:t.type,title:t.title,message:t.message,data:t.data||{},read:t.read||!1,createdAt:t.createdAt?.toDate()||new Date})}),t(r)})},d=async(e,t,r,a,s)=>{let i="",n="";switch(a){case"approved":i="\uD83C\uDF89 Petition Approved!",n=`Your petition "${r}" has been approved and is now live.`;break;case"paused":i="â¸ï¸ Petition Paused",n=`Your petition "${r}" has been paused by moderators.`;break;case"deleted":i="âŒ Petition Removed",n=`Your petition "${r}" has been removed.`;break;default:i="\uD83D\uDCDD Petition Status Updated",n=`Your petition "${r}" status has been updated to ${a}.`}s&&(n+=` Reason: ${s}`),await o(t,"petition_status_change",i,n,{petitionId:e,petitionTitle:r,newStatus:a,moderatorNotes:s})},c=async(e,t,r,a,s)=>{let i=`ðŸŽ¯ Milestone Reached!`,n=`Your petition "${r}" has reached ${s}% of its goal with ${a.toLocaleString()} signatures!`;await o(t,"signature_milestone",i,n,{petitionId:e,petitionTitle:r,currentSignatures:a,milestone:s})},u=e=>{switch(e){case"petition_approved":return"\uD83C\uDF89";case"petition_rejected":return"âŒ";case"petition_paused":return"â¸ï¸";case"signature_milestone":return"\uD83C\uDFAF";case"petition_status_change":return"\uD83D\uDCDD";case"new_comment":return"\uD83D\uDCAC";case"petition_update":return"\uD83D\uDCE2";default:return"\uD83D\uDD14"}},h=e=>{switch(e){case"petition_approved":return"text-green-600";case"petition_rejected":return"text-red-600";case"petition_paused":return"text-yellow-600";case"signature_milestone":return"text-purple-600";case"petition_status_change":return"text-blue-600";case"new_comment":return"text-indigo-600";case"petition_update":return"text-orange-600";default:return"text-gray-600"}},m=async(e,t,r,i,n)=>{try{let l=(0,a.collection)(s.db,"users"),d=(0,a.query)(l,(0,a.where)("role","in",["admin","moderator"])),c=await (0,a.getDocs)(d),u=c.docs.map(a=>o(a.id,"petition_status_change","Deletion Request",`${r} requested deletion of "${t}" (${n} signatures). Reason: ${i}`,{petitionId:e,petitionTitle:t,creatorId:r,reason:i,signatureCount:n,actionType:"deletion_request"}));await Promise.all(u),console.log(`âœ… Notified ${c.size} admins of deletion request`)}catch(e){throw console.error("Error notifying admins of deletion request:",e),e}},x=async(e,t,r)=>{try{await o(r,"petition_status_change","Deletion Request Approved",`Your deletion request for "${t}" has been approved. The petition has been removed.`,{petitionId:e,petitionTitle:t,actionType:"deletion_approved"}),console.log("âœ… Notified creator of deletion approval")}catch(e){throw console.error("Error notifying creator of deletion approval:",e),e}},p=async(e,t,r,a)=>{try{await o(r,"petition_status_change","Deletion Request Denied",`Your deletion request for "${t}" has been denied. Reason: ${a}`,{petitionId:e,petitionTitle:t,reason:a,actionType:"deletion_denied"}),console.log("âœ… Notified creator of deletion denial")}catch(e){throw console.error("Error notifying creator of deletion denial:",e),e}}},11453:(e,t,r)=>{r.d(t,{cn:()=>o});var a=r(56815),s=r(79377);function o(...e){return(0,s.m6)((0,a.W)(e))}}};