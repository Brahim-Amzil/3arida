(()=>{var e={};e.id=214,e.ids=[214],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},1053:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l});var s=t(50482),a=t(69108),i=t(62563),n=t.n(i),d=t(68300),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);t.d(r,o);let l=["",{children:["admin",{children:["users",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3788)),"/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/users/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,33990)),"/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/users/[id]/page.tsx"],u="/admin/users/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/users/[id]/page",pathname:"/admin/users/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},37902:(e,r,t)=>{Promise.resolve().then(t.bind(t,73129))},97075:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var s=t(3729);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),n=e=>{let r=i(e);return r.charAt(0).toUpperCase()+r.slice(1)},d=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim(),o=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:i="",children:n,iconNode:c,...u},m)=>(0,s.createElement)("svg",{ref:m,...l,width:r,height:r,stroke:e,strokeWidth:a?24*Number(t)/Number(r):t,className:d("lucide",i),...!n&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(n)?n:[n]])),u=(e,r)=>{let t=(0,s.forwardRef)(({className:t,...i},o)=>(0,s.createElement)(c,{ref:o,iconNode:r,className:d(`lucide-${a(n(e))}`,`lucide-${e}`,t),...i}));return t.displayName=n(e),t}},66262:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},73129:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>N});var s=t(95344),a=t(3729),i=t(22254),n=t(87097),d=t(81012),o=t(5094),l=t(23673),c=t(49247),u=t(11453);let m=(0,c.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x({className:e,variant:r,...t}){return s.jsx("div",{className:(0,u.cn)(m({variant:r}),e),...t})}var p=t(97075);let h=(0,p.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),g=(0,p.Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),f=(0,p.Z)("shield-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]),v=(0,p.Z)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var b=t(66262),y=t(22569),j=t(50815);function N(){let e=(0,i.useParams)(),r=(0,i.useRouter)(),[t]=(0,y.F_)((0,j.getAuth)()),[c,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(!0),[N,w]=(0,a.useState)(!1),A=e.id;(0,a.useEffect)(()=>{if(!t){r.push("/auth/login");return}k()},[t,A]);let k=async()=>{try{let e=await (0,n.getDoc)((0,n.doc)(d.db,"users",A));if(!e.exists()){console.error("User not found"),r.push("/admin/users");return}let t={id:e.id,...e.data()},s=(0,n.query)((0,n.collection)(d.db,"petitions"),(0,n.where)("creatorId","==",A)),a=await (0,n.getDocs)(s);t.petitionCount=a.size;let i=(0,n.query)((0,n.collection)(d.db,"signatures"),(0,n.where)("userId","==",A)),o=await (0,n.getDocs)(i);t.signatureCount=o.size,u(t)}catch(e){console.error("Error fetching user:",e)}finally{p(!1)}},C=async e=>{if(c){w(!0);try{await (0,n.updateDoc)((0,n.doc)(d.db,"users",c.id),{role:e,updatedAt:new Date}),u({...c,role:e}),alert(`User role updated to ${e} successfully!`)}catch(e){console.error("Error updating user role:",e),alert("Error updating user role")}finally{w(!1)}}},q=async()=>{if(c){w(!0);try{let e=!c.isActive;await (0,n.updateDoc)((0,n.doc)(d.db,"users",c.id),{isActive:e,updatedAt:new Date}),u({...c,isActive:e}),alert(`User ${e?"activated":"deactivated"} successfully!`)}catch(e){console.error("Error updating user status:",e),alert("Error updating user status")}finally{w(!1)}}};return m?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):c?s.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)(o.z,{variant:"outline",onClick:()=>r.push("/admin/users"),children:[s.jsx(h,{className:"w-4 h-4 mr-2"}),"Back to Users"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(x,{className:(e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"moderator":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(c.role),children:c.role.toUpperCase()}),s.jsx(x,{className:c.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:c.isActive?"ACTIVE":"INACTIVE"})]})]}),s.jsx(l.Zb,{className:"p-6 mb-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:c.displayName||"No Display Name"}),s.jsx("p",{className:"text-gray-600",children:c.email})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"User ID"}),s.jsx("p",{className:"font-mono text-sm",children:c.id})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Joined"}),s.jsx("p",{className:"font-medium",children:c.createdAt?new Date(1e3*c.createdAt.seconds).toLocaleDateString():"Unknown"})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Last Login"}),s.jsx("p",{className:"font-medium",children:c.lastLoginAt?new Date(1e3*c.lastLoginAt.seconds).toLocaleDateString():"Never"})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("p",{className:"font-medium",children:c.isActive?"Active":"Inactive"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Petitions Created"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.petitionCount||0})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Petitions Signed"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.signatureCount||0})]})]})]})}),(0,s.jsxs)(l.Zb,{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Admin Actions"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-md font-medium mb-2",children:"Role Management"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:["admin"!==c.role&&(0,s.jsxs)(o.z,{onClick:()=>C("admin"),disabled:N,variant:"outline",size:"sm",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"Make Admin"]}),"moderator"!==c.role&&(0,s.jsxs)(o.z,{onClick:()=>C("moderator"),disabled:N,variant:"outline",size:"sm",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"Make Moderator"]}),"user"!==c.role&&s.jsx(o.z,{onClick:()=>C("user"),disabled:N,variant:"outline",size:"sm",children:"Remove Privileges"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-md font-medium mb-2",children:"Account Status"}),s.jsx(o.z,{onClick:q,disabled:N,variant:c.isActive?"destructive":"default",size:"sm",children:c.isActive?(0,s.jsxs)(s.Fragment,{children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"Deactivate User"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Activate User"]})})]})]}),N&&(0,s.jsxs)("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-2"}),"Updating user..."]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"User Not Found"}),(0,s.jsxs)(o.z,{onClick:()=>r.push("/admin/users"),children:[s.jsx(h,{className:"w-4 h-4 mr-2"}),"Back to Users"]})]})})}},5094:(e,r,t)=>{"use strict";t.d(r,{z:()=>l});var s=t(95344),a=t(3729),i=t(45877),n=t(49247),d=t(11453);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...n},l)=>{let c=a?i.g7:"button";return s.jsx(c,{className:(0,d.cn)(o({variant:r,size:t,className:e})),ref:l,...n})});l.displayName="Button"},23673:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>d,Zb:()=>n,aY:()=>l,ll:()=>o});var s=t(95344),a=t(3729),i=t(11453);let n=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let d=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let o=a.forwardRef(({className:e,...r},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle",a.forwardRef(({className:e,...r},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let l=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},11453:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(56815),a=t(79377);function i(...e){return(0,a.m6)((0,s.W)(e))}},3788:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let s=(0,t(86843).createProxy)(String.raw`/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/users/[id]/page.tsx`),{__esModule:a,$$typeof:i}=s,n=s.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,322,8584,2569,8415],()=>t(1053));module.exports=s})();