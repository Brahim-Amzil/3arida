(()=>{var e={};e.id=3,e.ids=[3],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},57649:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=t(50482),i=t(69108),a=t(62563),n=t.n(a),l=t(68300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,85557)),"/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,33990)),"/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/page.tsx"],x="/admin/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},74041:(e,s,t)=>{Promise.resolve().then(t.bind(t,28290))},28290:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(95344),i=t(3729),a=t(20783),n=t.n(a),l=t(49151),d=t(57086),o=t(23673),c=t(5094),x=t(51133),u=t(87097),m=t(81012);function p(){let{user:e,userProfile:s,loading:t,hasRequiredRole:a}=(0,x.Rc)(),[p,h]=(0,i.useState)({totalPetitions:0,pendingPetitions:0,approvedPetitions:0,pausedPetitions:0,totalUsers:0,totalSignatures:0,recentPetitions:[]}),[g,f]=(0,i.useState)(!0),[j,v]=(0,i.useState)("");(0,i.useEffect)(()=>{!t&&a&&b()},[t,a]);let b=async()=>{try{f(!0),v("");let e=(0,u.collection)(m.db,"petitions"),[s,t,r,i,a,n]=await Promise.all([(0,u.getDocs)((0,u.query)(e)),(0,u.getDocs)((0,u.query)(e,(0,u.where)("status","==","pending"))),(0,u.getDocs)((0,u.query)(e,(0,u.where)("status","==","approved"))),(0,u.getDocs)((0,u.query)(e,(0,u.where)("status","==","paused"))),(0,u.getDocs)((0,u.query)(e,(0,u.orderBy)("createdAt","desc"),(0,u.b9)(5))),(0,u.getDocs)((0,u.collection)(m.db,"users"))]),l=0,d=[];s.forEach(e=>{let s={id:e.id,...e.data()};l+=s.currentSignatures||0}),a.forEach(e=>{let s=e.data(),t={id:e.id,...s,createdAt:s.createdAt?.toDate?.()||new Date,updatedAt:s.updatedAt?.toDate?.()||new Date};d.push(t)}),h({totalPetitions:s.size,pendingPetitions:t.size,approvedPetitions:r.size,pausedPetitions:i.size,totalUsers:n.size,totalSignatures:l,recentPetitions:d})}catch(e){console.error("Error loading admin stats:",e),v("Failed to load admin statistics")}finally{f(!1)}};return t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(l.default,{}),r.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})]}):a?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(l.default,{}),r.jsx(d.Z,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Manage petitions, users, and platform statistics"})]}),g?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>r.jsx(o.Zb,{children:r.jsx(o.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})})},s))}):j?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:[r.jsx("p",{className:"text-red-600",children:j}),r.jsx(c.z,{onClick:b,className:"mt-4",variant:"outline",children:"Try Again"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(o.Zb,{children:r.jsx(o.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Petitions"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalPetitions})]})]})})}),r.jsx(o.Zb,{children:r.jsx(o.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.pendingPetitions})]})]})})}),r.jsx(o.Zb,{children:r.jsx(o.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalUsers})]})]})})}),r.jsx(o.Zb,{children:r.jsx(o.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Signatures"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.totalSignatures.toLocaleString()})]})]})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{children:"Recent Petitions"})}),r.jsx(o.aY,{children:0===p.recentPetitions.length?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent petitions"}):r.jsx("div",{className:"space-y-4",children:p.recentPetitions.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"paused"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.status}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.currentSignatures," signatures"]})]})]}),r.jsx(c.z,{size:"sm",variant:"outline",asChild:!0,children:r.jsx(n(),{href:`/admin/petitions/${e.id}`,children:"Review"})})]},e.id))})})]}),(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{children:"System Status"})}),r.jsx(o.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Platform Status"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Operational"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Database"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Connected"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Storage"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Available"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Payments"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]})]})})]})]})]})]})]}):null}},49151:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(53267);let i=t.n(r)()(async()=>{},{loadableGenerated:{modules:["/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/components/layout/HeaderWrapper.tsx -> ./Header"]},ssr:!1,loading:()=>null})},5094:(e,s,t)=>{"use strict";t.d(s,{z:()=>o});var r=t(95344),i=t(3729),a=t(45877),n=t(49247),l=t(11453);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=i.forwardRef(({className:e,variant:s,size:t,asChild:i=!1,...n},o)=>{let c=i?a.g7:"button";return r.jsx(c,{className:(0,l.cn)(d({variant:s,size:t,className:e})),ref:o,...n})});o.displayName="Button"},51133:(e,s,t)=>{"use strict";t.d(s,{Rc:()=>d,fc:()=>x,u2:()=>o,xw:()=>n}),t(95344);var r=t(3729),i=t(22254),a=t(87382);let n=(e="/auth/login")=>{let{user:s,loading:t}=(0,a.useAuth)(),n=(0,i.useRouter)();return(0,r.useEffect)(()=>{if(!t&&!s){let s=window.location.pathname,t=`${e}?redirect=${encodeURIComponent(s)}`;n.push(t)}},[s,t,n,e]),{user:s,loading:t,isAuthenticated:!!s}},l=(e,s="/dashboard")=>{let{user:t,userProfile:n,loading:l}=(0,a.useAuth)(),d=(0,i.useRouter)();return(0,r.useEffect)(()=>{if(!l){if(t)n&&!e.includes(n.role)&&d.push(s);else{let e=window.location.pathname,s=`/auth/login?redirect=${encodeURIComponent(e)}`;d.push(s)}}},[t,n,l,d,e,s]),{user:t,userProfile:n,loading:l,isAuthenticated:!!t,hasRequiredRole:!!n&&e.includes(n.role)}},d=(e="/dashboard")=>l(["admin"],e),o=(e="/dashboard")=>l(["moderator","admin"],e),c=(e,s)=>!!e&&s.includes(e.role),x=e=>c(e,["moderator","admin"])},11453:(e,s,t)=>{"use strict";t.d(s,{cn:()=>a});var r=t(56815),i=t(79377);function a(...e){return(0,i.m6)((0,r.W)(e))}},85557:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>a,__esModule:()=>i,default:()=>n});let r=(0,t(86843).createProxy)(String.raw`/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/page.tsx`),{__esModule:i,$$typeof:a}=r,n=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[1638,322,4697,1476,258,6188],()=>t(57649));module.exports=r})();