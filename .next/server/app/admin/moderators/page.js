(()=>{var e={};e.id=7088,e.ids=[7088],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},35870:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=t(50482),a=t(69108),i=t(62563),n=t.n(i),o=t(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["admin",{children:["moderators",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79806)),"/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/moderators/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,33990)),"/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/moderators/page.tsx"],m="/admin/moderators/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/moderators/page",pathname:"/admin/moderators",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},82863:(e,r,t)=>{Promise.resolve().then(t.bind(t,19086))},19086:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var s=t(95344),a=t(3729),i=t(22254),n=t(87097),o=t(81012),l=t(87382),d=t(49151),c=t(57086),m=t(5094),u=t(23673);function x(){let e=(0,i.useRouter)(),{userProfile:r,loading:t}=(0,l.useAuth)(),[x,p]=(0,a.useState)([]),[h,g]=(0,a.useState)(!0),[f,j]=(0,a.useState)(""),[v,b]=(0,a.useState)("");(0,a.useEffect)(()=>{t||r?.role==="admin"||e.push("/dashboard")},[t,r,e]),(0,a.useEffect)(()=>{r?.role==="admin"&&y()},[r]);let y=async()=>{try{g(!0);let e=(await (0,n.getDocs)((0,n.collection)(o.db,"users"))).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate?.()||new Date,updatedAt:e.data().updatedAt?.toDate?.(),lastLoginAt:e.data().lastLoginAt?.toDate?.()}));p(e)}catch(e){console.error("Error loading users:",e),j("Failed to load users")}finally{g(!1)}},N=async e=>{if(confirm("Are you sure you want to promote this user to moderator?"))try{await (0,n.updateDoc)((0,n.doc)(o.db,"users",e),{role:"moderator",updatedAt:new Date}),await y()}catch(e){console.error("Error promoting user:",e),alert("Failed to promote user to moderator")}},w=async e=>{if(confirm("Are you sure you want to demote this moderator to user?"))try{await (0,n.updateDoc)((0,n.doc)(o.db,"users",e),{role:"user",updatedAt:new Date}),await y()}catch(e){console.error("Error demoting moderator:",e),alert("Failed to demote moderator")}};if(t||h)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(d.default,{}),s.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})]});if(r?.role!=="admin")return null;let A=x.filter(e=>"moderator"===e.role),P=x.filter(e=>"user"===e.role),q=A.filter(e=>e.name?.toLowerCase().includes(v.toLowerCase())||e.email?.toLowerCase().includes(v.toLowerCase())),k=P.filter(e=>e.name?.toLowerCase().includes(v.toLowerCase())||e.email?.toLowerCase().includes(v.toLowerCase()));return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(d.default,{}),s.jsx(c.Z,{}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Moderator Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage moderator accounts and permissions"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx(u.Zb,{children:s.jsx(u.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Moderators"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.length})]})]})})}),s.jsx(u.Zb,{children:s.jsx(u.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Moderators"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.filter(e=>e.isActive).length})]})]})})}),s.jsx(u.Zb,{children:s.jsx(u.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Regular Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.length})]})]})})})]}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",placeholder:"Search by name or email...",value:v,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,s.jsxs)(u.Zb,{className:"mb-8",children:[s.jsx(u.Ol,{children:s.jsx(u.ll,{children:"Current Moderators"})}),s.jsx(u.aY,{children:0===q.length?s.jsx("p",{className:"text-gray-600 text-center py-8",children:"No moderators found"}):s.jsx("div",{className:"space-y-4",children:q.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-medium text-lg",children:(e.name||e.email||"M").charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.name||e.email||"Unknown"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Moderator"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"})]})]})]}),s.jsx(m.z,{variant:"outline",onClick:()=>w(e.id),children:"Demote to User"})]},e.id))})})]}),(0,s.jsxs)(u.Zb,{children:[(0,s.jsxs)(u.Ol,{children:[s.jsx(u.ll,{children:"Regular Users"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Promote users to moderator role"})]}),s.jsx(u.aY,{children:0===k.length?s.jsx("p",{className:"text-gray-600 text-center py-8",children:"No users found"}):(0,s.jsxs)("div",{className:"space-y-4",children:[k.slice(0,10).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-600 font-medium text-lg",children:(e.name||e.email||"U").charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.name||e.email||"Unknown"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"User"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Active":"Inactive"})]})]})]}),s.jsx(m.z,{onClick:()=>N(e.id),children:"Promote to Moderator"})]},e.id)),k.length>10&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 text-center pt-4",children:["Showing 10 of ",k.length," users. Use search to find specific users."]})]})})]})]})]})}},49151:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(53267);let a=t.n(s)()(async()=>{},{loadableGenerated:{modules:["/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/components/layout/HeaderWrapper.tsx -> ./Header"]},ssr:!1,loading:()=>null})},5094:(e,r,t)=>{"use strict";t.d(r,{z:()=>d});var s=t(95344),a=t(3729),i=t(45877),n=t(49247),o=t(11453);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...n},d)=>{let c=a?i.g7:"button";return s.jsx(c,{className:(0,o.cn)(l({variant:r,size:t,className:e})),ref:d,...n})});d.displayName="Button"},11453:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(56815),a=t(79377);function i(...e){return(0,a.m6)((0,s.W)(e))}},79806:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let s=(0,t(86843).createProxy)(String.raw`/Users/brahimamzil/Downloads/DEV_APPS/----3arida/3arida-app/src/app/admin/moderators/page.tsx`),{__esModule:a,$$typeof:i}=s,n=s.default}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,322,4697,1476,4983,6188],()=>t(35870));module.exports=s})();